(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}})();var yd={exports:{}},fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function kA(){if(c_)return fl;c_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,l,h){var d=null;if(h!==void 0&&(d=""+h),l.key!==void 0&&(d=""+l.key),"key"in l){h={};for(var g in l)g!=="key"&&(h[g]=l[g])}else h=l;return l=h.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:h}}return fl.Fragment=t,fl.jsx=i,fl.jsxs=i,fl}var h_;function LA(){return h_||(h_=1,yd.exports=kA()),yd.exports}var Z=LA(),_d={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function zA(){if(f_)return bt;f_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),D=Symbol.iterator;function C(I){return I===null||typeof I!="object"?null:(I=D&&I[D]||I["@@iterator"],typeof I=="function"?I:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,rt={};function J(I,K,it){this.props=I,this.context=K,this.refs=rt,this.updater=it||H}J.prototype.isReactComponent={},J.prototype.setState=function(I,K){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,K,"setState")},J.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function Tt(){}Tt.prototype=J.prototype;function gt(I,K,it){this.props=I,this.context=K,this.refs=rt,this.updater=it||H}var ct=gt.prototype=new Tt;ct.constructor=gt,$(ct,J.prototype),ct.isPureReactComponent=!0;var Ht=Array.isArray,Et={H:null,A:null,T:null,S:null,V:null},Bt=Object.prototype.hasOwnProperty;function O(I,K,it,W,ht,wt){return it=wt.ref,{$$typeof:r,type:I,key:K,ref:it!==void 0?it:null,props:wt}}function S(I,K){return O(I.type,K,void 0,void 0,void 0,I.props)}function R(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function V(I){var K={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(it){return K[it]})}var M=/\/+/g;function x(I,K){return typeof I=="object"&&I!==null&&I.key!=null?V(""+I.key):K.toString(36)}function w(){}function De(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(w,w):(I.status="pending",I.then(function(K){I.status==="pending"&&(I.status="fulfilled",I.value=K)},function(K){I.status==="pending"&&(I.status="rejected",I.reason=K)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function ee(I,K,it,W,ht){var wt=typeof I;(wt==="undefined"||wt==="boolean")&&(I=null);var pt=!1;if(I===null)pt=!0;else switch(wt){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(I.$$typeof){case r:case t:pt=!0;break;case A:return pt=I._init,ee(pt(I._payload),K,it,W,ht)}}if(pt)return ht=ht(I),pt=W===""?"."+x(I,0):W,Ht(ht)?(it="",pt!=null&&(it=pt.replace(M,"$&/")+"/"),ee(ht,K,it,"",function(It){return It})):ht!=null&&(R(ht)&&(ht=S(ht,it+(ht.key==null||I&&I.key===ht.key?"":(""+ht.key).replace(M,"$&/")+"/")+pt)),K.push(ht)),1;pt=0;var Ee=W===""?".":W+":";if(Ht(I))for(var et=0;et<I.length;et++)W=I[et],wt=Ee+x(W,et),pt+=ee(W,K,it,wt,ht);else if(et=C(I),typeof et=="function")for(I=et.call(I),et=0;!(W=I.next()).done;)W=W.value,wt=Ee+x(W,et++),pt+=ee(W,K,it,wt,ht);else if(wt==="object"){if(typeof I.then=="function")return ee(De(I),K,it,W,ht);throw K=String(I),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return pt}function q(I,K,it){if(I==null)return I;var W=[],ht=0;return ee(I,W,"","",function(wt){return K.call(it,wt,ht++)}),W}function nt(I){if(I._status===-1){var K=I._result;K=K(),K.then(function(it){(I._status===0||I._status===-1)&&(I._status=1,I._result=it)},function(it){(I._status===0||I._status===-1)&&(I._status=2,I._result=it)}),I._status===-1&&(I._status=0,I._result=K)}if(I._status===1)return I._result.default;throw I._result}var ot=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function Pt(){}return bt.Children={map:q,forEach:function(I,K,it){q(I,function(){K.apply(this,arguments)},it)},count:function(I){var K=0;return q(I,function(){K++}),K},toArray:function(I){return q(I,function(K){return K})||[]},only:function(I){if(!R(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},bt.Component=J,bt.Fragment=i,bt.Profiler=l,bt.PureComponent=gt,bt.StrictMode=s,bt.Suspense=y,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Et,bt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return Et.H.useMemoCache(I)}},bt.cache=function(I){return function(){return I.apply(null,arguments)}},bt.cloneElement=function(I,K,it){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var W=$({},I.props),ht=I.key,wt=void 0;if(K!=null)for(pt in K.ref!==void 0&&(wt=void 0),K.key!==void 0&&(ht=""+K.key),K)!Bt.call(K,pt)||pt==="key"||pt==="__self"||pt==="__source"||pt==="ref"&&K.ref===void 0||(W[pt]=K[pt]);var pt=arguments.length-2;if(pt===1)W.children=it;else if(1<pt){for(var Ee=Array(pt),et=0;et<pt;et++)Ee[et]=arguments[et+2];W.children=Ee}return O(I.type,ht,void 0,void 0,wt,W)},bt.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:h,_context:I},I},bt.createElement=function(I,K,it){var W,ht={},wt=null;if(K!=null)for(W in K.key!==void 0&&(wt=""+K.key),K)Bt.call(K,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ht[W]=K[W]);var pt=arguments.length-2;if(pt===1)ht.children=it;else if(1<pt){for(var Ee=Array(pt),et=0;et<pt;et++)Ee[et]=arguments[et+2];ht.children=Ee}if(I&&I.defaultProps)for(W in pt=I.defaultProps,pt)ht[W]===void 0&&(ht[W]=pt[W]);return O(I,wt,void 0,void 0,null,ht)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(I){return{$$typeof:g,render:I}},bt.isValidElement=R,bt.lazy=function(I){return{$$typeof:A,_payload:{_status:-1,_result:I},_init:nt}},bt.memo=function(I,K){return{$$typeof:_,type:I,compare:K===void 0?null:K}},bt.startTransition=function(I){var K=Et.T,it={};Et.T=it;try{var W=I(),ht=Et.S;ht!==null&&ht(it,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Pt,ot)}catch(wt){ot(wt)}finally{Et.T=K}},bt.unstable_useCacheRefresh=function(){return Et.H.useCacheRefresh()},bt.use=function(I){return Et.H.use(I)},bt.useActionState=function(I,K,it){return Et.H.useActionState(I,K,it)},bt.useCallback=function(I,K){return Et.H.useCallback(I,K)},bt.useContext=function(I){return Et.H.useContext(I)},bt.useDebugValue=function(){},bt.useDeferredValue=function(I,K){return Et.H.useDeferredValue(I,K)},bt.useEffect=function(I,K,it){var W=Et.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(I,K)},bt.useId=function(){return Et.H.useId()},bt.useImperativeHandle=function(I,K,it){return Et.H.useImperativeHandle(I,K,it)},bt.useInsertionEffect=function(I,K){return Et.H.useInsertionEffect(I,K)},bt.useLayoutEffect=function(I,K){return Et.H.useLayoutEffect(I,K)},bt.useMemo=function(I,K){return Et.H.useMemo(I,K)},bt.useOptimistic=function(I,K){return Et.H.useOptimistic(I,K)},bt.useReducer=function(I,K,it){return Et.H.useReducer(I,K,it)},bt.useRef=function(I){return Et.H.useRef(I)},bt.useState=function(I){return Et.H.useState(I)},bt.useSyncExternalStore=function(I,K,it){return Et.H.useSyncExternalStore(I,K,it)},bt.useTransition=function(){return Et.H.useTransition()},bt.version="19.1.1",bt}var d_;function cm(){return d_||(d_=1,_d.exports=zA()),_d.exports}var ce=cm(),vd={exports:{}},dl={},Ed={exports:{}},Td={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function BA(){return m_||(m_=1,function(r){function t(q,nt){var ot=q.length;q.push(nt);t:for(;0<ot;){var Pt=ot-1>>>1,I=q[Pt];if(0<l(I,nt))q[Pt]=nt,q[ot]=I,ot=Pt;else break t}}function i(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var nt=q[0],ot=q.pop();if(ot!==nt){q[0]=ot;t:for(var Pt=0,I=q.length,K=I>>>1;Pt<K;){var it=2*(Pt+1)-1,W=q[it],ht=it+1,wt=q[ht];if(0>l(W,ot))ht<I&&0>l(wt,W)?(q[Pt]=wt,q[ht]=ot,Pt=ht):(q[Pt]=W,q[it]=ot,Pt=it);else if(ht<I&&0>l(wt,ot))q[Pt]=wt,q[ht]=ot,Pt=ht;else break t}}return nt}function l(q,nt){var ot=q.sortIndex-nt.sortIndex;return ot!==0?ot:q.id-nt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var y=[],_=[],A=1,D=null,C=3,H=!1,$=!1,rt=!1,J=!1,Tt=typeof setTimeout=="function"?setTimeout:null,gt=typeof clearTimeout=="function"?clearTimeout:null,ct=typeof setImmediate<"u"?setImmediate:null;function Ht(q){for(var nt=i(_);nt!==null;){if(nt.callback===null)s(_);else if(nt.startTime<=q)s(_),nt.sortIndex=nt.expirationTime,t(y,nt);else break;nt=i(_)}}function Et(q){if(rt=!1,Ht(q),!$)if(i(y)!==null)$=!0,Bt||(Bt=!0,x());else{var nt=i(_);nt!==null&&ee(Et,nt.startTime-q)}}var Bt=!1,O=-1,S=5,R=-1;function V(){return J?!0:!(r.unstable_now()-R<S)}function M(){if(J=!1,Bt){var q=r.unstable_now();R=q;var nt=!0;try{t:{$=!1,rt&&(rt=!1,gt(O),O=-1),H=!0;var ot=C;try{e:{for(Ht(q),D=i(y);D!==null&&!(D.expirationTime>q&&V());){var Pt=D.callback;if(typeof Pt=="function"){D.callback=null,C=D.priorityLevel;var I=Pt(D.expirationTime<=q);if(q=r.unstable_now(),typeof I=="function"){D.callback=I,Ht(q),nt=!0;break e}D===i(y)&&s(y),Ht(q)}else s(y);D=i(y)}if(D!==null)nt=!0;else{var K=i(_);K!==null&&ee(Et,K.startTime-q),nt=!1}}break t}finally{D=null,C=ot,H=!1}nt=void 0}}finally{nt?x():Bt=!1}}}var x;if(typeof ct=="function")x=function(){ct(M)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,De=w.port2;w.port1.onmessage=M,x=function(){De.postMessage(null)}}else x=function(){Tt(M,0)};function ee(q,nt){O=Tt(function(){q(r.unstable_now())},nt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(q){switch(C){case 1:case 2:case 3:var nt=3;break;default:nt=C}var ot=C;C=nt;try{return q()}finally{C=ot}},r.unstable_requestPaint=function(){J=!0},r.unstable_runWithPriority=function(q,nt){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ot=C;C=q;try{return nt()}finally{C=ot}},r.unstable_scheduleCallback=function(q,nt,ot){var Pt=r.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?Pt+ot:Pt):ot=Pt,q){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ot+I,q={id:A++,callback:nt,priorityLevel:q,startTime:ot,expirationTime:I,sortIndex:-1},ot>Pt?(q.sortIndex=ot,t(_,q),i(y)===null&&q===i(_)&&(rt?(gt(O),O=-1):rt=!0,ee(Et,ot-Pt))):(q.sortIndex=I,t(y,q),$||H||($=!0,Bt||(Bt=!0,x()))),q},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(q){var nt=C;return function(){var ot=C;C=nt;try{return q.apply(this,arguments)}finally{C=ot}}}}(Td)),Td}var g_;function jA(){return g_||(g_=1,Ed.exports=BA()),Ed.exports}var Ad={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function qA(){if(p_)return en;p_=1;var r=cm();function t(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)_+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(y,_,A){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:D==null?null:""+D,children:y,containerInfo:_,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(y,_){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return h(y,_,null,A)},en.flushSync=function(y){var _=d.T,A=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=_,s.p=A,s.d.f()}},en.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(y,_))},en.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},en.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var A=_.as,D=g(A,_.crossOrigin),C=typeof _.integrity=="string"?_.integrity:void 0,H=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;A==="style"?s.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:D,integrity:C,fetchPriority:H}):A==="script"&&s.d.X(y,{crossOrigin:D,integrity:C,fetchPriority:H,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},en.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var A=g(_.as,_.crossOrigin);s.d.M(y,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(y)},en.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var A=_.as,D=g(A,_.crossOrigin);s.d.L(y,A,{crossOrigin:D,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},en.preloadModule=function(y,_){if(typeof y=="string")if(_){var A=g(_.as,_.crossOrigin);s.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(y)},en.requestFormReset=function(y){s.d.r(y)},en.unstable_batchedUpdates=function(y,_){return y(_)},en.useFormState=function(y,_,A){return d.H.useFormState(y,_,A)},en.useFormStatus=function(){return d.H.useHostTransitionStatus()},en.version="19.1.1",en}var y_;function HA(){if(y_)return Ad.exports;y_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Ad.exports=qA(),Ad.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function GA(){if(__)return dl;__=1;var r=jA(),t=cm(),i=HA();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(h(e)!==e)throw Error(s(188))}function y(e){var n=e.alternate;if(!n){if(n=h(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(o=c.return,o!==null){a=o;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return g(c),e;if(f===o)return g(c),n;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=c,o=f;else{for(var v=!1,E=c.child;E;){if(E===a){v=!0,a=c,o=f;break}if(E===o){v=!0,o=c,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=c;break}if(E===o){v=!0,o=f,a=c;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function _(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=_(e),n!==null)return n;e=e.sibling}return null}var A=Object.assign,D=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),rt=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),Tt=Symbol.for("react.provider"),gt=Symbol.for("react.consumer"),ct=Symbol.for("react.context"),Ht=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),Bt=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function x(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function De(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $:return"Fragment";case J:return"Profiler";case rt:return"StrictMode";case Et:return"Suspense";case Bt:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case H:return"Portal";case ct:return(e.displayName||"Context")+".Provider";case gt:return(e._context.displayName||"Context")+".Consumer";case Ht:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return n=e.displayName||null,n!==null?n:De(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return De(e(n))}catch{}}return null}var ee=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},Pt=[],I=-1;function K(e){return{current:e}}function it(e){0>I||(e.current=Pt[I],Pt[I]=null,I--)}function W(e,n){I++,Pt[I]=e.current,e.current=n}var ht=K(null),wt=K(null),pt=K(null),Ee=K(null);function et(e,n){switch(W(pt,n),W(wt,e),W(ht,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Ly(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Ly(n),e=zy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(ht),W(ht,e)}function It(){it(ht),it(wt),it(pt)}function Ot(e){e.memoizedState!==null&&W(Ee,e);var n=ht.current,a=zy(n,e.type);n!==a&&(W(wt,e),W(ht,a))}function $t(e){wt.current===e&&(it(ht),it(wt)),Ee.current===e&&(it(Ee),ol._currentValue=ot)}var Ge=Object.prototype.hasOwnProperty,Te=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,ke=r.unstable_shouldYield,ln=r.unstable_requestPaint,jt=r.unstable_now,ge=r.unstable_getCurrentPriorityLevel,dn=r.unstable_ImmediatePriority,Si=r.unstable_UserBlockingPriority,Jr=r.unstable_NormalPriority,yh=r.unstable_LowPriority,Gs=r.unstable_IdlePriority,so=r.log,Fl=r.unstable_setDisableYieldValue,fe=null,Yt=null;function vn(e){if(typeof so=="function"&&Fl(e),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(fe,e)}catch{}}var We=Math.clz32?Math.clz32:Wr,Ql=Math.log,_h=Math.LN2;function Wr(e){return e>>>=0,e===0?32:31-(Ql(e)/_h|0)|0}var ts=256,es=4194304;function Gn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fs(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var c=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?c=Gn(o):(v&=E,v!==0?c=Gn(v):a||(a=E&~e,a!==0&&(c=Gn(a))))):(E=o&~f,E!==0?c=Gn(E):v!==0?c=Gn(v):a||(a=o&~e,a!==0&&(c=Gn(a)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:c}function ns(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function ao(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oo(){var e=ts;return ts<<=1,(ts&4194048)===0&&(ts=256),e}function lo(){var e=es;return es<<=1,(es&62914560)===0&&(es=4194304),e}function bi(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function wi(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function uo(e,n,a,o,c,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-We(a),Q=1<<G;E[G]=0,b[G]=-1;var z=L[G];if(z!==null)for(L[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~Q}o!==0&&Zn(e,o,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~n))}function Zn(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-We(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function co(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-We(a),c=1<<o;c&n|e[o]&n&&(e[o]|=n),a&=~c}}function sr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Qs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ar(){var e=nt.p;return e!==0?e:(e=window.event,e===void 0?32:r_(e.type))}function Yl(e,n){var a=nt.p;try{return nt.p=e,n()}finally{nt.p=a}}var oe=Math.random().toString(36).slice(2),Ne="__reactFiber$"+oe,Ae="__reactProps$"+oe,Dn="__reactContainer$"+oe,ho="__reactEvents$"+oe,vh="__reactListeners$"+oe,or="__reactHandles$"+oe,Kl="__reactResources$"+oe,is="__reactMarker$"+oe;function lr(e){delete e[Ne],delete e[Ae],delete e[ho],delete e[vh],delete e[or]}function Ri(e){var n=e[Ne];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Dn]||a[Ne]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Hy(e);e!==null;){if(a=e[Ne])return a;e=Hy(e)}return n}e=a,a=e.parentNode}return null}function Jn(e){if(e=e[Ne]||e[Dn]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Wn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function un(e){var n=e[Kl];return n||(n=e[Kl]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function pe(e){e[is]=!0}var fo=new Set,Ys={};function Fn(e,n){Ii(e,n),Ii(e+"Capture",n)}function Ii(e,n){for(Ys[e]=n,e=0;e<n.length;e++)fo.add(n[e])}var Xl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$l={},rs={};function Zl(e){return Ge.call(rs,e)?!0:Ge.call($l,e)?!1:Xl.test(e)?rs[e]=!0:($l[e]=!0,!1)}function ur(e,n,a){if(Zl(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function ti(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Fe(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}var ss,Jl;function Ci(e){if(ss===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ss=n&&n[1]||"",Jl=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ss+e+Jl}var Ks=!1;function Xs(e,n){if(!e||Ks)return"";Ks=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(B){var z=B}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(B){z=B}e.call(Q.prototype)}}else{try{throw Error()}catch(B){z=B}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(c=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(o===b.length||c===L.length)for(o=b.length-1,c=L.length-1;1<=o&&0<=c&&b[o]!==L[c];)c--;for(;1<=o&&0<=c;o--,c--)if(b[o]!==L[c]){if(o!==1||c!==1)do if(o--,c--,0>c||b[o]!==L[c]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=c);break}}}finally{Ks=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ci(a):""}function mo(e){switch(e.tag){case 26:case 27:case 5:return Ci(e.type);case 16:return Ci("Lazy");case 13:return Ci("Suspense");case 19:return Ci("SuspenseList");case 0:case 15:return Xs(e.type,!1);case 11:return Xs(e.type.render,!1);case 1:return Xs(e.type,!0);case 31:return Ci("Activity");default:return""}}function $s(e){try{var n="";do n+=mo(e),e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function cn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function go(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Eh(e){var n=go(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Zs(e){e._valueTracker||(e._valueTracker=Eh(e))}function po(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=go(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function as(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Th=/[\n"\\]/g;function Se(e){return e.replace(Th,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function En(e,n,a,o,c,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+cn(n)):e.value!==""+cn(n)&&(e.value=""+cn(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?cr(e,v,cn(n)):a!=null?cr(e,v,cn(a)):o!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+cn(E):e.removeAttribute("name")}function os(e,n,a,o,c,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;a=a!=null?""+cn(a):"",n=n!=null?""+cn(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function cr(e,n,a){n==="number"&&as(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Di(e,n,a,o){if(e=e.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=n.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&o&&(e[a].defaultSelected=!0)}else{for(a=""+cn(a),n=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Zt(e,n,a){if(n!=null&&(n=""+cn(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+cn(a):""}function ls(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(ee(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=cn(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Nn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var us=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wl(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||us.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function yo(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var c in n)o=n[c],n.hasOwnProperty(c)&&a[c]!==o&&Wl(e,c,o)}else for(var f in n)n.hasOwnProperty(f)&&Wl(e,f,n[f])}function _o(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ah=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(e){return Sh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ni=null;function On(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Oi=null,Vi=null;function vo(e){var n=Jn(e);if(n&&(e=n.stateNode)){var a=e[Ae]||null;t:switch(e=n.stateNode,n.type){case"input":if(En(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Se(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var c=o[Ae]||null;if(!c)throw Error(s(90));En(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&po(o)}break t;case"textarea":Zt(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Di(e,!!a.multiple,n,!1)}}}var ei=!1;function tu(e,n,a){if(ei)return e(n,a);ei=!0;try{var o=e(n);return o}finally{if(ei=!1,(Oi!==null||Vi!==null)&&(Yu(),Oi&&(n=Oi,e=Vi,Vi=Oi=null,vo(n),e)))for(n=0;n<e.length;n++)vo(e[n])}}function cs(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Ae]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vn=!1;if(Qn)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{Vn=!1}var ni=null,hr=null,Mi=null;function Eo(){if(Mi)return Mi;var e,n=hr,a=n.length,o,c="value"in ni?ni.value:ni.textContent,f=c.length;for(e=0;e<a&&n[e]===c[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===c[f-o];o++);return Mi=c.slice(e,1<o?1-o:void 0)}function ii(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ri(){return!0}function To(){return!1}function Le(e){function n(a,o,c,f,v){this._reactName=a,this._targetInst=c,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ri:To,this.isPropagationStopped=To,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),n}var Ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=Le(Ft),fs=A({},Ft,{view:0,detail:0}),eu=Le(fs),ta,ea,si,ds=A({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ps,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&e.type==="mousemove"?(ta=e.screenX-si.screenX,ea=e.screenY-si.screenY):ea=ta=0,si=e),ta)},movementY:function(e){return"movementY"in e?e.movementY:ea}}),Mn=Le(ds),nu=A({},ds,{dataTransfer:0}),bh=Le(nu),ms=A({},fs,{relatedTarget:0}),na=Le(ms),Ao=A({},Ft,{animationName:0,elapsedTime:0,pseudoElement:0}),ia=Le(Ao),iu=A({},Ft,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ra=Le(iu),wh=A({},Ft,{data:0}),So=Le(wh),gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=su[e])?!!n[e]:!1}function ps(){return bo}var au=A({},fs,{key:function(e){if(e.key){var n=gs[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ru[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ps,charCode:function(e){return e.type==="keypress"?ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sa=Le(au),ou=A({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wo=Le(ou),xi=A({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ps}),lu=Le(xi),uu=A({},Ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),cu=Le(uu),hu=A({},ds,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aa=Le(hu),hn=A({},Ft,{newState:0,oldState:0}),fu=Le(hn),du=[9,13,27,32],ai=Qn&&"CompositionEvent"in window,u=null;Qn&&"documentMode"in document&&(u=document.documentMode);var m=Qn&&"TextEvent"in window&&!u,p=Qn&&(!ai||u&&8<u&&11>=u),T=" ",U=!1;function j(e,n){switch(e){case"keyup":return du.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ut=!1;function Oe(e,n){switch(e){case"compositionend":return tt(n);case"keypress":return n.which!==32?null:(U=!0,T);case"textInput":return e=n.data,e===T&&U?null:e;default:return null}}function kt(e,n){if(Ut)return e==="compositionend"||!ai&&j(e,n)?(e=Eo(),Mi=hr=ni=null,Ut=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return p&&n.locale!=="ko"?null:n.data;default:return null}}var ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ve(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ze[e.type]:n==="textarea"}function Pi(e,n,a,o){Oi?Vi?Vi.push(o):Vi=[o]:Oi=o,n=Wu(n,"onChange"),0<n.length&&(a=new Ws("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Qe=null,oi=null;function Ro(e){My(e,0)}function mu(e){var n=Wn(e);if(po(n))return e}function tg(e,n){if(e==="change")return n}var eg=!1;if(Qn){var Rh;if(Qn){var Ih="oninput"in document;if(!Ih){var ng=document.createElement("div");ng.setAttribute("oninput","return;"),Ih=typeof ng.oninput=="function"}Rh=Ih}else Rh=!1;eg=Rh&&(!document.documentMode||9<document.documentMode)}function ig(){Qe&&(Qe.detachEvent("onpropertychange",rg),oi=Qe=null)}function rg(e){if(e.propertyName==="value"&&mu(oi)){var n=[];Pi(n,oi,e,On(e)),tu(Ro,n)}}function d0(e,n,a){e==="focusin"?(ig(),Qe=n,oi=a,Qe.attachEvent("onpropertychange",rg)):e==="focusout"&&ig()}function m0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mu(oi)}function g0(e,n){if(e==="click")return mu(n)}function p0(e,n){if(e==="input"||e==="change")return mu(n)}function y0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Tn=typeof Object.is=="function"?Object.is:y0;function Io(e,n){if(Tn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var c=a[o];if(!Ge.call(n,c)||!Tn(e[c],n[c]))return!1}return!0}function sg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ag(e,n){var a=sg(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=sg(a)}}function og(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?og(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function lg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=as(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=as(e.document)}return n}function Ch(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var _0=Qn&&"documentMode"in document&&11>=document.documentMode,oa=null,Dh=null,Co=null,Nh=!1;function ug(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nh||oa==null||oa!==as(o)||(o=oa,"selectionStart"in o&&Ch(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Co&&Io(Co,o)||(Co=o,o=Wu(Dh,"onSelect"),0<o.length&&(n=new Ws("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=oa)))}function ys(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var la={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionrun:ys("Transition","TransitionRun"),transitionstart:ys("Transition","TransitionStart"),transitioncancel:ys("Transition","TransitionCancel"),transitionend:ys("Transition","TransitionEnd")},Oh={},cg={};Qn&&(cg=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function _s(e){if(Oh[e])return Oh[e];if(!la[e])return e;var n=la[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in cg)return Oh[e]=n[a];return e}var hg=_s("animationend"),fg=_s("animationiteration"),dg=_s("animationstart"),v0=_s("transitionrun"),E0=_s("transitionstart"),T0=_s("transitioncancel"),mg=_s("transitionend"),gg=new Map,Vh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vh.push("scrollEnd");function Yn(e,n){gg.set(e,n),Fn(n,[e])}var pg=new WeakMap;function xn(e,n){if(typeof e=="object"&&e!==null){var a=pg.get(e);return a!==void 0?a:(n={value:e,source:n,stack:$s(n)},pg.set(e,n),n)}return{value:e,source:n,stack:$s(n)}}var Pn=[],ua=0,Mh=0;function gu(){for(var e=ua,n=Mh=ua=0;n<e;){var a=Pn[n];Pn[n++]=null;var o=Pn[n];Pn[n++]=null;var c=Pn[n];Pn[n++]=null;var f=Pn[n];if(Pn[n++]=null,o!==null&&c!==null){var v=o.pending;v===null?c.next=c:(c.next=v.next,v.next=c),o.pending=c}f!==0&&yg(a,c,f)}}function pu(e,n,a,o){Pn[ua++]=e,Pn[ua++]=n,Pn[ua++]=a,Pn[ua++]=o,Mh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function xh(e,n,a,o){return pu(e,n,a,o),yu(e)}function ca(e,n){return pu(e,null,null,n),yu(e)}function yg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var c=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&n!==null&&(c=31-We(a),e=f.hiddenUpdates,o=e[c],o===null?e[c]=[n]:o.push(n),n.lane=a|536870912),f):null}function yu(e){if(50<Wo)throw Wo=0,jf=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ha={};function A0(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,n,a,o){return new A0(e,n,a,o)}function Ph(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ui(e,n){var a=e.alternate;return a===null?(a=An(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function _g(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function _u(e,n,a,o,c,f){var v=0;if(o=e,typeof e=="function")Ph(e)&&(v=1);else if(typeof e=="string")v=bA(e,a,ht.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case R:return e=An(31,a,n,c),e.elementType=R,e.lanes=f,e;case $:return vs(a.children,c,f,n);case rt:v=8,c|=24;break;case J:return e=An(12,a,n,c|2),e.elementType=J,e.lanes=f,e;case Et:return e=An(13,a,n,c),e.elementType=Et,e.lanes=f,e;case Bt:return e=An(19,a,n,c),e.elementType=Bt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tt:case ct:v=10;break t;case gt:v=9;break t;case Ht:v=11;break t;case O:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=An(v,a,n,c),n.elementType=e,n.type=o,n.lanes=f,n}function vs(e,n,a,o){return e=An(7,e,o,n),e.lanes=a,e}function Uh(e,n,a){return e=An(6,e,null,n),e.lanes=a,e}function kh(e,n,a){return n=An(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var fa=[],da=0,vu=null,Eu=0,Un=[],kn=0,Es=null,ki=1,Li="";function Ts(e,n){fa[da++]=Eu,fa[da++]=vu,vu=e,Eu=n}function vg(e,n,a){Un[kn++]=ki,Un[kn++]=Li,Un[kn++]=Es,Es=e;var o=ki;e=Li;var c=32-We(o)-1;o&=~(1<<c),a+=1;var f=32-We(n)+c;if(30<f){var v=c-c%5;f=(o&(1<<v)-1).toString(32),o>>=v,c-=v,ki=1<<32-We(n)+c|a<<c|o,Li=f+e}else ki=1<<f|a<<c|o,Li=e}function Lh(e){e.return!==null&&(Ts(e,1),vg(e,1,0))}function zh(e){for(;e===vu;)vu=fa[--da],fa[da]=null,Eu=fa[--da],fa[da]=null;for(;e===Es;)Es=Un[--kn],Un[kn]=null,Li=Un[--kn],Un[kn]=null,ki=Un[--kn],Un[kn]=null}var fn=null,de=null,Gt=!1,As=null,li=!1,Bh=Error(s(519));function Ss(e){var n=Error(s(418,""));throw Oo(xn(n,e)),Bh}function Eg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Ne]=e,n[Ae]=o,a){case"dialog":Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":case"embed":Nt("load",n);break;case"video":case"audio":for(a=0;a<el.length;a++)Nt(el[a],n);break;case"source":Nt("error",n);break;case"img":case"image":case"link":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"input":Nt("invalid",n),os(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Zs(n);break;case"select":Nt("invalid",n);break;case"textarea":Nt("invalid",n),ls(n,o.value,o.defaultValue,o.children),Zs(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||ky(n.textContent,a)?(o.popover!=null&&(Nt("beforetoggle",n),Nt("toggle",n)),o.onScroll!=null&&Nt("scroll",n),o.onScrollEnd!=null&&Nt("scrollend",n),o.onClick!=null&&(n.onclick=tc),n=!0):n=!1,n||Ss(e)}function Tg(e){for(fn=e.return;fn;)switch(fn.tag){case 5:case 13:li=!1;return;case 27:case 3:li=!0;return;default:fn=fn.return}}function Do(e){if(e!==fn)return!1;if(!Gt)return Tg(e),Gt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||id(e.type,e.memoizedProps)),a=!a),a&&de&&Ss(e),Tg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(n===0){de=Xn(e.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;e=e.nextSibling}de=null}}else n===27?(n=de,Ir(e.type)?(e=od,od=null,de=e):de=n):de=fn?Xn(e.stateNode.nextSibling):null;return!0}function No(){de=fn=null,Gt=!1}function Ag(){var e=As;return e!==null&&(pn===null?pn=e:pn.push.apply(pn,e),As=null),e}function Oo(e){As===null?As=[e]:As.push(e)}var jh=K(null),bs=null,zi=null;function fr(e,n,a){W(jh,n._currentValue),n._currentValue=a}function Bi(e){e._currentValue=jh.current,it(jh)}function qh(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Hh(e,n,a,o){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var v=c.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=c;for(var b=0;b<n.length;b++)if(E.context===n[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),qh(f.return,a,e),o||(v=null);break t}f=E.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),qh(v,a,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function Vo(e,n,a,o){e=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=c.type;Tn(c.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(c===Ee.current){if(v=c.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(ol):e=[ol])}c=c.return}e!==null&&Hh(n,e,a,o),n.flags|=262144}function Tu(e){for(e=e.firstContext;e!==null;){if(!Tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ws(e){bs=e,zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function tn(e){return Sg(bs,e)}function Au(e,n){return bs===null&&ws(e),Sg(e,n)}function Sg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},zi===null){if(e===null)throw Error(s(308));zi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else zi=zi.next=n;return a}var S0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},b0=r.unstable_scheduleCallback,w0=r.unstable_NormalPriority,Me={$$typeof:ct,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gh(){return{controller:new S0,data:new Map,refCount:0}}function Mo(e){e.refCount--,e.refCount===0&&b0(w0,function(){e.controller.abort()})}var xo=null,Fh=0,ma=0,ga=null;function R0(e,n){if(xo===null){var a=xo=[];Fh=0,ma=Kf(),ga={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Fh++,n.then(bg,bg),n}function bg(){if(--Fh===0&&xo!==null){ga!==null&&(ga.status="fulfilled");var e=xo;xo=null,ma=0,ga=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function I0(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(o.status="rejected",o.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),o}var wg=q.S;q.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&R0(e,n),wg!==null&&wg(e,n)};var Rs=K(null);function Qh(){var e=Rs.current;return e!==null?e:re.pooledCache}function Su(e,n){n===null?W(Rs,Rs.current):W(Rs,n.pool)}function Rg(){var e=Qh();return e===null?null:{parent:Me._currentValue,pool:e}}var Po=Error(s(460)),Ig=Error(s(474)),bu=Error(s(542)),Yh={then:function(){}};function Cg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wu(){}function Dg(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(wu,wu),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Og(e),e;default:if(typeof n.status=="string")n.then(wu,wu);else{if(e=re,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=o}},function(o){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Og(e),e}throw Uo=n,Po}}var Uo=null;function Ng(){if(Uo===null)throw Error(s(459));var e=Uo;return Uo=null,e}function Og(e){if(e===Po||e===bu)throw Error(s(483))}var dr=!1;function Kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function mr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function gr(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Kt&2)!==0){var c=o.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),o.pending=n,n=yu(e),yg(e,null,a),n}return pu(e,o,n,a),yu(e)}function ko(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,co(e,a)}}function $h(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?c=f=n:f=f.next=n}else c=f=n;a={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Zh=!1;function Lo(){if(Zh){var e=ga;if(e!==null)throw e}}function zo(e,n,a,o){Zh=!1;var c=e.updateQueue;dr=!1;var f=c.firstBaseUpdate,v=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=L:E.next=L,G.lastBaseUpdate=b))}if(f!==null){var Q=c.baseState;v=0,G=L=b=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(Lt&z)===z:(o&z)===z){z!==0&&z===ma&&(Zh=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var _t=e,dt=E;z=n;var te=a;switch(dt.tag){case 1:if(_t=dt.payload,typeof _t=="function"){Q=_t.call(te,Q,z);break t}Q=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=dt.payload,z=typeof _t=="function"?_t.call(te,Q,z):_t,z==null)break t;Q=A({},Q,z);break t;case 2:dr=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=c.callbacks,B===null?c.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(L=G=B,b=Q):G=G.next=B,v|=z;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;B=E,E=B.next,B.next=null,c.lastBaseUpdate=B,c.shared.pending=null}}while(!0);G===null&&(b=Q),c.baseState=b,c.firstBaseUpdate=L,c.lastBaseUpdate=G,f===null&&(c.shared.lanes=0),Sr|=v,e.lanes=v,e.memoizedState=Q}}function Vg(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Mg(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Vg(a[e],n)}var pa=K(null),Ru=K(0);function xg(e,n){e=Yi,W(Ru,e),W(pa,n),Yi=e|n.baseLanes}function Jh(){W(Ru,Yi),W(pa,pa.current)}function Wh(){Yi=Ru.current,it(pa),it(Ru)}var pr=0,Rt=null,Jt=null,be=null,Iu=!1,ya=!1,Is=!1,Cu=0,Bo=0,_a=null,C0=0;function ye(){throw Error(s(321))}function tf(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Tn(e[a],n[a]))return!1;return!0}function ef(e,n,a,o,c,f){return pr=f,Rt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,q.H=e===null||e.memoizedState===null?yp:_p,Is=!1,f=a(o,c),Is=!1,ya&&(f=Ug(n,a,o,c)),Pg(e),f}function Pg(e){q.H=xu;var n=Jt!==null&&Jt.next!==null;if(pr=0,be=Jt=Rt=null,Iu=!1,Bo=0,_a=null,n)throw Error(s(300));e===null||Be||(e=e.dependencies,e!==null&&Tu(e)&&(Be=!0))}function Ug(e,n,a,o){Rt=e;var c=0;do{if(ya&&(_a=null),Bo=0,ya=!1,25<=c)throw Error(s(301));if(c+=1,be=Jt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}q.H=P0,f=n(a,o)}while(ya);return f}function D0(){var e=q.H,n=e.useState()[0];return n=typeof n.then=="function"?jo(n):n,e=e.useState()[0],(Jt!==null?Jt.memoizedState:null)!==e&&(Rt.flags|=1024),n}function nf(){var e=Cu!==0;return Cu=0,e}function rf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function sf(e){if(Iu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Iu=!1}pr=0,be=Jt=Rt=null,ya=!1,Bo=Cu=0,_a=null}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?Rt.memoizedState=be=e:be=be.next=e,be}function we(){if(Jt===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var n=be===null?Rt.memoizedState:be.next;if(n!==null)be=n,Jt=e;else{if(e===null)throw Rt.alternate===null?Error(s(467)):Error(s(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},be===null?Rt.memoizedState=be=e:be=be.next=e}return be}function af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jo(e){var n=Bo;return Bo+=1,_a===null&&(_a=[]),e=Dg(_a,e,n),n=Rt,(be===null?n.memoizedState:be.next)===null&&(n=n.alternate,q.H=n===null||n.memoizedState===null?yp:_p),e}function Du(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return jo(e);if(e.$$typeof===ct)return tn(e)}throw Error(s(438,String(e)))}function of(e){var n=null,a=Rt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Rt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=af(),Rt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=V;return n.index++,a}function ji(e,n){return typeof n=="function"?n(e):n}function Nu(e){var n=we();return lf(n,Jt,e)}function lf(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var c=e.baseQueue,f=o.pending;if(f!==null){if(c!==null){var v=c.next;c.next=f.next,f.next=v}n.baseQueue=c=f,o.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{n=c.next;var E=v=null,b=null,L=n,G=!1;do{var Q=L.lane&-536870913;if(Q!==L.lane?(Lt&Q)===Q:(pr&Q)===Q){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),Q===ma&&(G=!0);else if((pr&z)===z){L=L.next,z===ma&&(G=!0);continue}else Q={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=Q,v=f):b=b.next=Q,Rt.lanes|=z,Sr|=z;Q=L.action,Is&&a(f,Q),f=L.hasEagerState?L.eagerState:a(f,Q)}else z={lane:Q,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=f):b=b.next=z,Rt.lanes|=Q,Sr|=Q;L=L.next}while(L!==null&&L!==n);if(b===null?v=f:b.next=E,!Tn(f,e.memoizedState)&&(Be=!0,G&&(a=ga,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return c===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function uf(e){var n=we(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,c=a.pending,f=n.memoizedState;if(c!==null){a.pending=null;var v=c=c.next;do f=e(f,v.action),v=v.next;while(v!==c);Tn(f,n.memoizedState)||(Be=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function kg(e,n,a){var o=Rt,c=we(),f=Gt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!Tn((Jt||c).memoizedState,a);v&&(c.memoizedState=a,Be=!0),c=c.queue;var E=Bg.bind(null,o,c,e);if(qo(2048,8,E,[e]),c.getSnapshot!==n||v||be!==null&&be.memoizedState.tag&1){if(o.flags|=2048,va(9,Ou(),zg.bind(null,o,c,a,n),null),re===null)throw Error(s(349));f||(pr&124)!==0||Lg(o,n,a)}return a}function Lg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Rt.updateQueue,n===null?(n=af(),Rt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function zg(e,n,a,o){n.value=a,n.getSnapshot=o,jg(n)&&qg(e)}function Bg(e,n,a){return a(function(){jg(n)&&qg(e)})}function jg(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Tn(e,a)}catch{return!0}}function qg(e){var n=ca(e,2);n!==null&&In(n,e,2)}function cf(e){var n=mn();if(typeof e=="function"){var a=e;if(e=a(),Is){vn(!0);try{a()}finally{vn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:e},n}function Hg(e,n,a,o){return e.baseState=a,lf(e,Jt,typeof o=="function"?o:ji)}function N0(e,n,a,o,c){if(Mu(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};q.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,Gg(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Gg(e,n){var a=n.action,o=n.payload,c=e.state;if(n.isTransition){var f=q.T,v={};q.T=v;try{var E=a(c,o),b=q.S;b!==null&&b(v,E),Fg(e,n,E)}catch(L){hf(e,n,L)}finally{q.T=f}}else try{f=a(c,o),Fg(e,n,f)}catch(L){hf(e,n,L)}}function Fg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Qg(e,n,o)},function(o){return hf(e,n,o)}):Qg(e,n,a)}function Qg(e,n,a){n.status="fulfilled",n.value=a,Yg(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Gg(e,a)))}function hf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Yg(n),n=n.next;while(n!==o)}e.action=null}function Yg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Kg(e,n){return n}function Xg(e,n){if(Gt){var a=re.formState;if(a!==null){t:{var o=Rt;if(Gt){if(de){e:{for(var c=de,f=li;c.nodeType!==8;){if(!f){c=null;break e}if(c=Xn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){de=Xn(c.nextSibling),o=c.data==="F!";break t}}Ss(o)}o=!1}o&&(n=a[0])}}return a=mn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kg,lastRenderedState:n},a.queue=o,a=mp.bind(null,Rt,o),o.dispatch=a,o=cf(!1),f=pf.bind(null,Rt,!1,o.queue),o=mn(),c={state:n,dispatch:null,action:e,pending:null},o.queue=c,a=N0.bind(null,Rt,c,f,a),c.dispatch=a,o.memoizedState=e,[n,a,!1]}function $g(e){var n=we();return Zg(n,Jt,e)}function Zg(e,n,a){if(n=lf(e,n,Kg)[0],e=Nu(ji)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=jo(n)}catch(v){throw v===Po?bu:v}else o=n;n=we();var c=n.queue,f=c.dispatch;return a!==n.memoizedState&&(Rt.flags|=2048,va(9,Ou(),O0.bind(null,c,a),null)),[o,f,e]}function O0(e,n){e.action=n}function Jg(e){var n=we(),a=Jt;if(a!==null)return Zg(n,a,e);we(),n=n.memoizedState,a=we();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function va(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Rt.updateQueue,n===null&&(n=af(),Rt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Ou(){return{destroy:void 0,resource:void 0}}function Wg(){return we().memoizedState}function Vu(e,n,a,o){var c=mn();o=o===void 0?null:o,Rt.flags|=e,c.memoizedState=va(1|n,Ou(),a,o)}function qo(e,n,a,o){var c=we();o=o===void 0?null:o;var f=c.memoizedState.inst;Jt!==null&&o!==null&&tf(o,Jt.memoizedState.deps)?c.memoizedState=va(n,f,a,o):(Rt.flags|=e,c.memoizedState=va(1|n,f,a,o))}function tp(e,n){Vu(8390656,8,e,n)}function ep(e,n){qo(2048,8,e,n)}function np(e,n){return qo(4,2,e,n)}function ip(e,n){return qo(4,4,e,n)}function rp(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function sp(e,n,a){a=a!=null?a.concat([e]):null,qo(4,4,rp.bind(null,n,e),a)}function ff(){}function ap(e,n){var a=we();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&tf(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function op(e,n){var a=we();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&tf(n,o[1]))return o[0];if(o=e(),Is){vn(!0);try{e()}finally{vn(!1)}}return a.memoizedState=[o,n],o}function df(e,n,a){return a===void 0||(pr&1073741824)!==0?e.memoizedState=n:(e.memoizedState=a,e=cy(),Rt.lanes|=e,Sr|=e,a)}function lp(e,n,a,o){return Tn(a,n)?a:pa.current!==null?(e=df(e,a,o),Tn(e,n)||(Be=!0),e):(pr&42)===0?(Be=!0,e.memoizedState=a):(e=cy(),Rt.lanes|=e,Sr|=e,n)}function up(e,n,a,o,c){var f=nt.p;nt.p=f!==0&&8>f?f:8;var v=q.T,E={};q.T=E,pf(e,!1,n,a);try{var b=c(),L=q.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=I0(b,o);Ho(e,n,G,Rn(e))}else Ho(e,n,o,Rn(e))}catch(Q){Ho(e,n,{then:function(){},status:"rejected",reason:Q},Rn())}finally{nt.p=f,q.T=v}}function V0(){}function mf(e,n,a,o){if(e.tag!==5)throw Error(s(476));var c=cp(e).queue;up(e,c,n,ot,a===null?V0:function(){return hp(e),a(o)})}function cp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:ot},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function hp(e){var n=cp(e).next.queue;Ho(e,n,{},Rn())}function gf(){return tn(ol)}function fp(){return we().memoizedState}function dp(){return we().memoizedState}function M0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Rn();e=mr(a);var o=gr(n,e,a);o!==null&&(In(o,n,a),ko(o,n,a)),n={cache:Gh()},e.payload=n;return}n=n.return}}function x0(e,n,a){var o=Rn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Mu(e)?gp(n,a):(a=xh(e,n,a,o),a!==null&&(In(a,e,o),pp(a,n,o)))}function mp(e,n,a){var o=Rn();Ho(e,n,a,o)}function Ho(e,n,a,o){var c={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mu(e))gp(n,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var v=n.lastRenderedState,E=f(v,a);if(c.hasEagerState=!0,c.eagerState=E,Tn(E,v))return pu(e,n,c,0),re===null&&gu(),!1}catch{}finally{}if(a=xh(e,n,c,o),a!==null)return In(a,e,o),pp(a,n,o),!0}return!1}function pf(e,n,a,o){if(o={lane:2,revertLane:Kf(),action:o,hasEagerState:!1,eagerState:null,next:null},Mu(e)){if(n)throw Error(s(479))}else n=xh(e,a,o,2),n!==null&&In(n,e,2)}function Mu(e){var n=e.alternate;return e===Rt||n!==null&&n===Rt}function gp(e,n){ya=Iu=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function pp(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,co(e,a)}}var xu={readContext:tn,use:Du,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},yp={readContext:tn,use:Du,useCallback:function(e,n){return mn().memoizedState=[e,n===void 0?null:n],e},useContext:tn,useEffect:tp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Vu(4194308,4,rp.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Vu(4194308,4,e,n)},useInsertionEffect:function(e,n){Vu(4,2,e,n)},useMemo:function(e,n){var a=mn();n=n===void 0?null:n;var o=e();if(Is){vn(!0);try{e()}finally{vn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=mn();if(a!==void 0){var c=a(n);if(Is){vn(!0);try{a(n)}finally{vn(!1)}}}else c=n;return o.memoizedState=o.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},o.queue=e,e=e.dispatch=x0.bind(null,Rt,e),[o.memoizedState,e]},useRef:function(e){var n=mn();return e={current:e},n.memoizedState=e},useState:function(e){e=cf(e);var n=e.queue,a=mp.bind(null,Rt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:ff,useDeferredValue:function(e,n){var a=mn();return df(a,e,n)},useTransition:function(){var e=cf(!1);return e=up.bind(null,Rt,e.queue,!0,!1),mn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Rt,c=mn();if(Gt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),re===null)throw Error(s(349));(Lt&124)!==0||Lg(o,n,a)}c.memoizedState=a;var f={value:a,getSnapshot:n};return c.queue=f,tp(Bg.bind(null,o,f,e),[e]),o.flags|=2048,va(9,Ou(),zg.bind(null,o,f,a,n),null),a},useId:function(){var e=mn(),n=re.identifierPrefix;if(Gt){var a=Li,o=ki;a=(o&~(1<<32-We(o)-1)).toString(32)+a,n=""+n+"R"+a,a=Cu++,0<a&&(n+="H"+a.toString(32)),n+=""}else a=C0++,n=""+n+"r"+a.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:gf,useFormState:Xg,useActionState:Xg,useOptimistic:function(e){var n=mn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=pf.bind(null,Rt,!0,a),a.dispatch=n,[e,n]},useMemoCache:of,useCacheRefresh:function(){return mn().memoizedState=M0.bind(null,Rt)}},_p={readContext:tn,use:Du,useCallback:ap,useContext:tn,useEffect:ep,useImperativeHandle:sp,useInsertionEffect:np,useLayoutEffect:ip,useMemo:op,useReducer:Nu,useRef:Wg,useState:function(){return Nu(ji)},useDebugValue:ff,useDeferredValue:function(e,n){var a=we();return lp(a,Jt.memoizedState,e,n)},useTransition:function(){var e=Nu(ji)[0],n=we().memoizedState;return[typeof e=="boolean"?e:jo(e),n]},useSyncExternalStore:kg,useId:fp,useHostTransitionStatus:gf,useFormState:$g,useActionState:$g,useOptimistic:function(e,n){var a=we();return Hg(a,Jt,e,n)},useMemoCache:of,useCacheRefresh:dp},P0={readContext:tn,use:Du,useCallback:ap,useContext:tn,useEffect:ep,useImperativeHandle:sp,useInsertionEffect:np,useLayoutEffect:ip,useMemo:op,useReducer:uf,useRef:Wg,useState:function(){return uf(ji)},useDebugValue:ff,useDeferredValue:function(e,n){var a=we();return Jt===null?df(a,e,n):lp(a,Jt.memoizedState,e,n)},useTransition:function(){var e=uf(ji)[0],n=we().memoizedState;return[typeof e=="boolean"?e:jo(e),n]},useSyncExternalStore:kg,useId:fp,useHostTransitionStatus:gf,useFormState:Jg,useActionState:Jg,useOptimistic:function(e,n){var a=we();return Jt!==null?Hg(a,Jt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:of,useCacheRefresh:dp},Ea=null,Go=0;function Pu(e){var n=Go;return Go+=1,Ea===null&&(Ea=[]),Dg(Ea,e,n)}function Fo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Uu(e,n){throw n.$$typeof===D?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function vp(e){var n=e._init;return n(e._payload)}function Ep(e){function n(P,N){if(e){var k=P.deletions;k===null?(P.deletions=[N],P.flags|=16):k.push(N)}}function a(P,N){if(!e)return null;for(;N!==null;)n(P,N),N=N.sibling;return null}function o(P){for(var N=new Map;P!==null;)P.key!==null?N.set(P.key,P):N.set(P.index,P),P=P.sibling;return N}function c(P,N){return P=Ui(P,N),P.index=0,P.sibling=null,P}function f(P,N,k){return P.index=k,e?(k=P.alternate,k!==null?(k=k.index,k<N?(P.flags|=67108866,N):k):(P.flags|=67108866,N)):(P.flags|=1048576,N)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function E(P,N,k,F){return N===null||N.tag!==6?(N=Uh(k,P.mode,F),N.return=P,N):(N=c(N,k),N.return=P,N)}function b(P,N,k,F){var at=k.type;return at===$?G(P,N,k.props.children,F,k.key):N!==null&&(N.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&vp(at)===N.type)?(N=c(N,k.props),Fo(N,k),N.return=P,N):(N=_u(k.type,k.key,k.props,null,P.mode,F),Fo(N,k),N.return=P,N)}function L(P,N,k,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=kh(k,P.mode,F),N.return=P,N):(N=c(N,k.children||[]),N.return=P,N)}function G(P,N,k,F,at){return N===null||N.tag!==7?(N=vs(k,P.mode,F,at),N.return=P,N):(N=c(N,k),N.return=P,N)}function Q(P,N,k){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Uh(""+N,P.mode,k),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case C:return k=_u(N.type,N.key,N.props,null,P.mode,k),Fo(k,N),k.return=P,k;case H:return N=kh(N,P.mode,k),N.return=P,N;case S:var F=N._init;return N=F(N._payload),Q(P,N,k)}if(ee(N)||x(N))return N=vs(N,P.mode,k,null),N.return=P,N;if(typeof N.then=="function")return Q(P,Pu(N),k);if(N.$$typeof===ct)return Q(P,Au(P,N),k);Uu(P,N)}return null}function z(P,N,k,F){var at=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return at!==null?null:E(P,N,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case C:return k.key===at?b(P,N,k,F):null;case H:return k.key===at?L(P,N,k,F):null;case S:return at=k._init,k=at(k._payload),z(P,N,k,F)}if(ee(k)||x(k))return at!==null?null:G(P,N,k,F,null);if(typeof k.then=="function")return z(P,N,Pu(k),F);if(k.$$typeof===ct)return z(P,N,Au(P,k),F);Uu(P,k)}return null}function B(P,N,k,F,at){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return P=P.get(k)||null,E(N,P,""+F,at);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case C:return P=P.get(F.key===null?k:F.key)||null,b(N,P,F,at);case H:return P=P.get(F.key===null?k:F.key)||null,L(N,P,F,at);case S:var Ct=F._init;return F=Ct(F._payload),B(P,N,k,F,at)}if(ee(F)||x(F))return P=P.get(k)||null,G(N,P,F,at,null);if(typeof F.then=="function")return B(P,N,k,Pu(F),at);if(F.$$typeof===ct)return B(P,N,k,Au(N,F),at);Uu(N,F)}return null}function _t(P,N,k,F){for(var at=null,Ct=null,ut=N,mt=N=0,qe=null;ut!==null&&mt<k.length;mt++){ut.index>mt?(qe=ut,ut=null):qe=ut.sibling;var qt=z(P,ut,k[mt],F);if(qt===null){ut===null&&(ut=qe);break}e&&ut&&qt.alternate===null&&n(P,ut),N=f(qt,N,mt),Ct===null?at=qt:Ct.sibling=qt,Ct=qt,ut=qe}if(mt===k.length)return a(P,ut),Gt&&Ts(P,mt),at;if(ut===null){for(;mt<k.length;mt++)ut=Q(P,k[mt],F),ut!==null&&(N=f(ut,N,mt),Ct===null?at=ut:Ct.sibling=ut,Ct=ut);return Gt&&Ts(P,mt),at}for(ut=o(ut);mt<k.length;mt++)qe=B(ut,P,mt,k[mt],F),qe!==null&&(e&&qe.alternate!==null&&ut.delete(qe.key===null?mt:qe.key),N=f(qe,N,mt),Ct===null?at=qe:Ct.sibling=qe,Ct=qe);return e&&ut.forEach(function(Vr){return n(P,Vr)}),Gt&&Ts(P,mt),at}function dt(P,N,k,F){if(k==null)throw Error(s(151));for(var at=null,Ct=null,ut=N,mt=N=0,qe=null,qt=k.next();ut!==null&&!qt.done;mt++,qt=k.next()){ut.index>mt?(qe=ut,ut=null):qe=ut.sibling;var Vr=z(P,ut,qt.value,F);if(Vr===null){ut===null&&(ut=qe);break}e&&ut&&Vr.alternate===null&&n(P,ut),N=f(Vr,N,mt),Ct===null?at=Vr:Ct.sibling=Vr,Ct=Vr,ut=qe}if(qt.done)return a(P,ut),Gt&&Ts(P,mt),at;if(ut===null){for(;!qt.done;mt++,qt=k.next())qt=Q(P,qt.value,F),qt!==null&&(N=f(qt,N,mt),Ct===null?at=qt:Ct.sibling=qt,Ct=qt);return Gt&&Ts(P,mt),at}for(ut=o(ut);!qt.done;mt++,qt=k.next())qt=B(ut,P,mt,qt.value,F),qt!==null&&(e&&qt.alternate!==null&&ut.delete(qt.key===null?mt:qt.key),N=f(qt,N,mt),Ct===null?at=qt:Ct.sibling=qt,Ct=qt);return e&&ut.forEach(function(UA){return n(P,UA)}),Gt&&Ts(P,mt),at}function te(P,N,k,F){if(typeof k=="object"&&k!==null&&k.type===$&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case C:t:{for(var at=k.key;N!==null;){if(N.key===at){if(at=k.type,at===$){if(N.tag===7){a(P,N.sibling),F=c(N,k.props.children),F.return=P,P=F;break t}}else if(N.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&vp(at)===N.type){a(P,N.sibling),F=c(N,k.props),Fo(F,k),F.return=P,P=F;break t}a(P,N);break}else n(P,N);N=N.sibling}k.type===$?(F=vs(k.props.children,P.mode,F,k.key),F.return=P,P=F):(F=_u(k.type,k.key,k.props,null,P.mode,F),Fo(F,k),F.return=P,P=F)}return v(P);case H:t:{for(at=k.key;N!==null;){if(N.key===at)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){a(P,N.sibling),F=c(N,k.children||[]),F.return=P,P=F;break t}else{a(P,N);break}else n(P,N);N=N.sibling}F=kh(k,P.mode,F),F.return=P,P=F}return v(P);case S:return at=k._init,k=at(k._payload),te(P,N,k,F)}if(ee(k))return _t(P,N,k,F);if(x(k)){if(at=x(k),typeof at!="function")throw Error(s(150));return k=at.call(k),dt(P,N,k,F)}if(typeof k.then=="function")return te(P,N,Pu(k),F);if(k.$$typeof===ct)return te(P,N,Au(P,k),F);Uu(P,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,N!==null&&N.tag===6?(a(P,N.sibling),F=c(N,k),F.return=P,P=F):(a(P,N),F=Uh(k,P.mode,F),F.return=P,P=F),v(P)):a(P,N)}return function(P,N,k,F){try{Go=0;var at=te(P,N,k,F);return Ea=null,at}catch(ut){if(ut===Po||ut===bu)throw ut;var Ct=An(29,ut,null,P.mode);return Ct.lanes=F,Ct.return=P,Ct}finally{}}}var Ta=Ep(!0),Tp=Ep(!1),Ln=K(null),ui=null;function yr(e){var n=e.alternate;W(xe,xe.current&1),W(Ln,e),ui===null&&(n===null||pa.current!==null||n.memoizedState!==null)&&(ui=e)}function Ap(e){if(e.tag===22){if(W(xe,xe.current),W(Ln,e),ui===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(ui=e)}}else _r()}function _r(){W(xe,xe.current),W(Ln,Ln.current)}function qi(e){it(Ln),ui===e&&(ui=null),it(xe)}var xe=K(0);function ku(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ad(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function yf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:A({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var _f={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Rn(),c=mr(o);c.payload=n,a!=null&&(c.callback=a),n=gr(e,c,o),n!==null&&(In(n,e,o),ko(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Rn(),c=mr(o);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=gr(e,c,o),n!==null&&(In(n,e,o),ko(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Rn(),o=mr(a);o.tag=2,n!=null&&(o.callback=n),n=gr(e,o,a),n!==null&&(In(n,e,a),ko(n,e,a))}};function Sp(e,n,a,o,c,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):n.prototype&&n.prototype.isPureReactComponent?!Io(a,o)||!Io(c,f):!0}function bp(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&_f.enqueueReplaceState(n,n.state,null)}function Cs(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=A({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var Lu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function wp(e){Lu(e)}function Rp(e){console.error(e)}function Ip(e){Lu(e)}function zu(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Cp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function vf(e,n,a){return a=mr(a),a.tag=3,a.payload={element:null},a.callback=function(){zu(e,n)},a}function Dp(e){return e=mr(e),e.tag=3,e}function Np(e,n,a,o){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=o.value;e.payload=function(){return c(f)},e.callback=function(){Cp(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Cp(n,a,o),typeof c!="function"&&(br===null?br=new Set([this]):br.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function U0(e,n,a,o,c){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Vo(n,a,c,!0),a=Ln.current,a!==null){switch(a.tag){case 13:return ui===null?Hf():a.alternate===null&&me===0&&(me=3),a.flags&=-257,a.flags|=65536,a.lanes=c,o===Yh?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Ff(e,o,c)),!1;case 22:return a.flags|=65536,o===Yh?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Ff(e,o,c)),!1}throw Error(s(435,a.tag))}return Ff(e,o,c),Hf(),!1}if(Gt)return n=Ln.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,o!==Bh&&(e=Error(s(422),{cause:o}),Oo(xn(e,a)))):(o!==Bh&&(n=Error(s(423),{cause:o}),Oo(xn(n,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,o=xn(o,a),c=vf(e.stateNode,o,c),$h(e,c),me!==4&&(me=2)),!1;var f=Error(s(520),{cause:o});if(f=xn(f,a),Jo===null?Jo=[f]:Jo.push(f),me!==4&&(me=2),n===null)return!0;o=xn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=vf(a.stateNode,o,e),$h(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(br===null||!br.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Dp(c),Np(c,e,a,o),$h(a,c),!1}a=a.return}while(a!==null);return!1}var Op=Error(s(461)),Be=!1;function Ye(e,n,a,o){n.child=e===null?Tp(n,null,a,o):Ta(n,e.child,a,o)}function Vp(e,n,a,o,c){a=a.render;var f=n.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return ws(n),o=ef(e,n,a,v,f,c),E=nf(),e!==null&&!Be?(rf(e,n,c),Hi(e,n,c)):(Gt&&E&&Lh(n),n.flags|=1,Ye(e,n,o,c),n.child)}function Mp(e,n,a,o,c){if(e===null){var f=a.type;return typeof f=="function"&&!Ph(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,xp(e,n,f,o,c)):(e=_u(a.type,null,o,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!If(e,c)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Io,a(v,o)&&e.ref===n.ref)return Hi(e,n,c)}return n.flags|=1,e=Ui(f,o),e.ref=n.ref,e.return=n,n.child=e}function xp(e,n,a,o,c){if(e!==null){var f=e.memoizedProps;if(Io(f,o)&&e.ref===n.ref)if(Be=!1,n.pendingProps=o=f,If(e,c))(e.flags&131072)!==0&&(Be=!0);else return n.lanes=e.lanes,Hi(e,n,c)}return Ef(e,n,a,o,c)}function Pp(e,n,a){var o=n.pendingProps,c=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(c=n.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return Up(e,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Su(n,f!==null?f.cachePool:null),f!==null?xg(n,f):Jh(),Ap(n);else return n.lanes=n.childLanes=536870912,Up(e,n,f!==null?f.baseLanes|a:a,a)}else f!==null?(Su(n,f.cachePool),xg(n,f),_r(),n.memoizedState=null):(e!==null&&Su(n,null),Jh(),_r());return Ye(e,n,c,a),n.child}function Up(e,n,a,o){var c=Qh();return c=c===null?null:{parent:Me._currentValue,pool:c},n.memoizedState={baseLanes:a,cachePool:c},e!==null&&Su(n,null),Jh(),Ap(n),e!==null&&Vo(e,n,o,!0),null}function Bu(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Ef(e,n,a,o,c){return ws(n),a=ef(e,n,a,o,void 0,c),o=nf(),e!==null&&!Be?(rf(e,n,c),Hi(e,n,c)):(Gt&&o&&Lh(n),n.flags|=1,Ye(e,n,a,c),n.child)}function kp(e,n,a,o,c,f){return ws(n),n.updateQueue=null,a=Ug(n,o,a,c),Pg(e),o=nf(),e!==null&&!Be?(rf(e,n,f),Hi(e,n,f)):(Gt&&o&&Lh(n),n.flags|=1,Ye(e,n,a,f),n.child)}function Lp(e,n,a,o,c){if(ws(n),n.stateNode===null){var f=ha,v=a.contextType;typeof v=="object"&&v!==null&&(f=tn(v)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=_f,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Kh(n),v=a.contextType,f.context=typeof v=="object"&&v!==null?tn(v):ha,f.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(yf(n,a,v,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&_f.enqueueReplaceState(f,f.state,null),zo(n,o,f,c),Lo(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,b=Cs(a,E);f.props=b;var L=f.context,G=a.contextType;v=ha,typeof G=="object"&&G!==null&&(v=tn(G));var Q=a.getDerivedStateFromProps;G=typeof Q=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&bp(n,f,o,v),dr=!1;var z=n.memoizedState;f.state=z,zo(n,o,f,c),Lo(),L=n.memoizedState,E||z!==L||dr?(typeof Q=="function"&&(yf(n,a,Q,o),L=n.memoizedState),(b=dr||Sp(n,a,b,o,z,L,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,Xh(e,n),v=n.memoizedProps,G=Cs(a,v),f.props=G,Q=n.pendingProps,z=f.context,L=a.contextType,b=ha,typeof L=="object"&&L!==null&&(b=tn(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Q||z!==b)&&bp(n,f,o,b),dr=!1,z=n.memoizedState,f.state=z,zo(n,o,f,c),Lo();var B=n.memoizedState;v!==Q||z!==B||dr||e!==null&&e.dependencies!==null&&Tu(e.dependencies)?(typeof E=="function"&&(yf(n,a,E,o),B=n.memoizedState),(G=dr||Sp(n,a,G,o,z,B,b)||e!==null&&e.dependencies!==null&&Tu(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,b)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=B),f.props=o,f.state=B,f.context=b,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Bu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=Ta(n,e.child,null,c),n.child=Ta(n,null,a,c)):Ye(e,n,a,c),n.memoizedState=f.state,e=n.child):e=Hi(e,n,c),e}function zp(e,n,a,o){return No(),n.flags|=256,Ye(e,n,a,o),n.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Af(e){return{baseLanes:e,cachePool:Rg()}}function Sf(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=zn),e}function Bp(e,n,a){var o=n.pendingProps,c=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(xe.current&2)!==0),v&&(c=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Gt){if(c?yr(n):_r(),Gt){var E=de,b;if(b=E){t:{for(b=E,E=li;b.nodeType!==8;){if(!E){E=null;break t}if(b=Xn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(n.memoizedState={dehydrated:E,treeContext:Es!==null?{id:ki,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},b=An(18,null,null,0),b.stateNode=E,b.return=n,n.child=b,fn=n,de=null,b=!0):b=!1}b||Ss(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return ad(E)?n.lanes=32:n.lanes=536870912,null;qi(n)}return E=o.children,o=o.fallback,c?(_r(),c=n.mode,E=ju({mode:"hidden",children:E},c),o=vs(o,c,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,c=n.child,c.memoizedState=Af(a),c.childLanes=Sf(e,v,a),n.memoizedState=Tf,o):(yr(n),bf(n,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)n.flags&256?(yr(n),n.flags&=-257,n=wf(e,n,a)):n.memoizedState!==null?(_r(),n.child=e.child,n.flags|=128,n=null):(_r(),c=o.fallback,E=n.mode,o=ju({mode:"visible",children:o.children},E),c=vs(c,E,a,null),c.flags|=2,o.return=n,c.return=n,o.sibling=c,n.child=o,Ta(n,e.child,null,a),o=n.child,o.memoizedState=Af(a),o.childLanes=Sf(e,v,a),n.memoizedState=Tf,n=c);else if(yr(n),ad(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Oo({value:o,source:null,stack:null}),n=wf(e,n,a)}else if(Be||Vo(e,n,a,!1),v=(a&e.childLanes)!==0,Be||v){if(v=re,v!==null&&(o=a&-a,o=(o&42)!==0?1:sr(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,ca(e,o),In(v,e,o),Op;E.data==="$?"||Hf(),n=wf(e,n,a)}else E.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=b.treeContext,de=Xn(E.nextSibling),fn=n,Gt=!0,As=null,li=!1,e!==null&&(Un[kn++]=ki,Un[kn++]=Li,Un[kn++]=Es,ki=e.id,Li=e.overflow,Es=n),n=bf(n,o.children),n.flags|=4096);return n}return c?(_r(),c=o.fallback,E=n.mode,b=e.child,L=b.sibling,o=Ui(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?c=Ui(L,c):(c=vs(c,E,a,null),c.flags|=2),c.return=n,o.return=n,o.sibling=c,n.child=o,o=c,c=n.child,E=e.child.memoizedState,E===null?E=Af(a):(b=E.cachePool,b!==null?(L=Me._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Rg(),E={baseLanes:E.baseLanes|a,cachePool:b}),c.memoizedState=E,c.childLanes=Sf(e,v,a),n.memoizedState=Tf,o):(yr(n),a=e.child,e=a.sibling,a=Ui(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function bf(e,n){return n=ju({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function ju(e,n){return e=An(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function wf(e,n,a){return Ta(n,e.child,null,a),e=bf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function jp(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),qh(e.return,n,a)}function Rf(e,n,a,o,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=c)}function qp(e,n,a){var o=n.pendingProps,c=o.revealOrder,f=o.tail;if(Ye(e,n,o.children,a),o=xe.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jp(e,a,n);else if(e.tag===19)jp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(W(xe,o),c){case"forwards":for(a=n.child,c=null;a!==null;)e=a.alternate,e!==null&&ku(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),Rf(n,!1,c,a,f);break;case"backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&ku(e)===null){n.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Rf(n,!0,a,null,f);break;case"together":Rf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Hi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Sr|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Vo(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Ui(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Ui(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function If(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Tu(e)))}function k0(e,n,a){switch(n.tag){case 3:et(n,n.stateNode.containerInfo),fr(n,Me,e.memoizedState.cache),No();break;case 27:case 5:Ot(n);break;case 4:et(n,n.stateNode.containerInfo);break;case 10:fr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(yr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Bp(e,n,a):(yr(n),e=Hi(e,n,a),e!==null?e.sibling:null);yr(n);break;case 19:var c=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Vo(e,n,a,!1),o=(a&n.childLanes)!==0),c){if(o)return qp(e,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),W(xe,xe.current),o)break;return null;case 22:case 23:return n.lanes=0,Pp(e,n,a);case 24:fr(n,Me,e.memoizedState.cache)}return Hi(e,n,a)}function Hp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Be=!0;else{if(!If(e,a)&&(n.flags&128)===0)return Be=!1,k0(e,n,a);Be=(e.flags&131072)!==0}else Be=!1,Gt&&(n.flags&1048576)!==0&&vg(n,Eu,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,c=o._init;if(o=c(o._payload),n.type=o,typeof o=="function")Ph(o)?(e=Cs(o,e),n.tag=1,n=Lp(null,n,o,e,a)):(n.tag=0,n=Ef(null,n,o,e,a));else{if(o!=null){if(c=o.$$typeof,c===Ht){n.tag=11,n=Vp(null,n,o,e,a);break t}else if(c===O){n.tag=14,n=Mp(null,n,o,e,a);break t}}throw n=De(o)||o,Error(s(306,n,""))}}return n;case 0:return Ef(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,c=Cs(o,n.pendingProps),Lp(e,n,o,c,a);case 3:t:{if(et(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;c=f.element,Xh(e,n),zo(n,o,null,a);var v=n.memoizedState;if(o=v.cache,fr(n,Me,o),o!==f.cache&&Hh(n,[Me],a,!0),Lo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=zp(e,n,o,a);break t}else if(o!==c){c=xn(Error(s(424)),n),Oo(c),n=zp(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(de=Xn(e.firstChild),fn=n,Gt=!0,As=null,li=!0,a=Tp(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(No(),o===c){n=Hi(e,n,a);break t}Ye(e,n,o,a)}n=n.child}return n;case 26:return Bu(e,n),e===null?(a=Yy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Gt||(a=n.type,e=n.pendingProps,o=ec(pt.current).createElement(a),o[Ne]=n,o[Ae]=e,Xe(o,a,e),pe(o),n.stateNode=o):n.memoizedState=Yy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ot(n),e===null&&Gt&&(o=n.stateNode=Gy(n.type,n.pendingProps,pt.current),fn=n,li=!0,c=de,Ir(n.type)?(od=c,de=Xn(o.firstChild)):de=c),Ye(e,n,n.pendingProps.children,a),Bu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Gt&&((c=o=de)&&(o=hA(o,n.type,n.pendingProps,li),o!==null?(n.stateNode=o,fn=n,de=Xn(o.firstChild),li=!1,c=!0):c=!1),c||Ss(n)),Ot(n),c=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,id(c,f)?o=null:v!==null&&id(c,v)&&(n.flags|=32),n.memoizedState!==null&&(c=ef(e,n,D0,null,null,a),ol._currentValue=c),Bu(e,n),Ye(e,n,o,a),n.child;case 6:return e===null&&Gt&&((e=a=de)&&(a=fA(a,n.pendingProps,li),a!==null?(n.stateNode=a,fn=n,de=null,e=!0):e=!1),e||Ss(n)),null;case 13:return Bp(e,n,a);case 4:return et(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Ta(n,null,o,a):Ye(e,n,o,a),n.child;case 11:return Vp(e,n,n.type,n.pendingProps,a);case 7:return Ye(e,n,n.pendingProps,a),n.child;case 8:return Ye(e,n,n.pendingProps.children,a),n.child;case 12:return Ye(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,fr(n,n.type,o.value),Ye(e,n,o.children,a),n.child;case 9:return c=n.type._context,o=n.pendingProps.children,ws(n),c=tn(c),o=o(c),n.flags|=1,Ye(e,n,o,a),n.child;case 14:return Mp(e,n,n.type,n.pendingProps,a);case 15:return xp(e,n,n.type,n.pendingProps,a);case 19:return qp(e,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},e===null?(a=ju(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Ui(e.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return Pp(e,n,a);case 24:return ws(n),o=tn(Me),e===null?(c=Qh(),c===null&&(c=re,f=Gh(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),n.memoizedState={parent:o,cache:c},Kh(n),fr(n,Me,c)):((e.lanes&a)!==0&&(Xh(e,n),zo(n,null,null,a),Lo()),c=e.memoizedState,f=n.memoizedState,c.parent!==o?(c={parent:o,cache:o},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),fr(n,Me,o)):(o=f.cache,fr(n,Me,o),o!==c.cache&&Hh(n,[Me],a,!0))),Ye(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Gi(e){e.flags|=4}function Gp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jy(n)){if(n=Ln.current,n!==null&&((Lt&4194048)===Lt?ui!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||n!==ui))throw Uo=Yh,Ig;e.flags|=8192}}function qu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?lo():536870912,e.lanes|=n,wa|=n)}function Qo(e,n){if(!Gt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ue(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function L0(e,n,a){var o=n.pendingProps;switch(zh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(n),null;case 1:return ue(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Bi(Me),It(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Do(n)?Gi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ag())),ue(n),null;case 26:return a=n.memoizedState,e===null?(Gi(n),a!==null?(ue(n),Gp(n,a)):(ue(n),n.flags&=-16777217)):a?a!==e.memoizedState?(Gi(n),ue(n),Gp(n,a)):(ue(n),n.flags&=-16777217):(e.memoizedProps!==o&&Gi(n),ue(n),n.flags&=-16777217),null;case 27:$t(n),a=pt.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Gi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return ue(n),null}e=ht.current,Do(n)?Eg(n):(e=Gy(c,o,a),n.stateNode=e,Gi(n))}return ue(n),null;case 5:if($t(n),a=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Gi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return ue(n),null}if(e=ht.current,Do(n))Eg(n);else{switch(c=ec(pt.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?c.createElement("select",{is:o.is}):c.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?c.createElement(a,{is:o.is}):c.createElement(a)}}e[Ne]=n,e[Ae]=o;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;t:switch(Xe(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Gi(n)}}return ue(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Gi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=pt.current,Do(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,c=fn,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}e[Ne]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||ky(e.nodeValue,a)),e||Ss(n)}else e=ec(e).createTextNode(o),e[Ne]=n,n.stateNode=e}return ue(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Do(n),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[Ne]=n}else No(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ue(n),c=!1}else c=Ag(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(qi(n),n):(qi(n),null)}if(qi(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=n.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048)}return a!==e&&a&&(n.child.flags|=8192),qu(n,n.updateQueue),ue(n),null;case 4:return It(),e===null&&Jf(n.stateNode.containerInfo),ue(n),null;case 10:return Bi(n.type),ue(n),null;case 19:if(it(xe),c=n.memoizedState,c===null)return ue(n),null;if(o=(n.flags&128)!==0,f=c.rendering,f===null)if(o)Qo(c,!1);else{if(me!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=ku(e),f!==null){for(n.flags|=128,Qo(c,!1),e=f.updateQueue,n.updateQueue=e,qu(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)_g(a,e),a=a.sibling;return W(xe,xe.current&1|2),n.child}e=e.sibling}c.tail!==null&&jt()>Fu&&(n.flags|=128,o=!0,Qo(c,!1),n.lanes=4194304)}else{if(!o)if(e=ku(f),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,qu(n,e),Qo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Gt)return ue(n),null}else 2*jt()-c.renderingStartTime>Fu&&a!==536870912&&(n.flags|=128,o=!0,Qo(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(e=c.last,e!==null?e.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=jt(),n.sibling=null,e=xe.current,W(xe,o?e&1|2:e&1),n):(ue(n),null);case 22:case 23:return qi(n),Wh(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(ue(n),n.subtreeFlags&6&&(n.flags|=8192)):ue(n),a=n.updateQueue,a!==null&&qu(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&it(Rs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Bi(Me),ue(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function z0(e,n){switch(zh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Bi(Me),It(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return $t(n),null;case 13:if(qi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));No()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return it(xe),null;case 4:return It(),null;case 10:return Bi(n.type),null;case 22:case 23:return qi(n),Wh(),e!==null&&it(Rs),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Bi(Me),null;case 25:return null;default:return null}}function Fp(e,n){switch(zh(n),n.tag){case 3:Bi(Me),It();break;case 26:case 27:case 5:$t(n);break;case 4:It();break;case 13:qi(n);break;case 19:it(xe);break;case 10:Bi(n.type);break;case 22:case 23:qi(n),Wh(),e!==null&&it(Rs);break;case 24:Bi(Me)}}function Yo(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var c=o.next;a=c;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==c)}}catch(E){ne(n,n.return,E)}}function vr(e,n,a){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,c=n;var b=a,L=E;try{L()}catch(G){ne(c,b,G)}}}o=o.next}while(o!==f)}}catch(G){ne(n,n.return,G)}}function Qp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Mg(n,a)}catch(o){ne(e,e.return,o)}}}function Yp(e,n,a){a.props=Cs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ne(e,n,o)}}function Ko(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(c){ne(e,n,c)}}function ci(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(c){ne(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){ne(e,n,c)}else a.current=null}function Kp(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(c){ne(e,e.return,c)}}function Cf(e,n,a){try{var o=e.stateNode;aA(o,e.type,a,n),o[Ae]=n}catch(c){ne(e,e.return,c)}}function Xp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ir(e.type)||e.tag===4}function Df(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Xp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ir(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nf(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=tc));else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Nf(e,n,a),e=e.sibling;e!==null;)Nf(e,n,a),e=e.sibling}function Hu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Hu(e,n,a),e=e.sibling;e!==null;)Hu(e,n,a),e=e.sibling}function $p(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Xe(n,o,a),n[Ne]=e,n[Ae]=a}catch(f){ne(e,e.return,f)}}var Fi=!1,_e=!1,Of=!1,Zp=typeof WeakSet=="function"?WeakSet:Set,je=null;function B0(e,n){if(e=e.containerInfo,ed=oc,e=lg(e),Ch(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var c=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,G=0,Q=e,z=null;e:for(;;){for(var B;Q!==a||c!==0&&Q.nodeType!==3||(E=v+c),Q!==f||o!==0&&Q.nodeType!==3||(b=v+o),Q.nodeType===3&&(v+=Q.nodeValue.length),(B=Q.firstChild)!==null;)z=Q,Q=B;for(;;){if(Q===e)break e;if(z===a&&++L===c&&(E=v),z===f&&++G===o&&(b=v),(B=Q.nextSibling)!==null)break;Q=z,z=Q.parentNode}Q=B}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(nd={focusedElem:e,selectionRange:a},oc=!1,je=n;je!==null;)if(n=je,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,je=e;else for(;je!==null;){switch(n=je,f=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,c=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var _t=Cs(a.type,c,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(_t,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(dt){ne(a,a.return,dt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)sd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,je=e;break}je=n.return}}function Jp(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Er(e,a),o&4&&Yo(5,a);break;case 1:if(Er(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){ne(a,a.return,v)}else{var c=Cs(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ne(a,a.return,v)}}o&64&&Qp(a),o&512&&Ko(a,a.return);break;case 3:if(Er(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Mg(e,n)}catch(v){ne(a,a.return,v)}}break;case 27:n===null&&o&4&&$p(a);case 26:case 5:Er(e,a),n===null&&o&4&&Kp(a),o&512&&Ko(a,a.return);break;case 12:Er(e,a);break;case 13:Er(e,a),o&4&&ey(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=X0.bind(null,a),dA(e,a))));break;case 22:if(o=a.memoizedState!==null||Fi,!o){n=n!==null&&n.memoizedState!==null||_e,c=Fi;var f=_e;Fi=o,(_e=n)&&!f?Tr(e,a,(a.subtreeFlags&8772)!==0):Er(e,a),Fi=c,_e=f}break;case 30:break;default:Er(e,a)}}function Wp(e){var n=e.alternate;n!==null&&(e.alternate=null,Wp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&lr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var le=null,gn=!1;function Qi(e,n,a){for(a=a.child;a!==null;)ty(e,n,a),a=a.sibling}function ty(e,n,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(fe,a)}catch{}switch(a.tag){case 26:_e||ci(a,n),Qi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_e||ci(a,n);var o=le,c=gn;Ir(a.type)&&(le=a.stateNode,gn=!1),Qi(e,n,a),il(a.stateNode),le=o,gn=c;break;case 5:_e||ci(a,n);case 6:if(o=le,c=gn,le=null,Qi(e,n,a),le=o,gn=c,le!==null)if(gn)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(a.stateNode)}catch(f){ne(a,n,f)}else try{le.removeChild(a.stateNode)}catch(f){ne(a,n,f)}break;case 18:le!==null&&(gn?(e=le,qy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),hl(e)):qy(le,a.stateNode));break;case 4:o=le,c=gn,le=a.stateNode.containerInfo,gn=!0,Qi(e,n,a),le=o,gn=c;break;case 0:case 11:case 14:case 15:_e||vr(2,a,n),_e||vr(4,a,n),Qi(e,n,a);break;case 1:_e||(ci(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Yp(a,n,o)),Qi(e,n,a);break;case 21:Qi(e,n,a);break;case 22:_e=(o=_e)||a.memoizedState!==null,Qi(e,n,a),_e=o;break;default:Qi(e,n,a)}}function ey(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hl(e)}catch(a){ne(n,n.return,a)}}function j0(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Zp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Zp),n;default:throw Error(s(435,e.tag))}}function Vf(e,n){var a=j0(e);n.forEach(function(o){var c=$0.bind(null,e,o);a.has(o)||(a.add(o),o.then(c,c))})}function Sn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var c=a[o],f=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Ir(E.type)){le=E.stateNode,gn=!1;break t}break;case 5:le=E.stateNode,gn=!1;break t;case 3:case 4:le=E.stateNode.containerInfo,gn=!0;break t}E=E.return}if(le===null)throw Error(s(160));ty(f,v,c),le=null,gn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ny(n,e),n=n.sibling}var Kn=null;function ny(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Sn(n,e),bn(e),o&4&&(vr(3,e,e.return),Yo(3,e),vr(5,e,e.return));break;case 1:Sn(n,e),bn(e),o&512&&(_e||a===null||ci(a,a.return)),o&64&&Fi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var c=Kn;if(Sn(n,e),bn(e),o&512&&(_e||a===null||ci(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,c=c.ownerDocument||c;e:switch(o){case"title":f=c.getElementsByTagName("title")[0],(!f||f[is]||f[Ne]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(o),c.head.insertBefore(f,c.querySelector("head > title"))),Xe(f,o,a),f[Ne]=e,pe(f),o=f;break t;case"link":var v=$y("link","href",c).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=c.createElement(o),Xe(f,o,a),c.head.appendChild(f);break;case"meta":if(v=$y("meta","content",c).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=c.createElement(o),Xe(f,o,a),c.head.appendChild(f);break;default:throw Error(s(468,o))}f[Ne]=e,pe(f),o=f}e.stateNode=o}else Zy(c,e.type,e.stateNode);else e.stateNode=Xy(c,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?Zy(c,e.type,e.stateNode):Xy(c,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Cf(e,e.memoizedProps,a.memoizedProps)}break;case 27:Sn(n,e),bn(e),o&512&&(_e||a===null||ci(a,a.return)),a!==null&&o&4&&Cf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Sn(n,e),bn(e),o&512&&(_e||a===null||ci(a,a.return)),e.flags&32){c=e.stateNode;try{Nn(c,"")}catch(B){ne(e,e.return,B)}}o&4&&e.stateNode!=null&&(c=e.memoizedProps,Cf(e,c,a!==null?a.memoizedProps:c)),o&1024&&(Of=!0);break;case 6:if(Sn(n,e),bn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){ne(e,e.return,B)}}break;case 3:if(rc=null,c=Kn,Kn=nc(n.containerInfo),Sn(n,e),Kn=c,bn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{hl(n.containerInfo)}catch(B){ne(e,e.return,B)}Of&&(Of=!1,iy(e));break;case 4:o=Kn,Kn=nc(e.stateNode.containerInfo),Sn(n,e),bn(e),Kn=o;break;case 12:Sn(n,e),bn(e);break;case 13:Sn(n,e),bn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lf=jt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Vf(e,o)));break;case 22:c=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=Fi,G=_e;if(Fi=L||c,_e=G||b,Sn(n,e),_e=G,Fi=L,bn(e),o&8192)t:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||b||Fi||_e||Ds(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){b=a=n;try{if(f=b.stateNode,c)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var Q=b.memoizedProps.style,z=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){ne(b,b.return,B)}}}else if(n.tag===6){if(a===null){b=n;try{b.stateNode.nodeValue=c?"":b.memoizedProps}catch(B){ne(b,b.return,B)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Vf(e,a))));break;case 19:Sn(n,e),bn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Vf(e,o)));break;case 30:break;case 21:break;default:Sn(n,e),bn(e)}}function bn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(Xp(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var c=a.stateNode,f=Df(e);Hu(e,f,c);break;case 5:var v=a.stateNode;a.flags&32&&(Nn(v,""),a.flags&=-33);var E=Df(e);Hu(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=Df(e);Nf(e,L,b);break;default:throw Error(s(161))}}catch(G){ne(e,e.return,G)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function iy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;iy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Er(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Jp(e,n.alternate,n),n=n.sibling}function Ds(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:vr(4,n,n.return),Ds(n);break;case 1:ci(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Yp(n,n.return,a),Ds(n);break;case 27:il(n.stateNode);case 26:case 5:ci(n,n.return),Ds(n);break;case 22:n.memoizedState===null&&Ds(n);break;case 30:Ds(n);break;default:Ds(n)}e=e.sibling}}function Tr(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,c=e,f=n,v=f.flags;switch(f.tag){case 0:case 11:case 15:Tr(c,f,a),Yo(4,f);break;case 1:if(Tr(c,f,a),o=f,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){ne(o,o.return,L)}if(o=f,c=o.updateQueue,c!==null){var E=o.stateNode;try{var b=c.shared.hiddenCallbacks;if(b!==null)for(c.shared.hiddenCallbacks=null,c=0;c<b.length;c++)Vg(b[c],E)}catch(L){ne(o,o.return,L)}}a&&v&64&&Qp(f),Ko(f,f.return);break;case 27:$p(f);case 26:case 5:Tr(c,f,a),a&&o===null&&v&4&&Kp(f),Ko(f,f.return);break;case 12:Tr(c,f,a);break;case 13:Tr(c,f,a),a&&v&4&&ey(c,f);break;case 22:f.memoizedState===null&&Tr(c,f,a),Ko(f,f.return);break;case 30:break;default:Tr(c,f,a)}n=n.sibling}}function Mf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Mo(a))}function xf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Mo(e))}function hi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ry(e,n,a,o),n=n.sibling}function ry(e,n,a,o){var c=n.flags;switch(n.tag){case 0:case 11:case 15:hi(e,n,a,o),c&2048&&Yo(9,n);break;case 1:hi(e,n,a,o);break;case 3:hi(e,n,a,o),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Mo(e)));break;case 12:if(c&2048){hi(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){ne(n,n.return,b)}}else hi(e,n,a,o);break;case 13:hi(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,v=n.alternate,n.memoizedState!==null?f._visibility&2?hi(e,n,a,o):Xo(e,n):f._visibility&2?hi(e,n,a,o):(f._visibility|=2,Aa(e,n,a,o,(n.subtreeFlags&10256)!==0)),c&2048&&Mf(v,n);break;case 24:hi(e,n,a,o),c&2048&&xf(n.alternate,n);break;default:hi(e,n,a,o)}}function Aa(e,n,a,o,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=e,v=n,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Aa(f,v,E,b,c),Yo(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?Aa(f,v,E,b,c):Xo(f,v):(G._visibility|=2,Aa(f,v,E,b,c)),c&&L&2048&&Mf(v.alternate,v);break;case 24:Aa(f,v,E,b,c),c&&L&2048&&xf(v.alternate,v);break;default:Aa(f,v,E,b,c)}n=n.sibling}}function Xo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,c=o.flags;switch(o.tag){case 22:Xo(a,o),c&2048&&Mf(o.alternate,o);break;case 24:Xo(a,o),c&2048&&xf(o.alternate,o);break;default:Xo(a,o)}n=n.sibling}}var $o=8192;function Sa(e){if(e.subtreeFlags&$o)for(e=e.child;e!==null;)sy(e),e=e.sibling}function sy(e){switch(e.tag){case 26:Sa(e),e.flags&$o&&e.memoizedState!==null&&RA(Kn,e.memoizedState,e.memoizedProps);break;case 5:Sa(e);break;case 3:case 4:var n=Kn;Kn=nc(e.stateNode.containerInfo),Sa(e),Kn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=$o,$o=16777216,Sa(e),$o=n):Sa(e));break;default:Sa(e)}}function ay(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Zo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];je=o,ly(o,e)}ay(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)oy(e),e=e.sibling}function oy(e){switch(e.tag){case 0:case 11:case 15:Zo(e),e.flags&2048&&vr(9,e,e.return);break;case 3:Zo(e);break;case 12:Zo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Gu(e)):Zo(e);break;default:Zo(e)}}function Gu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];je=o,ly(o,e)}ay(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:vr(8,n,n.return),Gu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Gu(n));break;default:Gu(n)}e=e.sibling}}function ly(e,n){for(;je!==null;){var a=je;switch(a.tag){case 0:case 11:case 15:vr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Mo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,je=o;else t:for(a=e;je!==null;){o=je;var c=o.sibling,f=o.return;if(Wp(o),o===a){je=null;break t}if(c!==null){c.return=f,je=c;break t}je=f}}}var q0={getCacheForType:function(e){var n=tn(Me),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a}},H0=typeof WeakMap=="function"?WeakMap:Map,Kt=0,re=null,Dt=null,Lt=0,Xt=0,wn=null,Ar=!1,ba=!1,Pf=!1,Yi=0,me=0,Sr=0,Ns=0,Uf=0,zn=0,wa=0,Jo=null,pn=null,kf=!1,Lf=0,Fu=1/0,Qu=null,br=null,Ke=0,wr=null,Ra=null,Ia=0,zf=0,Bf=null,uy=null,Wo=0,jf=null;function Rn(){if((Kt&2)!==0&&Lt!==0)return Lt&-Lt;if(q.T!==null){var e=ma;return e!==0?e:Kf()}return ar()}function cy(){zn===0&&(zn=(Lt&536870912)===0||Gt?oo():536870912);var e=Ln.current;return e!==null&&(e.flags|=32),zn}function In(e,n,a){(e===re&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)&&(Ca(e,0),Rr(e,Lt,zn,!1)),wi(e,a),((Kt&2)===0||e!==re)&&(e===re&&((Kt&2)===0&&(Ns|=a),me===4&&Rr(e,Lt,zn,!1)),fi(e))}function hy(e,n,a){if((Kt&6)!==0)throw Error(s(327));var o=!a&&(n&124)===0&&(n&e.expiredLanes)===0||ns(e,n),c=o?Q0(e,n):Gf(e,n,!0),f=o;do{if(c===0){ba&&!o&&Rr(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!G0(a)){c=Gf(e,n,!1),f=!1;continue}if(c===2){if(f=n,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;c=Jo;var b=E.current.memoizedState.isDehydrated;if(b&&(Ca(E,v).flags|=256),v=Gf(E,v,!1),v!==2){if(Pf&&!b){E.errorRecoveryDisabledLanes|=f,Ns|=f,c=4;break t}f=pn,pn=c,f!==null&&(pn===null?pn=f:pn.push.apply(pn,f))}c=v}if(f=!1,c!==2)continue}}if(c===1){Ca(e,0),Rr(e,n,0,!0);break}t:{switch(o=e,f=c,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Rr(o,n,zn,!Ar);break t;case 2:pn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(c=Lf+300-jt(),10<c)){if(Rr(o,n,zn,!Ar),Fs(o,0,!0)!==0)break t;o.timeoutHandle=By(fy.bind(null,o,a,pn,Qu,kf,n,zn,Ns,wa,Ar,f,2,-0,0),c);break t}fy(o,a,pn,Qu,kf,n,zn,Ns,wa,Ar,f,0,-0,0)}}break}while(!0);fi(e)}function fy(e,n,a,o,c,f,v,E,b,L,G,Q,z,B){if(e.timeoutHandle=-1,Q=n.subtreeFlags,(Q&8192||(Q&16785408)===16785408)&&(al={stylesheets:null,count:0,unsuspend:wA},sy(n),Q=IA(),Q!==null)){e.cancelPendingCommit=Q(vy.bind(null,e,n,f,a,o,c,v,E,b,G,1,z,B)),Rr(e,f,v,!L);return}vy(e,n,f,a,o,c,v,E,b)}function G0(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var c=a[o],f=c.getSnapshot;c=c.value;try{if(!Tn(f(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Rr(e,n,a,o){n&=~Uf,n&=~Ns,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var c=n;0<c;){var f=31-We(c),v=1<<f;o[f]=-1,c&=~v}a!==0&&Zn(e,a,n)}function Yu(){return(Kt&6)===0?(tl(0),!1):!0}function qf(){if(Dt!==null){if(Xt===0)var e=Dt.return;else e=Dt,zi=bs=null,sf(e),Ea=null,Go=0,e=Dt;for(;e!==null;)Fp(e.alternate,e),e=e.return;Dt=null}}function Ca(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,lA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),qf(),re=e,Dt=a=Ui(e.current,null),Lt=n,Xt=0,wn=null,Ar=!1,ba=ns(e,n),Pf=!1,wa=zn=Uf=Ns=Sr=me=0,pn=Jo=null,kf=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var c=31-We(o),f=1<<c;n|=e[c],o&=~f}return Yi=n,gu(),a}function dy(e,n){Rt=null,q.H=xu,n===Po||n===bu?(n=Ng(),Xt=3):n===Ig?(n=Ng(),Xt=4):Xt=n===Op?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,wn=n,Dt===null&&(me=1,zu(e,xn(n,e.current)))}function my(){var e=q.H;return q.H=xu,e===null?xu:e}function gy(){var e=q.A;return q.A=q0,e}function Hf(){me=4,Ar||(Lt&4194048)!==Lt&&Ln.current!==null||(ba=!0),(Sr&134217727)===0&&(Ns&134217727)===0||re===null||Rr(re,Lt,zn,!1)}function Gf(e,n,a){var o=Kt;Kt|=2;var c=my(),f=gy();(re!==e||Lt!==n)&&(Qu=null,Ca(e,n)),n=!1;var v=me;t:do try{if(Xt!==0&&Dt!==null){var E=Dt,b=wn;switch(Xt){case 8:qf(),v=6;break t;case 3:case 2:case 9:case 6:Ln.current===null&&(n=!0);var L=Xt;if(Xt=0,wn=null,Da(e,E,b,L),a&&ba){v=0;break t}break;default:L=Xt,Xt=0,wn=null,Da(e,E,b,L)}}F0(),v=me;break}catch(G){dy(e,G)}while(!0);return n&&e.shellSuspendCounter++,zi=bs=null,Kt=o,q.H=c,q.A=f,Dt===null&&(re=null,Lt=0,gu()),v}function F0(){for(;Dt!==null;)py(Dt)}function Q0(e,n){var a=Kt;Kt|=2;var o=my(),c=gy();re!==e||Lt!==n?(Qu=null,Fu=jt()+500,Ca(e,n)):ba=ns(e,n);t:do try{if(Xt!==0&&Dt!==null){n=Dt;var f=wn;e:switch(Xt){case 1:Xt=0,wn=null,Da(e,n,f,1);break;case 2:case 9:if(Cg(f)){Xt=0,wn=null,yy(n);break}n=function(){Xt!==2&&Xt!==9||re!==e||(Xt=7),fi(e)},f.then(n,n);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:Cg(f)?(Xt=0,wn=null,yy(n)):(Xt=0,wn=null,Da(e,n,f,7));break;case 5:var v=null;switch(Dt.tag){case 26:v=Dt.memoizedState;case 5:case 27:var E=Dt;if(!v||Jy(v)){Xt=0,wn=null;var b=E.sibling;if(b!==null)Dt=b;else{var L=E.return;L!==null?(Dt=L,Ku(L)):Dt=null}break e}}Xt=0,wn=null,Da(e,n,f,5);break;case 6:Xt=0,wn=null,Da(e,n,f,6);break;case 8:qf(),me=6;break t;default:throw Error(s(462))}}Y0();break}catch(G){dy(e,G)}while(!0);return zi=bs=null,q.H=o,q.A=c,Kt=a,Dt!==null?0:(re=null,Lt=0,gu(),me)}function Y0(){for(;Dt!==null&&!ke();)py(Dt)}function py(e){var n=Hp(e.alternate,e,Yi);e.memoizedProps=e.pendingProps,n===null?Ku(e):Dt=n}function yy(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=kp(a,n,n.pendingProps,n.type,void 0,Lt);break;case 11:n=kp(a,n,n.pendingProps,n.type.render,n.ref,Lt);break;case 5:sf(n);default:Fp(a,n),n=Dt=_g(n,Yi),n=Hp(a,n,Yi)}e.memoizedProps=e.pendingProps,n===null?Ku(e):Dt=n}function Da(e,n,a,o){zi=bs=null,sf(n),Ea=null,Go=0;var c=n.return;try{if(U0(e,c,n,a,Lt)){me=1,zu(e,xn(a,e.current)),Dt=null;return}}catch(f){if(c!==null)throw Dt=c,f;me=1,zu(e,xn(a,e.current)),Dt=null;return}n.flags&32768?(Gt||o===1?e=!0:ba||(Lt&536870912)!==0?e=!1:(Ar=e=!0,(o===2||o===9||o===3||o===6)&&(o=Ln.current,o!==null&&o.tag===13&&(o.flags|=16384))),_y(n,e)):Ku(n)}function Ku(e){var n=e;do{if((n.flags&32768)!==0){_y(n,Ar);return}e=n.return;var a=L0(n.alternate,n,Yi);if(a!==null){Dt=a;return}if(n=n.sibling,n!==null){Dt=n;return}Dt=n=e}while(n!==null);me===0&&(me=5)}function _y(e,n){do{var a=z0(e.alternate,e);if(a!==null){a.flags&=32767,Dt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Dt=e;return}Dt=e=a}while(e!==null);me=6,Dt=null}function vy(e,n,a,o,c,f,v,E,b){e.cancelPendingCommit=null;do Xu();while(Ke!==0);if((Kt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=Mh,uo(e,a,f,v,E,b),e===re&&(Dt=re=null,Lt=0),Ra=n,wr=e,Ia=a,zf=f,Bf=c,uy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Z0(Jr,function(){return by(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=q.T,q.T=null,c=nt.p,nt.p=2,v=Kt,Kt|=4;try{B0(e,n,a)}finally{Kt=v,nt.p=c,q.T=o}}Ke=1,Ey(),Ty(),Ay()}}function Ey(){if(Ke===1){Ke=0;var e=wr,n=Ra,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var o=nt.p;nt.p=2;var c=Kt;Kt|=4;try{ny(n,e);var f=nd,v=lg(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&og(E.ownerDocument.documentElement,E)){if(b!==null&&Ch(E)){var L=b.start,G=b.end;if(G===void 0&&(G=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(G,E.value.length);else{var Q=E.ownerDocument||document,z=Q&&Q.defaultView||window;if(z.getSelection){var B=z.getSelection(),_t=E.textContent.length,dt=Math.min(b.start,_t),te=b.end===void 0?dt:Math.min(b.end,_t);!B.extend&&dt>te&&(v=te,te=dt,dt=v);var P=ag(E,dt),N=ag(E,te);if(P&&N&&(B.rangeCount!==1||B.anchorNode!==P.node||B.anchorOffset!==P.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var k=Q.createRange();k.setStart(P.node,P.offset),B.removeAllRanges(),dt>te?(B.addRange(k),B.extend(N.node,N.offset)):(k.setEnd(N.node,N.offset),B.addRange(k))}}}}for(Q=[],B=E;B=B.parentNode;)B.nodeType===1&&Q.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Q.length;E++){var F=Q[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}oc=!!ed,nd=ed=null}finally{Kt=c,nt.p=o,q.T=a}}e.current=n,Ke=2}}function Ty(){if(Ke===2){Ke=0;var e=wr,n=Ra,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var o=nt.p;nt.p=2;var c=Kt;Kt|=4;try{Jp(e,n.alternate,n)}finally{Kt=c,nt.p=o,q.T=a}}Ke=3}}function Ay(){if(Ke===4||Ke===3){Ke=0,ln();var e=wr,n=Ra,a=Ia,o=uy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ke=5:(Ke=0,Ra=wr=null,Sy(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(br=null),Qs(a),n=n.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(fe,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=q.T,c=nt.p,nt.p=2,q.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{q.T=n,nt.p=c}}(Ia&3)!==0&&Xu(),fi(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===jf?Wo++:(Wo=0,jf=e):Wo=0,tl(0)}}function Sy(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Mo(n)))}function Xu(e){return Ey(),Ty(),Ay(),by()}function by(){if(Ke!==5)return!1;var e=wr,n=zf;zf=0;var a=Qs(Ia),o=q.T,c=nt.p;try{nt.p=32>a?32:a,q.T=null,a=Bf,Bf=null;var f=wr,v=Ia;if(Ke=0,Ra=wr=null,Ia=0,(Kt&6)!==0)throw Error(s(331));var E=Kt;if(Kt|=4,oy(f.current),ry(f,f.current,v,a),Kt=E,tl(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(fe,f)}catch{}return!0}finally{nt.p=c,q.T=o,Sy(e,n)}}function wy(e,n,a){n=xn(a,n),n=vf(e.stateNode,n,2),e=gr(e,n,2),e!==null&&(wi(e,2),fi(e))}function ne(e,n,a){if(e.tag===3)wy(e,e,a);else for(;n!==null;){if(n.tag===3){wy(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(br===null||!br.has(o))){e=xn(a,e),a=Dp(2),o=gr(n,a,2),o!==null&&(Np(a,o,n,e),wi(o,2),fi(o));break}}n=n.return}}function Ff(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new H0;var c=new Set;o.set(n,c)}else c=o.get(n),c===void 0&&(c=new Set,o.set(n,c));c.has(a)||(Pf=!0,c.add(a),e=K0.bind(null,e,n,a),n.then(e,e))}function K0(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,re===e&&(Lt&a)===a&&(me===4||me===3&&(Lt&62914560)===Lt&&300>jt()-Lf?(Kt&2)===0&&Ca(e,0):Uf|=a,wa===Lt&&(wa=0)),fi(e)}function Ry(e,n){n===0&&(n=lo()),e=ca(e,n),e!==null&&(wi(e,n),fi(e))}function X0(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Ry(e,a)}function $0(e,n){var a=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Ry(e,a)}function Z0(e,n){return Te(e,n)}var $u=null,Na=null,Qf=!1,Zu=!1,Yf=!1,Os=0;function fi(e){e!==Na&&e.next===null&&(Na===null?$u=Na=e:Na=Na.next=e),Zu=!0,Qf||(Qf=!0,W0())}function tl(e,n){if(!Yf&&Zu){Yf=!0;do for(var a=!1,o=$u;o!==null;){if(e!==0){var c=o.pendingLanes;if(c===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-We(42|e)+1)-1,f&=c&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Ny(o,f))}else f=Lt,f=Fs(o,o===re?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||ns(o,f)||(a=!0,Ny(o,f));o=o.next}while(a);Yf=!1}}function J0(){Iy()}function Iy(){Zu=Qf=!1;var e=0;Os!==0&&(oA()&&(e=Os),Os=0);for(var n=jt(),a=null,o=$u;o!==null;){var c=o.next,f=Cy(o,n);f===0?(o.next=null,a===null?$u=c:a.next=c,c===null&&(Na=a)):(a=o,(e!==0||(f&3)!==0)&&(Zu=!0)),o=c}tl(e)}function Cy(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-We(f),E=1<<v,b=c[v];b===-1?((E&a)===0||(E&o)!==0)&&(c[v]=ao(E,n)):b<=n&&(e.expiredLanes|=E),f&=~E}if(n=re,a=Lt,a=Fs(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&ie(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ns(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&ie(o),Qs(a)){case 2:case 8:a=Si;break;case 32:a=Jr;break;case 268435456:a=Gs;break;default:a=Jr}return o=Dy.bind(null,e),a=Te(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&ie(o),e.callbackPriority=2,e.callbackNode=null,2}function Dy(e,n){if(Ke!==0&&Ke!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Xu()&&e.callbackNode!==a)return null;var o=Lt;return o=Fs(e,e===re?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(hy(e,o,n),Cy(e,jt()),e.callbackNode!=null&&e.callbackNode===a?Dy.bind(null,e):null)}function Ny(e,n){if(Xu())return null;hy(e,n,!0)}function W0(){uA(function(){(Kt&6)!==0?Te(dn,J0):Iy()})}function Kf(){return Os===0&&(Os=oo()),Os}function Oy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Js(""+e)}function Vy(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function tA(e,n,a,o,c){if(n==="submit"&&a&&a.stateNode===c){var f=Oy((c[Ae]||null).action),v=o.submitter;v&&(n=(n=v[Ae]||null)?Oy(n.formAction):v.getAttribute("formAction"),n!==null&&(f=n,v=null));var E=new Ws("action","action",null,o,c);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Os!==0){var b=v?Vy(c,v):new FormData(c);mf(a,{pending:!0,data:b,method:c.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?Vy(c,v):new FormData(c),mf(a,{pending:!0,data:b,method:c.method,action:f},f,b))},currentTarget:c}]})}}for(var Xf=0;Xf<Vh.length;Xf++){var $f=Vh[Xf],eA=$f.toLowerCase(),nA=$f[0].toUpperCase()+$f.slice(1);Yn(eA,"on"+nA)}Yn(hg,"onAnimationEnd"),Yn(fg,"onAnimationIteration"),Yn(dg,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(v0,"onTransitionRun"),Yn(E0,"onTransitionStart"),Yn(T0,"onTransitionCancel"),Yn(mg,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(el));function My(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],c=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(G){Lu(G)}c.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(G){Lu(G)}c.currentTarget=null,f=b}}}}function Nt(e,n){var a=n[ho];a===void 0&&(a=n[ho]=new Set);var o=e+"__bubble";a.has(o)||(xy(n,e,2,!1),a.add(o))}function Zf(e,n,a){var o=0;n&&(o|=4),xy(a,e,o,n)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function Jf(e){if(!e[Ju]){e[Ju]=!0,fo.forEach(function(a){a!=="selectionchange"&&(iA.has(a)||Zf(a,!1,e),Zf(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ju]||(n[Ju]=!0,Zf("selectionchange",!1,n))}}function xy(e,n,a,o){switch(r_(n)){case 2:var c=NA;break;case 8:c=OA;break;default:c=fd}a=c.bind(null,n,a,e),c=void 0,!Vn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(n,a,{capture:!0,passive:c}):e.addEventListener(n,a,!0):c!==void 0?e.addEventListener(n,a,{passive:c}):e.addEventListener(n,a,!1)}function Wf(e,n,a,o,c){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===c)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;E!==null;){if(v=Ri(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}tu(function(){var L=f,G=On(a),Q=[];t:{var z=gg.get(e);if(z!==void 0){var B=Ws,_t=e;switch(e){case"keypress":if(ii(a)===0)break t;case"keydown":case"keyup":B=sa;break;case"focusin":_t="focus",B=na;break;case"focusout":_t="blur",B=na;break;case"beforeblur":case"afterblur":B=na;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=bh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=lu;break;case hg:case fg:case dg:B=ia;break;case mg:B=cu;break;case"scroll":case"scrollend":B=eu;break;case"wheel":B=aa;break;case"copy":case"cut":case"paste":B=ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=wo;break;case"toggle":case"beforetoggle":B=fu}var dt=(n&4)!==0,te=!dt&&(e==="scroll"||e==="scrollend"),P=dt?z!==null?z+"Capture":null:z;dt=[];for(var N=L,k;N!==null;){var F=N;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||P===null||(F=cs(N,P),F!=null&&dt.push(nl(N,F,k))),te)break;N=N.return}0<dt.length&&(z=new B(z,_t,null,a,G),Q.push({event:z,listeners:dt}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==Ni&&(_t=a.relatedTarget||a.fromElement)&&(Ri(_t)||_t[Dn]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(_t=a.relatedTarget||a.toElement,B=L,_t=_t?Ri(_t):null,_t!==null&&(te=h(_t),dt=_t.tag,_t!==te||dt!==5&&dt!==27&&dt!==6)&&(_t=null)):(B=null,_t=L),B!==_t)){if(dt=Mn,F="onMouseLeave",P="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(dt=wo,F="onPointerLeave",P="onPointerEnter",N="pointer"),te=B==null?z:Wn(B),k=_t==null?z:Wn(_t),z=new dt(F,N+"leave",B,a,G),z.target=te,z.relatedTarget=k,F=null,Ri(G)===L&&(dt=new dt(P,N+"enter",_t,a,G),dt.target=k,dt.relatedTarget=te,F=dt),te=F,B&&_t)e:{for(dt=B,P=_t,N=0,k=dt;k;k=Oa(k))N++;for(k=0,F=P;F;F=Oa(F))k++;for(;0<N-k;)dt=Oa(dt),N--;for(;0<k-N;)P=Oa(P),k--;for(;N--;){if(dt===P||P!==null&&dt===P.alternate)break e;dt=Oa(dt),P=Oa(P)}dt=null}else dt=null;B!==null&&Py(Q,z,B,dt,!1),_t!==null&&te!==null&&Py(Q,te,_t,dt,!0)}}t:{if(z=L?Wn(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var at=tg;else if(Ve(z))if(eg)at=p0;else{at=m0;var Ct=d0}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&_o(L.elementType)&&(at=tg):at=g0;if(at&&(at=at(e,L))){Pi(Q,at,a,G);break t}Ct&&Ct(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&cr(z,"number",z.value)}switch(Ct=L?Wn(L):window,e){case"focusin":(Ve(Ct)||Ct.contentEditable==="true")&&(oa=Ct,Dh=L,Co=null);break;case"focusout":Co=Dh=oa=null;break;case"mousedown":Nh=!0;break;case"contextmenu":case"mouseup":case"dragend":Nh=!1,ug(Q,a,G);break;case"selectionchange":if(_0)break;case"keydown":case"keyup":ug(Q,a,G)}var ut;if(ai)t:{switch(e){case"compositionstart":var mt="onCompositionStart";break t;case"compositionend":mt="onCompositionEnd";break t;case"compositionupdate":mt="onCompositionUpdate";break t}mt=void 0}else Ut?j(e,a)&&(mt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(mt="onCompositionStart");mt&&(p&&a.locale!=="ko"&&(Ut||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Ut&&(ut=Eo()):(ni=G,hr="value"in ni?ni.value:ni.textContent,Ut=!0)),Ct=Wu(L,mt),0<Ct.length&&(mt=new So(mt,e,null,a,G),Q.push({event:mt,listeners:Ct}),ut?mt.data=ut:(ut=tt(a),ut!==null&&(mt.data=ut)))),(ut=m?Oe(e,a):kt(e,a))&&(mt=Wu(L,"onBeforeInput"),0<mt.length&&(Ct=new So("onBeforeInput","beforeinput",null,a,G),Q.push({event:Ct,listeners:mt}),Ct.data=ut)),tA(Q,e,L,a,G)}My(Q,n)})}function nl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Wu(e,n){for(var a=n+"Capture",o=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=cs(e,a),c!=null&&o.unshift(nl(e,c,f)),c=cs(e,n),c!=null&&o.push(nl(e,c,f))),e.tag===3)return o;e=e.return}return[]}function Oa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Py(e,n,a,o,c){for(var f=n._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,c?(L=cs(a,f),L!=null&&v.unshift(nl(a,L,b))):c||(L=cs(a,f),L!=null&&v.push(nl(a,L,b)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var rA=/\r\n?/g,sA=/\u0000|\uFFFD/g;function Uy(e){return(typeof e=="string"?e:""+e).replace(rA,`
`).replace(sA,"")}function ky(e,n){return n=Uy(n),Uy(e)===n}function tc(){}function Wt(e,n,a,o,c,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Nn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Nn(e,""+o);break;case"className":ti(e,"class",o);break;case"tabIndex":ti(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(e,a,o);break;case"style":yo(e,o,f);break;case"data":if(n!=="object"){ti(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Js(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&Wt(e,n,"name",c.name,c,null),Wt(e,n,"formEncType",c.formEncType,c,null),Wt(e,n,"formMethod",c.formMethod,c,null),Wt(e,n,"formTarget",c.formTarget,c,null)):(Wt(e,n,"encType",c.encType,c,null),Wt(e,n,"method",c.method,c,null),Wt(e,n,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Js(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=tc);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Js(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),ur(e,"popover",o);break;case"xlinkActuate":Fe(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Fe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Fe(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Fe(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Fe(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Fe(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Fe(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Fe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Fe(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ur(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ah.get(a)||a,ur(e,a,o))}}function td(e,n,a,o,c,f){switch(a){case"style":yo(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Nn(e,o):(typeof o=="number"||typeof o=="bigint")&&Nn(e,""+o);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ys.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),f=e[Ae]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,c),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,c);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ur(e,a,o)}}}function Xe(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var o=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Wt(e,n,f,v,a,null)}}c&&Wt(e,n,"srcSet",a.srcSet,a,null),o&&Wt(e,n,"src",a.src,a,null);return;case"input":Nt("invalid",e);var E=f=v=c=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":c=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":L=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:Wt(e,n,o,G,a,null)}}os(e,f,E,b,L,v,c,!1),Zs(e);return;case"select":Nt("invalid",e),o=v=f=null;for(c in a)if(a.hasOwnProperty(c)&&(E=a[c],E!=null))switch(c){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Wt(e,n,c,E,a,null)}n=f,a=v,e.multiple=!!o,n!=null?Di(e,!!o,n,!1):a!=null&&Di(e,!!o,a,!0);return;case"textarea":Nt("invalid",e),f=c=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":c=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Wt(e,n,v,E,a,null)}ls(e,o,c,f),Zs(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Wt(e,n,b,o,a,null)}return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(o=0;o<el.length;o++)Nt(el[o],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Wt(e,n,L,o,a,null)}return;default:if(_o(n)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&td(e,n,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Wt(e,n,E,o,a,null))}function aA(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,v=null,E=null,b=null,L=null,G=null;for(B in a){var Q=a[B];if(a.hasOwnProperty(B)&&Q!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=Q;default:o.hasOwnProperty(B)||Wt(e,n,B,null,o,Q)}}for(var z in o){var B=o[z];if(Q=a[z],o.hasOwnProperty(z)&&(B!=null||Q!=null))switch(z){case"type":f=B;break;case"name":c=B;break;case"checked":L=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,n));break;default:B!==Q&&Wt(e,n,z,B,o,Q)}}En(e,v,E,b,L,G,f,c);return;case"select":B=v=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(f)||Wt(e,n,f,null,o,b)}for(c in o)if(f=o[c],b=a[c],o.hasOwnProperty(c)&&(f!=null||b!=null))switch(c){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&Wt(e,n,c,f,o,b)}n=E,a=v,o=B,z!=null?Di(e,!!a,z,!1):!!o!=!!a&&(n!=null?Di(e,!!a,n,!0):Di(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(c=a[E],a.hasOwnProperty(E)&&c!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Wt(e,n,E,null,o,c)}for(v in o)if(c=o[v],f=a[v],o.hasOwnProperty(v)&&(c!=null||f!=null))switch(v){case"value":z=c;break;case"defaultValue":B=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==f&&Wt(e,n,v,c,o,f)}Zt(e,z,B);return;case"option":for(var _t in a)if(z=a[_t],a.hasOwnProperty(_t)&&z!=null&&!o.hasOwnProperty(_t))switch(_t){case"selected":e.selected=!1;break;default:Wt(e,n,_t,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Wt(e,n,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in a)z=a[dt],a.hasOwnProperty(dt)&&z!=null&&!o.hasOwnProperty(dt)&&Wt(e,n,dt,null,o,z);for(L in o)if(z=o[L],B=a[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,n));break;default:Wt(e,n,L,z,o,B)}return;default:if(_o(n)){for(var te in a)z=a[te],a.hasOwnProperty(te)&&z!==void 0&&!o.hasOwnProperty(te)&&td(e,n,te,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||td(e,n,G,z,o,B);return}}for(var P in a)z=a[P],a.hasOwnProperty(P)&&z!=null&&!o.hasOwnProperty(P)&&Wt(e,n,P,null,o,z);for(Q in o)z=o[Q],B=a[Q],!o.hasOwnProperty(Q)||z===B||z==null&&B==null||Wt(e,n,Q,z,o,B)}var ed=null,nd=null;function ec(e){return e.nodeType===9?e:e.ownerDocument}function Ly(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function id(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var rd=null;function oA(){var e=window.event;return e&&e.type==="popstate"?e===rd?!1:(rd=e,!0):(rd=null,!1)}var By=typeof setTimeout=="function"?setTimeout:void 0,lA=typeof clearTimeout=="function"?clearTimeout:void 0,jy=typeof Promise=="function"?Promise:void 0,uA=typeof queueMicrotask=="function"?queueMicrotask:typeof jy<"u"?function(e){return jy.resolve(null).then(e).catch(cA)}:By;function cA(e){setTimeout(function(){throw e})}function Ir(e){return e==="head"}function qy(e,n){var a=n,o=0,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&il(v.documentElement),a&2&&il(v.body),a&4)for(a=v.head,il(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[is]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(c===0){e.removeChild(f),hl(n);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);hl(n)}function sd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sd(a),lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function hA(e,n,a,o){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[is])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Xn(e.nextSibling),e===null)break}return null}function fA(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Xn(e.nextSibling),e===null))return null;return e}function ad(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function dA(e,n){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Xn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var od=null;function Hy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}function Gy(e,n,a){switch(n=ec(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function il(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);lr(e)}var Bn=new Map,Fy=new Set;function nc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ki=nt.d;nt.d={f:mA,r:gA,D:pA,C:yA,L:_A,m:vA,X:TA,S:EA,M:AA};function mA(){var e=Ki.f(),n=Yu();return e||n}function gA(e){var n=Jn(e);n!==null&&n.tag===5&&n.type==="form"?hp(n):Ki.r(e)}var Va=typeof document>"u"?null:document;function Qy(e,n,a){var o=Va;if(o&&typeof n=="string"&&n){var c=Se(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Fy.has(c)||(Fy.add(c),e={rel:e,crossOrigin:a,href:n},o.querySelector(c)===null&&(n=o.createElement("link"),Xe(n,"link",e),pe(n),o.head.appendChild(n)))}}function pA(e){Ki.D(e),Qy("dns-prefetch",e,null)}function yA(e,n){Ki.C(e,n),Qy("preconnect",e,n)}function _A(e,n,a){Ki.L(e,n,a);var o=Va;if(o&&e&&n){var c='link[rel="preload"][as="'+Se(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Se(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Se(a.imageSizes)+'"]')):c+='[href="'+Se(e)+'"]';var f=c;switch(n){case"style":f=Ma(e);break;case"script":f=xa(e)}Bn.has(f)||(e=A({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Bn.set(f,e),o.querySelector(c)!==null||n==="style"&&o.querySelector(rl(f))||n==="script"&&o.querySelector(sl(f))||(n=o.createElement("link"),Xe(n,"link",e),pe(n),o.head.appendChild(n)))}}function vA(e,n){Ki.m(e,n);var a=Va;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Se(o)+'"][href="'+Se(e)+'"]',f=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=xa(e)}if(!Bn.has(f)&&(e=A({rel:"modulepreload",href:e},n),Bn.set(f,e),a.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(sl(f)))return}o=a.createElement("link"),Xe(o,"link",e),pe(o),a.head.appendChild(o)}}}function EA(e,n,a){Ki.S(e,n,a);var o=Va;if(o&&e){var c=un(o).hoistableStyles,f=Ma(e);n=n||"default";var v=c.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(rl(f)))E.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Bn.get(f))&&ld(e,a);var b=v=o.createElement("link");pe(b),Xe(b,"link",e),b._p=new Promise(function(L,G){b.onload=L,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ic(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:E},c.set(f,v)}}}function TA(e,n){Ki.X(e,n);var a=Va;if(a&&e){var o=un(a).hoistableScripts,c=xa(e),f=o.get(c);f||(f=a.querySelector(sl(c)),f||(e=A({src:e,async:!0},n),(n=Bn.get(c))&&ud(e,n),f=a.createElement("script"),pe(f),Xe(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function AA(e,n){Ki.M(e,n);var a=Va;if(a&&e){var o=un(a).hoistableScripts,c=xa(e),f=o.get(c);f||(f=a.querySelector(sl(c)),f||(e=A({src:e,async:!0,type:"module"},n),(n=Bn.get(c))&&ud(e,n),f=a.createElement("script"),pe(f),Xe(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function Yy(e,n,a,o){var c=(c=pt.current)?nc(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ma(a.href),a=un(c).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ma(a.href);var f=un(c).hoistableStyles,v=f.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=c.querySelector(rl(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Bn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(e,a),f||SA(c,e,a,v.state))),n&&o===null)throw Error(s(528,""));return v}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xa(a),a=un(c).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ma(e){return'href="'+Se(e)+'"'}function rl(e){return'link[rel="stylesheet"]['+e+"]"}function Ky(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function SA(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Xe(n,"link",a),pe(n),e.head.appendChild(n))}function xa(e){return'[src="'+Se(e)+'"]'}function sl(e){return"script[async]"+e}function Xy(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Se(a.href)+'"]');if(o)return n.instance=o,pe(o),o;var c=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),pe(o),Xe(o,"style",c),ic(o,a.precedence,e),n.instance=o;case"stylesheet":c=Ma(a.href);var f=e.querySelector(rl(c));if(f)return n.state.loading|=4,n.instance=f,pe(f),f;o=Ky(a),(c=Bn.get(c))&&ld(o,c),f=(e.ownerDocument||e).createElement("link"),pe(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Xe(f,"link",o),n.state.loading|=4,ic(f,a.precedence,e),n.instance=f;case"script":return f=xa(a.src),(c=e.querySelector(sl(f)))?(n.instance=c,pe(c),c):(o=a,(c=Bn.get(f))&&(o=A({},a),ud(o,c)),e=e.ownerDocument||e,c=e.createElement("script"),pe(c),Xe(c,"link",o),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,ic(o,a.precedence,e));return n.instance}function ic(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,f=c,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===n)f=E;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function ld(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var rc=null;function $y(e,n,a){if(rc===null){var o=new Map,c=rc=new Map;c.set(a,o)}else c=rc,o=c.get(a),o||(o=new Map,c.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var f=a[c];if(!(f[is]||f[Ne]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(n)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function Zy(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function bA(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Jy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var al=null;function wA(){}function RA(e,n,a){if(al===null)throw Error(s(475));var o=al;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=Ma(a.href),f=e.querySelector(rl(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=sc.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=f,pe(f);return}f=e.ownerDocument||e,a=Ky(a),(c=Bn.get(c))&&ld(a,c),f=f.createElement("link"),pe(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Xe(f,"link",a),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=sc.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function IA(){if(al===null)throw Error(s(475));var e=al;return e.stylesheets&&e.count===0&&cd(e,e.stylesheets),0<e.count?function(n){var a=setTimeout(function(){if(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a)}}:null}function sc(){if(this.count--,this.count===0){if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ac=null;function cd(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ac=new Map,n.forEach(CA,e),ac=null,sc.call(e))}function CA(e,n){if(!(n.state.loading&4)){var a=ac.get(e);if(a)var o=a.get(null);else{a=new Map,ac.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var v=c[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}c=n.instance,v=c.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,c),a.set(v,c),this.count++,o=sc.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var ol={$$typeof:ct,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function DA(e,n,a,o,c,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Wy(e,n,a,o,c,f,v,E,b,L,G,Q){return e=new DA(e,n,a,v,E,b,L,Q),n=1,f===!0&&(n|=24),f=An(3,null,null,n),e.current=f,f.stateNode=e,n=Gh(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},Kh(f),e}function t_(e){return e?(e=ha,e):ha}function e_(e,n,a,o,c,f){c=t_(c),o.context===null?o.context=c:o.pendingContext=c,o=mr(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=gr(e,o,n),a!==null&&(In(a,e,n),ko(a,e,n))}function n_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function hd(e,n){n_(e,n),(e=e.alternate)&&n_(e,n)}function i_(e){if(e.tag===13){var n=ca(e,67108864);n!==null&&In(n,e,67108864),hd(e,67108864)}}var oc=!0;function NA(e,n,a,o){var c=q.T;q.T=null;var f=nt.p;try{nt.p=2,fd(e,n,a,o)}finally{nt.p=f,q.T=c}}function OA(e,n,a,o){var c=q.T;q.T=null;var f=nt.p;try{nt.p=8,fd(e,n,a,o)}finally{nt.p=f,q.T=c}}function fd(e,n,a,o){if(oc){var c=dd(o);if(c===null)Wf(e,n,o,lc,a),s_(e,o);else if(MA(c,e,n,a,o))o.stopPropagation();else if(s_(e,o),n&4&&-1<VA.indexOf(e)){for(;c!==null;){var f=Jn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Gn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-We(v);E.entanglements[1]|=b,v&=~b}fi(f),(Kt&6)===0&&(Fu=jt()+500,tl(0))}}break;case 13:E=ca(f,2),E!==null&&In(E,f,2),Yu(),hd(f,2)}if(f=dd(o),f===null&&Wf(e,n,o,lc,a),f===c)break;c=f}c!==null&&o.stopPropagation()}else Wf(e,n,o,null,a)}}function dd(e){return e=On(e),md(e)}var lc=null;function md(e){if(lc=null,e=Ri(e),e!==null){var n=h(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return lc=e,null}function r_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ge()){case dn:return 2;case Si:return 8;case Jr:case yh:return 32;case Gs:return 268435456;default:return 32}default:return 32}}var gd=!1,Cr=null,Dr=null,Nr=null,ll=new Map,ul=new Map,Or=[],VA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s_(e,n){switch(e){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":ll.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(n.pointerId)}}function cl(e,n,a,o,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Jn(n),n!==null&&i_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function MA(e,n,a,o,c){switch(n){case"focusin":return Cr=cl(Cr,e,n,a,o,c),!0;case"dragenter":return Dr=cl(Dr,e,n,a,o,c),!0;case"mouseover":return Nr=cl(Nr,e,n,a,o,c),!0;case"pointerover":var f=c.pointerId;return ll.set(f,cl(ll.get(f)||null,e,n,a,o,c)),!0;case"gotpointercapture":return f=c.pointerId,ul.set(f,cl(ul.get(f)||null,e,n,a,o,c)),!0}return!1}function a_(e){var n=Ri(e.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,Yl(e.priority,function(){if(a.tag===13){var o=Rn();o=sr(o);var c=ca(a,o);c!==null&&In(c,a,o),hd(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=dd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ni=o,a.target.dispatchEvent(o),Ni=null}else return n=Jn(a),n!==null&&i_(n),e.blockedOn=a,!1;n.shift()}return!0}function o_(e,n,a){uc(e)&&a.delete(n)}function xA(){gd=!1,Cr!==null&&uc(Cr)&&(Cr=null),Dr!==null&&uc(Dr)&&(Dr=null),Nr!==null&&uc(Nr)&&(Nr=null),ll.forEach(o_),ul.forEach(o_)}function cc(e,n){e.blockedOn===n&&(e.blockedOn=null,gd||(gd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xA)))}var hc=null;function l_(e){hc!==e&&(hc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){hc===e&&(hc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],c=e[n+2];if(typeof o!="function"){if(md(o||a)===null)continue;break}var f=Jn(a);f!==null&&(e.splice(n,3),n-=3,mf(f,{pending:!0,data:c,method:a.method,action:o},o,c))}}))}function hl(e){function n(b){return cc(b,e)}Cr!==null&&cc(Cr,e),Dr!==null&&cc(Dr,e),Nr!==null&&cc(Nr,e),ll.forEach(n),ul.forEach(n);for(var a=0;a<Or.length;a++){var o=Or[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Or.length&&(a=Or[0],a.blockedOn===null);)a_(a),a.blockedOn===null&&Or.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var c=a[o],f=a[o+1],v=c[Ae]||null;if(typeof f=="function")v||l_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(c=f,v=f[Ae]||null)E=v.formAction;else if(md(c)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),l_(a)}}}function pd(e){this._internalRoot=e}fc.prototype.render=pd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=Rn();e_(a,o,e,n,null,null)},fc.prototype.unmount=pd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;e_(e.current,2,null,e,null,null),Yu(),n[Dn]=null}};function fc(e){this._internalRoot=e}fc.prototype.unstable_scheduleHydration=function(e){if(e){var n=ar();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Or.length&&n!==0&&n<Or[a].priority;a++);Or.splice(a,0,e),a===0&&a_(e)}};var u_=t.version;if(u_!=="19.1.1")throw Error(s(527,u_,"19.1.1"));nt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(n),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var PA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{fe=dc.inject(PA),Yt=dc}catch{}}return dl.createRoot=function(e,n){if(!l(e))throw Error(s(299));var a=!1,o="",c=wp,f=Rp,v=Ip,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Wy(e,1,!1,null,null,a,o,c,f,v,E,null),e[Dn]=n.current,Jf(e),new pd(n)},dl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(s(299));var o=!1,c="",f=wp,v=Rp,E=Ip,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),n=Wy(e,1,!0,n,a??null,o,c,f,v,E,b,L),n.context=t_(null),a=n.current,o=Rn(),o=sr(o),c=mr(o),c.callback=null,gr(a,c,o),a=o,n.current.lanes=a,wi(n,a),fi(n),e[Dn]=n.current,Jf(e),new fc(n)},dl.version="19.1.1",dl}var v_;function FA(){if(v_)return vd.exports;v_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),vd.exports=GA(),vd.exports}var QA=FA();const YA=()=>{};var E_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=function(r){const t=[];let i=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},KA=function(r){const t=[];let i=0,s=0;for(;i<r.length;){const l=r[i++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const h=r[i++];t[s++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=r[i++],d=r[i++],g=r[i++],y=((l&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(y>>10)),t[s++]=String.fromCharCode(56320+(y&1023))}else{const h=r[i++],d=r[i++];t[s++]=String.fromCharCode((l&15)<<12|(h&63)<<6|d&63)}}return t.join("")},$v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const h=r[l],d=l+1<r.length,g=d?r[l+1]:0,y=l+2<r.length,_=y?r[l+2]:0,A=h>>2,D=(h&3)<<4|g>>4;let C=(g&15)<<2|_>>6,H=_&63;y||(H=64,d||(C=64)),s.push(i[A],i[D],i[C],i[H])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(Xv(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):KA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const h=i[r.charAt(l++)],g=l<r.length?i[r.charAt(l)]:0;++l;const _=l<r.length?i[r.charAt(l)]:64;++l;const D=l<r.length?i[r.charAt(l)]:64;if(++l,h==null||g==null||_==null||D==null)throw new XA;const C=h<<2|g>>4;if(s.push(C),_!==64){const H=g<<4&240|_>>2;if(s.push(H),D!==64){const $=_<<6&192|D;s.push($)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class XA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $A=function(r){const t=Xv(r);return $v.encodeByteArray(t,!0)},Nc=function(r){return $A(r).replace(/\./g,"")},Zv=function(r){try{return $v.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=()=>ZA().__FIREBASE_DEFAULTS__,WA=()=>{if(typeof process>"u"||typeof E_>"u")return;const r=E_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},tS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&Zv(r[1]);return t&&JSON.parse(t)},$c=()=>{try{return YA()||JA()||WA()||tS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Jv=r=>$c()?.emulatorHosts?.[r],eS=r=>{const t=Jv(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),s]:[t.substring(0,i),s]},Wv=()=>$c()?.config,tE=r=>$c()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Nc(JSON.stringify(i)),Nc(JSON.stringify(d)),""].join(".")}const vl={};function rS(){const r={prod:[],emulator:[]};for(const t of Object.keys(vl))vl[t]?r.emulator.push(t):r.prod.push(t);return r}function sS(r){let t=document.getElementById(r),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),i=!0),{created:i,element:t}}let T_=!1;function nE(r,t){if(typeof window>"u"||typeof document>"u"||!Ja(window.location.host)||vl[r]===t||vl[r]||T_)return;vl[r]=t;function i(C){return`__firebase__banner__${C}`}const s="__firebase__banner",h=rS().prod.length>0;function d(){const C=document.getElementById(s);C&&C.remove()}function g(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function y(C,H){C.setAttribute("width","24"),C.setAttribute("id",H),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function _(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{T_=!0,d()},C}function A(C,H){C.setAttribute("id",H),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function D(){const C=sS(s),H=i("text"),$=document.getElementById(H)||document.createElement("span"),rt=i("learnmore"),J=document.getElementById(rt)||document.createElement("a"),Tt=i("preprendIcon"),gt=document.getElementById(Tt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ct=C.element;g(ct),A(J,rt);const Ht=_();y(gt,Tt),ct.append(gt,$,J,Ht),document.body.appendChild(ct)}h?($.innerText="Preview backend disconnected.",gt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(gt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",D):D()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function oS(){const r=$c()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function cS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hS(){const r=an();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function fS(){return!oS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dS(){try{return typeof indexedDB=="object"}catch{return!1}}function mS(){return new Promise((r,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="FirebaseError";class rr extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=gS,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ml.prototype.create)}}class Ml{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},l=`${this.service}/${t}`,h=this.errors[t],d=h?pS(h,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new rr(l,g,s)}}function pS(r,t){return r.replace(yS,(i,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const yS=/\{\$([^}]+)}/g;function _S(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Us(r,t){if(r===t)return!0;const i=Object.keys(r),s=Object.keys(t);for(const l of i){if(!s.includes(l))return!1;const h=r[l],d=t[l];if(A_(h)&&A_(d)){if(!Us(h,d))return!1}else if(h!==d)return!1}for(const l of s)if(!i.includes(l))return!1;return!0}function A_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(r){const t=[];for(const[i,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function vS(r,t){const i=new ES(r,t);return i.subscribe.bind(i)}class ES{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,s){let l;if(t===void 0&&i===void 0&&s===void 0)throw new Error("Missing Observer.");TS(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:s},l.next===void 0&&(l.next=Sd),l.error===void 0&&(l.error=Sd),l.complete===void 0&&(l.complete=Sd);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TS(r,t){if(typeof r!="object"||r===null)return!1;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1}function Sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(r){return r&&r._delegate?r._delegate:r}class ks{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new nS;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(bS(t))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:l});s.resolve(h)}catch{}}}}clearInstance(t=Vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vs){return this.instances.has(t)}getOptions(t=Vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);s===g&&d.resolve(l)}return l}onInit(t,i){const s=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const h=this.instances.get(s);return h&&t(h,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(s)for(const l of s)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:SS(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Vs){return this.component?this.component.multipleInstances?t:Vs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SS(r){return r===Vs?void 0:r}function bS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new AS(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Vt||(Vt={}));const RS={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},IS=Vt.INFO,CS={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},DS=(r,t,...i)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=CS[t];if(l)console[l](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class hm{constructor(t){this.name=t,this._logLevel=IS,this._logHandler=DS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Vt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?RS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...t),this._logHandler(this,Vt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...t),this._logHandler(this,Vt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...t),this._logHandler(this,Vt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...t),this._logHandler(this,Vt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...t),this._logHandler(this,Vt.ERROR,...t)}}const NS=(r,t)=>t.some(i=>r instanceof i);let S_,b_;function OS(){return S_||(S_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VS(){return b_||(b_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iE=new WeakMap,Ld=new WeakMap,rE=new WeakMap,bd=new WeakMap,fm=new WeakMap;function MS(r){const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("success",h),r.removeEventListener("error",d)},h=()=>{i(zr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",h),r.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&iE.set(i,r)}).catch(()=>{}),fm.set(t,r),t}function xS(r){if(Ld.has(r))return;const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",d),r.removeEventListener("abort",d)},h=()=>{i(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",h),r.addEventListener("error",d),r.addEventListener("abort",d)});Ld.set(r,t)}let zd={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return Ld.get(r);if(t==="objectStoreNames")return r.objectStoreNames||rE.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return zr(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function PS(r){zd=r(zd)}function US(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const s=r.call(wd(this),t,...i);return rE.set(s,t.sort?t.sort():[t]),zr(s)}:VS().includes(r)?function(...t){return r.apply(wd(this),t),zr(iE.get(this))}:function(...t){return zr(r.apply(wd(this),t))}}function kS(r){return typeof r=="function"?US(r):(r instanceof IDBTransaction&&xS(r),NS(r,OS())?new Proxy(r,zd):r)}function zr(r){if(r instanceof IDBRequest)return MS(r);if(bd.has(r))return bd.get(r);const t=kS(r);return t!==r&&(bd.set(r,t),fm.set(t,r)),t}const wd=r=>fm.get(r);function LS(r,t,{blocked:i,upgrade:s,blocking:l,terminated:h}={}){const d=indexedDB.open(r,t),g=zr(d);return s&&d.addEventListener("upgradeneeded",y=>{s(zr(d.result),y.oldVersion,y.newVersion,zr(d.transaction),y)}),i&&d.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),g.then(y=>{h&&y.addEventListener("close",()=>h()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const zS=["get","getKey","getAll","getAllKeys","count"],BS=["put","add","delete","clear"],Rd=new Map;function w_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Rd.get(t))return Rd.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,l=BS.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(l||zS.includes(i)))return;const h=async function(d,...g){const y=this.transaction(d,l?"readwrite":"readonly");let _=y.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[i](...g),l&&y.done]))[0]};return Rd.set(t,h),h}PS(r=>({...r,get:(t,i,s)=>w_(t,i)||r.get(t,i,s),has:(t,i)=>!!w_(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(qS(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function qS(r){return r.getComponent()?.type==="VERSION"}const Bd="@firebase/app",R_="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new hm("@firebase/app"),HS="@firebase/app-compat",GS="@firebase/analytics-compat",FS="@firebase/analytics",QS="@firebase/app-check-compat",YS="@firebase/app-check",KS="@firebase/auth",XS="@firebase/auth-compat",$S="@firebase/database",ZS="@firebase/data-connect",JS="@firebase/database-compat",WS="@firebase/functions",tb="@firebase/functions-compat",eb="@firebase/installations",nb="@firebase/installations-compat",ib="@firebase/messaging",rb="@firebase/messaging-compat",sb="@firebase/performance",ab="@firebase/performance-compat",ob="@firebase/remote-config",lb="@firebase/remote-config-compat",ub="@firebase/storage",cb="@firebase/storage-compat",hb="@firebase/firestore",fb="@firebase/ai",db="@firebase/firestore-compat",mb="firebase",gb="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="[DEFAULT]",pb={[Bd]:"fire-core",[HS]:"fire-core-compat",[FS]:"fire-analytics",[GS]:"fire-analytics-compat",[YS]:"fire-app-check",[QS]:"fire-app-check-compat",[KS]:"fire-auth",[XS]:"fire-auth-compat",[$S]:"fire-rtdb",[ZS]:"fire-data-connect",[JS]:"fire-rtdb-compat",[WS]:"fire-fn",[tb]:"fire-fn-compat",[eb]:"fire-iid",[nb]:"fire-iid-compat",[ib]:"fire-fcm",[rb]:"fire-fcm-compat",[sb]:"fire-perf",[ab]:"fire-perf-compat",[ob]:"fire-rc",[lb]:"fire-rc-compat",[ub]:"fire-gcs",[cb]:"fire-gcs-compat",[hb]:"fire-fst",[db]:"fire-fst-compat",[fb]:"fire-vertex","fire-js":"fire-js",[mb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,yb=new Map,qd=new Map;function I_(r,t){try{r.container.addComponent(t)}catch(i){Ji.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function Fa(r){const t=r.name;if(qd.has(t))return Ji.debug(`There were multiple attempts to register component ${t}.`),!1;qd.set(t,r);for(const i of Oc.values())I_(i,r);for(const i of yb.values())I_(i,r);return!0}function dm(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new Ml("app","Firebase",_b);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,i,s){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=gb;function Hd(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const s={name:jd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Br.create("bad-app-name",{appName:String(l)});if(i||(i=Wv()),!i)throw Br.create("no-options");const h=Oc.get(l);if(h){if(Us(i,h.options)&&Us(s,h.config))return h;throw Br.create("duplicate-app",{appName:l})}const d=new wS(l);for(const y of qd.values())d.addComponent(y);const g=new vb(i,s,d);return Oc.set(l,g),g}function sE(r=jd){const t=Oc.get(r);if(!t&&r===jd&&Wv())return Hd();if(!t)throw Br.create("no-app",{appName:r});return t}function jr(r,t,i){let s=pb[r]??r;i&&(s+=`-${i}`);const l=s.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ji.warn(d.join(" "));return}Fa(new ks(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="firebase-heartbeat-database",Tb=1,wl="firebase-heartbeat-store";let Id=null;function aE(){return Id||(Id=LS(Eb,Tb,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(wl)}catch(i){console.warn(i)}}}}).catch(r=>{throw Br.create("idb-open",{originalErrorMessage:r.message})})),Id}async function Ab(r){try{const i=(await aE()).transaction(wl),s=await i.objectStore(wl).get(oE(r));return await i.done,s}catch(t){if(t instanceof rr)Ji.warn(t.message);else{const i=Br.create("idb-get",{originalErrorMessage:t?.message});Ji.warn(i.message)}}}async function C_(r,t){try{const s=(await aE()).transaction(wl,"readwrite");await s.objectStore(wl).put(t,oE(r)),await s.done}catch(i){if(i instanceof rr)Ji.warn(i.message);else{const s=Br.create("idb-set",{originalErrorMessage:i?.message});Ji.warn(s.message)}}}function oE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=1024,bb=30;class wb{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Ib(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=D_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>bb){const l=Cb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ji.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=D_(),{heartbeatsToSend:i,unsentEntries:s}=Rb(this._heartbeatsCache.heartbeats),l=Nc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ji.warn(t),""}}}function D_(){return new Date().toISOString().substring(0,10)}function Rb(r,t=Sb){const i=[];let s=r.slice();for(const l of r){const h=i.find(d=>d.agent===l.agent);if(h){if(h.dates.push(l.date),N_(i)>t){h.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),N_(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class Ib{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dS()?mS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await Ab(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return C_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return C_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function N_(r){return Nc(JSON.stringify({version:2,heartbeats:r})).length}function Cb(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(r){Fa(new ks("platform-logger",t=>new jS(t),"PRIVATE")),Fa(new ks("heartbeat",t=>new wb(t),"PRIVATE")),jr(Bd,R_,r),jr(Bd,R_,"esm2020"),jr("fire-js","")}Db("");var Nb="firebase",Ob="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(Nb,Ob,"app");function lE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vb=lE,uE=new Ml("auth","Firebase",lE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new hm("@firebase/auth");function Mb(r,...t){Vc.logLevel<=Vt.WARN&&Vc.warn(`Auth (${Wa}): ${r}`,...t)}function Ec(r,...t){Vc.logLevel<=Vt.ERROR&&Vc.error(`Auth (${Wa}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(r,...t){throw mm(r,...t)}function mi(r,...t){return mm(r,...t)}function cE(r,t,i){const s={...Vb(),[t]:i};return new Ml("auth","Firebase",s).create(t,{appName:r.name})}function Zi(r){return cE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mm(r,...t){if(typeof r!="string"){const i=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(i,...s)}return uE.create(r,...t)}function vt(r,t,...i){if(!r)throw mm(t,...i)}function Xi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Ec(t),new Error(t)}function tr(r,t){r||Xi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(){return typeof self<"u"&&self.location?.href||""}function xb(){return O_()==="http:"||O_()==="https:"}function O_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xb()||uS()||"connection"in navigator)?navigator.onLine:!0}function Ub(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(t,i){this.shortDelay=t,this.longDelay=i,tr(i>t,"Short delay should be less than long delay!"),this.isMobile=aS()||cS()}get(){return Pb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(r,t){tr(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{static initialize(t,i,s){this.fetchImpl=t,i&&(this.headersImpl=i),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zb=new Pl(3e4,6e4);function Ul(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function to(r,t,i,s,l={}){return fE(r,l,async()=>{let h={},d={};s&&(t==="GET"?d=s:h={body:JSON.stringify(s)});const g=xl({key:r.config.apiKey,...d}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const _={method:t,headers:y,...h};return lS()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Ja(r.emulatorConfig.host)&&(_.credentials="include"),hE.fetch()(await dE(r,r.config.apiHost,i,g),_)})}async function fE(r,t,i){r._canInitEmulator=!1;const s={...kb,...t};try{const l=new Bb(r),h=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await h.json();if("needConfirmation"in d)throw mc(r,"account-exists-with-different-credential",d);if(h.ok&&!("errorMessage"in d))return d;{const g=h.ok?d.errorMessage:d.error.message,[y,_]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw mc(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw mc(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw mc(r,"user-disabled",d);const A=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw cE(r,A,_);Wi(r,A)}}catch(l){if(l instanceof rr)throw l;Wi(r,"network-request-failed",{message:String(l)})}}async function pm(r,t,i,s,l={}){const h=await to(r,t,i,s,l);return"mfaPendingCredential"in h&&Wi(r,"multi-factor-auth-required",{_serverResponse:h}),h}async function dE(r,t,i,s){const l=`${t}${i}?${s}`,h=r,d=h.config.emulator?gm(r.config,l):`${r.config.apiScheme}://${l}`;return Lb.includes(i)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(d).toString():d}class Bb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,s)=>{this.timer=setTimeout(()=>s(mi(this.auth,"network-request-failed")),zb.get())})}}function mc(r,t,i){const s={appName:r.name};i.email&&(s.email=i.email),i.phoneNumber&&(s.phoneNumber=i.phoneNumber);const l=mi(r,t,s);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(r,t){return to(r,"POST","/v1/accounts:delete",t)}async function Mc(r,t){return to(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function qb(r,t=!1){const i=on(r),s=await i.getIdToken(t),l=ym(s);vt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,d=h?.sign_in_provider;return{claims:l,token:s,authTime:El(Cd(l.auth_time)),issuedAtTime:El(Cd(l.iat)),expirationTime:El(Cd(l.exp)),signInProvider:d||null,signInSecondFactor:h?.sign_in_second_factor||null}}function Cd(r){return Number(r)*1e3}function ym(r){const[t,i,s]=r.split(".");if(t===void 0||i===void 0||s===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const l=Zv(i);return l?JSON.parse(l):(Ec("Failed to decode base64 JWT payload"),null)}catch(l){return Ec("Caught error parsing JWT payload as JSON",l?.toString()),null}}function V_(r){const t=ym(r);return vt(t,"internal-error"),vt(typeof t.exp<"u","internal-error"),vt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(r,t,i=!1){if(i)return t;try{return await t}catch(s){throw s instanceof rr&&Hb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Hb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=El(this.lastLoginAt),this.creationTime=El(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(r){const t=r.auth,i=await r.getIdToken(),s=await Rl(r,Mc(t,{idToken:i}));vt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const h=l.providerUserInfo?.length?mE(l.providerUserInfo):[],d=Qb(r.providerData,h),g=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!d?.length,_=g?y:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Fd(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,A)}async function Fb(r){const t=on(r);await xc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Qb(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function mE(r){return r.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(r,t){const i=await fE(r,{},async()=>{const s=xl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=r.config,d=await dE(r,l,"/v1/token",`key=${h}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:s};return r.emulatorConfig&&Ja(r.emulatorConfig.host)&&(y.credentials="include"),hE.fetch()(d,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function Kb(r,t){return to(r,"POST","/v2/accounts:revokeToken",Ul(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){vt(t.idToken,"internal-error"),vt(typeof t.idToken<"u","internal-error"),vt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):V_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){vt(t.length!==0,"internal-error");const i=V_(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(vt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:s,refreshToken:l,expiresIn:h}=await Yb(t,i);this.updateTokensAndExpiration(s,l,Number(h))}updateTokensAndExpiration(t,i,s){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,i){const{refreshToken:s,accessToken:l,expirationTime:h}=i,d=new Ba;return s&&(vt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(vt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),h&&(vt(typeof h=="number","internal-error",{appName:t}),d.expirationTime=h),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(r,t){vt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class $n{constructor({uid:t,auth:i,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new Gb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Fd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await Rl(this,this.stsTokenManager.getToken(this.auth,t));return vt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return qb(this,t)}reload(){return Fb(this)}_assign(t){this!==t&&(vt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new $n({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),i&&await xc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Zi(this.auth));const t=await this.getIdToken();return await Rl(this,jb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const s=i.displayName??void 0,l=i.email??void 0,h=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,y=i._redirectEventId??void 0,_=i.createdAt??void 0,A=i.lastLoginAt??void 0,{uid:D,emailVerified:C,isAnonymous:H,providerData:$,stsTokenManager:rt}=i;vt(D&&rt,t,"internal-error");const J=Ba.fromJSON(this.name,rt);vt(typeof D=="string",t,"internal-error"),Mr(s,t.name),Mr(l,t.name),vt(typeof C=="boolean",t,"internal-error"),vt(typeof H=="boolean",t,"internal-error"),Mr(h,t.name),Mr(d,t.name),Mr(g,t.name),Mr(y,t.name),Mr(_,t.name),Mr(A,t.name);const Tt=new $n({uid:D,auth:t,email:l,emailVerified:C,displayName:s,isAnonymous:H,photoURL:d,phoneNumber:h,tenantId:g,stsTokenManager:J,createdAt:_,lastLoginAt:A});return $&&Array.isArray($)&&(Tt.providerData=$.map(gt=>({...gt}))),y&&(Tt._redirectEventId=y),Tt}static async _fromIdTokenResponse(t,i,s=!1){const l=new Ba;l.updateFromServerResponse(i);const h=new $n({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await xc(h),h}static async _fromGetAccountInfoResponse(t,i,s){const l=i.users[0];vt(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?mE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!h?.length,g=new Ba;g.updateFromIdToken(s);const y=new $n({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Fd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Map;function $i(r){tr(r instanceof Function,"Expected a class definition");let t=M_.get(r);return t?(tr(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,M_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}gE.type="NONE";const x_=gE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(r,t,i){return`firebase:${r}:${t}:${i}`}class ja{constructor(t,i,s){this.persistence=t,this.auth=i,this.userKey=s;const{config:l,name:h}=this.auth;this.fullUserKey=Tc(this.userKey,l.apiKey,h),this.fullPersistenceKey=Tc("persistence",l.apiKey,h),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Mc(this.auth,{idToken:t}).catch(()=>{});return i?$n._fromGetAccountInfoResponse(this.auth,i,t):null}return $n._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,s="authUser"){if(!i.length)return new ja($i(x_),t,s);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let h=l[0]||$i(x_);const d=Tc(s,t.config.apiKey,t.name);let g=null;for(const _ of i)try{const A=await _._get(d);if(A){let D;if(typeof A=="string"){const C=await Mc(t,{idToken:A}).catch(()=>{});if(!C)break;D=await $n._fromGetAccountInfoResponse(t,C,A)}else D=$n._fromJSON(t,A);_!==h&&(g=D),h=_;break}}catch{}const y=l.filter(_=>_._shouldAllowMigration);return!h._shouldAllowMigration||!y.length?new ja(h,t,s):(h=y[0],g&&await h._set(d,g.toJSON()),await Promise.all(i.map(async _=>{if(_!==h)try{await _._remove(d)}catch{}})),new ja(h,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(pE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(TE(t))return"Blackberry";if(AE(t))return"Webos";if(yE(t))return"Safari";if((t.includes("chrome/")||_E(t))&&!t.includes("edge/"))return"Chrome";if(EE(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(i);if(s?.length===2)return s[1]}return"Other"}function pE(r=an()){return/firefox\//i.test(r)}function yE(r=an()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _E(r=an()){return/crios\//i.test(r)}function vE(r=an()){return/iemobile/i.test(r)}function EE(r=an()){return/android/i.test(r)}function TE(r=an()){return/blackberry/i.test(r)}function AE(r=an()){return/webos/i.test(r)}function _m(r=an()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Xb(r=an()){return _m(r)&&!!window.navigator?.standalone}function $b(){return hS()&&document.documentMode===10}function SE(r=an()){return _m(r)||EE(r)||AE(r)||TE(r)||/windows phone/i.test(r)||vE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(r,t=[]){let i;switch(r){case"Browser":i=P_(an());break;case"Worker":i=`${P_(an())}-${r}`;break;default:i=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Wa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const s=h=>new Promise((d,g)=>{try{const y=t(h);d(y)}catch(y){g(y)}});s.onAbort=i,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const s of this.queue)await s(t),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(r,t={}){return to(r,"GET","/v2/passwordPolicy",Ul(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=6;class t1{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??Wb,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(i.meetsMinPasswordLength=t.length>=s),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,i,s,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(t,i,s,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U_(this),this.idTokenSubscription=new U_(this),this.beforeStateQueue=new Zb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=$i(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ja.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Mc(this,{idToken:t}),s=await $n._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(s)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(jn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(t);(!h||h===d)&&g?.user&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await xc(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Ub()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jn(this.app))return Promise.reject(Zi(this));const i=t?on(t):null;return i&&vt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&vt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jn(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Jb(this),i=new t1(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ml("auth","Firebase",t())}onAuthStateChanged(t,i,s){return this.registerStateListener(this.authStateSubscription,t,i,s)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,s){return this.registerStateListener(this.idTokenSubscription,t,i,s)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(s.tenantId=this.tenantId),await Kb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const s=await this.getOrInitRedirectPersistenceManager(i);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&$i(t)||this._popupRedirectResolver;vt(i,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[$i(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,s,l){if(this._deleted)return()=>{};const h=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(g,this,"internal-error"),g.then(()=>{d||h(this.currentUser)}),typeof i=="function"){const y=t.addObserver(i,s,l);return()=>{d=!0,y()}}else{const y=t.addObserver(i);return()=>{d=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=bE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Mb(`Error while retrieving App Check token: ${t.error}`),t?.token}}function kl(r){return on(r)}class U_{constructor(t){this.auth=t,this.observer=null,this.addObserver=vS(i=>this.observer=i)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n1(r){vm=r}function i1(r){return vm.loadJS(r)}function r1(){return vm.gapiScript}function s1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(r,t){const i=dm(r,"auth");if(i.isInitialized()){const l=i.getImmediate(),h=i.getOptions();if(Us(h,t??{}))return l;Wi(l,"already-initialized")}return i.initialize({options:t})}function o1(r,t){const i=t?.persistence||[],s=(Array.isArray(i)?i:[i]).map($i);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function l1(r,t,i){const s=kl(r);vt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,h=wE(t),{host:d,port:g}=u1(t),y=g===null?"":`:${g}`,_={url:`${h}//${d}${y}/`},A=Object.freeze({host:d,port:g,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){vt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),vt(Us(_,s.config.emulator)&&Us(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,Ja(d)?(eE(`${h}//${d}${y}`),nE("Auth",!0)):c1()}function wE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function u1(r){const t=wE(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!i)return{host:"",port:null};const s=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const h=l[1];return{host:h,port:k_(s.substr(h.length+1))}}else{const[h,d]=s.split(":");return{host:h,port:k_(d)}}}function k_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function c1(){function r(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Xi("not implemented")}_getIdTokenResponse(t){return Xi("not implemented")}_linkToIdToken(t,i){return Xi("not implemented")}_getReauthenticationResolver(t){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(r,t){return pm(r,"POST","/v1/accounts:signInWithIdp",Ul(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="http://localhost";class Ls extends RE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Ls(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Wi("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...h}=i;if(!s||!l)return null;const d=new Ls(s,l);return d.idToken=h.idToken||void 0,d.accessToken=h.accessToken||void 0,d.secret=h.secret,d.nonce=h.nonce,d.pendingToken=h.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return qa(t,i)}_linkToIdToken(t,i){const s=this.buildRequest();return s.idToken=i,qa(t,s)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,qa(t,i)}buildRequest(){const t={requestUri:h1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=xl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends IE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Ll{constructor(){super("facebook.com")}static credential(t){return Ls._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xr.credentialFromTaggedObject(t)}static credentialFromError(t){return xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xr.credential(t.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Ls._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Pr.credentialFromTaggedObject(t)}static credentialFromError(t){return Pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:s}=t;if(!i&&!s)return null;try{return Pr.credential(i,s)}catch{return null}}}Pr.GOOGLE_SIGN_IN_METHOD="google.com";Pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Ll{constructor(){super("github.com")}static credential(t){return Ls._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ur.credentialFromTaggedObject(t)}static credentialFromError(t){return Ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ur.credential(t.oauthAccessToken)}catch{return null}}}Ur.GITHUB_SIGN_IN_METHOD="github.com";Ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ll{constructor(){super("twitter.com")}static credential(t,i){return Ls._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return kr.credentialFromTaggedObject(t)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:s}=t;if(!i||!s)return null;try{return kr.credential(i,s)}catch{return null}}}kr.TWITTER_SIGN_IN_METHOD="twitter.com";kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(r,t){return pm(r,"POST","/v1/accounts:signUp",Ul(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,s,l=!1){const h=await $n._fromIdTokenResponse(t,s,l),d=L_(s);return new er({user:h,providerId:d,_tokenResponse:s,operationType:i})}static async _forOperation(t,i,s){await t._updateTokensIfNecessary(s,!0);const l=L_(s);return new er({user:t,providerId:l,_tokenResponse:s,operationType:i})}}function L_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(r){if(jn(r.app))return Promise.reject(Zi(r));const t=kl(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new er({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await f1(t,{returnSecureToken:!0}),s=await er._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends rr{constructor(t,i,s,l){super(i.code,i.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,i,s,l){return new Pc(t,i,s,l)}}function CE(r,t,i,s){return(t==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(r,h,t,s):h})}async function d1(r,t,i=!1){const s=await Rl(r,t._linkToIdToken(r.auth,await r.getIdToken()),i);return er._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(r,t,i=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(Zi(s));const l="reauthenticate";try{const h=await Rl(r,CE(s,l,t,r),i);vt(h.idToken,s,"internal-error");const d=ym(h.idToken);vt(d,s,"internal-error");const{sub:g}=d;return vt(r.uid===g,s,"user-mismatch"),er._forOperation(r,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&Wi(s,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(r,t,i=!1){if(jn(r.app))return Promise.reject(Zi(r));const s="signIn",l=await CE(r,s,t),h=await er._fromIdTokenResponse(r,s,l);return i||await r._updateCurrentUser(h.user),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(r,t){return pm(r,"POST","/v1/accounts:signInWithCustomToken",Ul(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(r,t){if(jn(r.app))return Promise.reject(Zi(r));const i=kl(r),s=await p1(i,{token:t,returnSecureToken:!0}),l=await er._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(l.user),l}function _1(r,t,i,s){return on(r).onIdTokenChanged(t,i,s)}function v1(r,t,i){return on(r).beforeAuthStateChanged(t,i)}function z_(r,t,i,s){return on(r).onAuthStateChanged(t,i,s)}const Uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Uc,"1"),this.storage.removeItem(Uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=1e3,T1=10;class NE extends DE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const s=this.storage.getItem(i),l=this.localCache[i];s!==l&&t(i,l,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const s=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!i&&this.localCache[s]===d||this.notifyListeners(s,d)},h=this.storage.getItem(s);$b()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,T1):l()}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},E1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}NE.type="LOCAL";const A1=NE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE extends DE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}OE.type="SESSION";const VE=OE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const s=new Zc(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:s,eventType:l,data:h}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async _=>_(i.origin,h)),y=await S1(g);i.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:y})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(r="",t=10){let i="";for(let s=0;s<t;s++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,d;return new Promise((g,y)=>{const _=Em("",20);l.port1.start();const A=setTimeout(()=>{y(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(D){const C=D;if(C.data.eventId===_)switch(C.data.status){case"ack":clearTimeout(A),h=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),g(C.data.response);break;default:clearTimeout(A),clearTimeout(h),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:_,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function w1(r){gi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function R1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I1(){return navigator?.serviceWorker?.controller||null}function C1(){return ME()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="firebaseLocalStorageDb",D1=1,kc="firebaseLocalStorage",PE="fbase_key";class zl{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Jc(r,t){return r.transaction([kc],t?"readwrite":"readonly").objectStore(kc)}function N1(){const r=indexedDB.deleteDatabase(xE);return new zl(r).toPromise()}function Qd(){const r=indexedDB.open(xE,D1);return new Promise((t,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(kc,{keyPath:PE})}catch(l){i(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(kc)?t(s):(s.close(),await N1(),t(await Qd()))})})}async function B_(r,t,i){const s=Jc(r,!0).put({[PE]:t,value:i});return new zl(s).toPromise()}async function O1(r,t){const i=Jc(r,!1).get(t),s=await new zl(i).toPromise();return s===void 0?null:s.value}function j_(r,t){const i=Jc(r,!0).delete(t);return new zl(i).toPromise()}const V1=800,M1=3;class UE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qd(),this.db)}async _withRetries(t){let i=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(i++>M1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ME()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zc._getInstance(C1()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await R1(),!this.activeServiceWorker)return;this.sender=new b1(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||I1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Qd();return await B_(t,Uc,"1"),await j_(t,Uc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>B_(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(s=>O1(s,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>j_(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=Jc(l,!1).getAll();return new zl(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UE.type="LOCAL";const x1=UE;new Pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(r,t){return t?$i(t):(vt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends RE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qa(t,this._buildIdpRequest())}_linkToIdToken(t,i){return qa(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return qa(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function U1(r){return g1(r.auth,new Tm(r),r.bypassAuthState)}function k1(r){const{auth:t,user:i}=r;return vt(i,t,"internal-error"),m1(i,new Tm(r),r.bypassAuthState)}async function L1(r){const{auth:t,user:i}=r;return vt(i,t,"internal-error"),d1(i,new Tm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(t,i,s,l,h=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:s,postBody:l,tenantId:h,error:d,type:g}=t;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:i,sessionId:s,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return U1;case"linkViaPopup":case"linkViaRedirect":return L1;case"reauthViaPopup":case"reauthViaRedirect":return k1;default:Wi(this.auth,"internal-error")}}resolve(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Pl(2e3,1e4);class za extends kE{constructor(t,i,s,l,h){super(t,i,l,h),this.provider=s,this.authWindow=null,this.pollId=null,za.currentPopupAction&&za.currentPopupAction.cancel(),za.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return vt(t,this.auth,"internal-error"),t}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const t=Em();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,za.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,z1.get())};t()}}za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="pendingRedirect",Ac=new Map;class j1 extends kE{constructor(t,i,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,s),this.eventId=null}async execute(){let t=Ac.get(this.auth._key());if(!t){try{const s=await q1(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(i){t=()=>Promise.reject(i)}Ac.set(this.auth._key(),t)}return this.bypassAuthState||Ac.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q1(r,t){const i=F1(t),s=G1(r);if(!await s._isAvailable())return!1;const l=await s._get(i)==="true";return await s._remove(i),l}function H1(r,t){Ac.set(r._key(),t)}function G1(r){return $i(r._redirectPersistence)}function F1(r){return Tc(B1,r.config.apiKey,r.name)}async function Q1(r,t,i=!1){if(jn(r.app))return Promise.reject(Zi(r));const s=kl(r),l=P1(s,t),d=await new j1(s,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=600*1e3;class K1{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(i=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!X1(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!LE(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";i.onError(mi(this.auth,s))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const s=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Y1&&this.cachedEventUids.clear(),this.cachedEventUids.has(q_(t))}saveEventToCache(t){this.cachedEventUids.add(q_(t)),this.lastProcessedEventTime=Date.now()}}function q_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function LE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function X1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(r,t={}){return to(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J1=/^https?/;async function W1(r){if(r.config.emulator)return;const{authorizedDomains:t}=await $1(r);for(const i of t)try{if(tw(i))return}catch{}Wi(r,"unauthorized-domain")}function tw(r){const t=Gd(),{protocol:i,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===s}if(!J1.test(i))return!1;if(Z1.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new Pl(3e4,6e4);function H_(){const r=gi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function nw(r){return new Promise((t,i)=>{function s(){H_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{H_(),i(mi(r,"network-request-failed"))},timeout:ew.get()})}if(gi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(gi().gapi?.load)s();else{const l=s1("iframefcb");return gi()[l]=()=>{gapi.load?s():i(mi(r,"network-request-failed"))},i1(`${r1()}?onload=${l}`).catch(h=>i(h))}}).catch(t=>{throw Sc=null,t})}let Sc=null;function iw(r){return Sc=Sc||nw(r),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Pl(5e3,15e3),sw="__/auth/iframe",aw="emulator/auth/iframe",ow={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uw(r){const t=r.config;vt(t.authDomain,r,"auth-domain-config-required");const i=t.emulator?gm(t,aw):`https://${r.config.authDomain}/${sw}`,s={apiKey:t.apiKey,appName:r.name,v:Wa},l=lw.get(r.config.apiHost);l&&(s.eid=l);const h=r._getFrameworks();return h.length&&(s.fw=h.join(",")),`${i}?${xl(s).slice(1)}`}async function cw(r){const t=await iw(r),i=gi().gapi;return vt(i,r,"internal-error"),t.open({where:document.body,url:uw(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ow,dontclear:!0},s=>new Promise(async(l,h)=>{await s.restyle({setHideOnLeave:!1});const d=mi(r,"network-request-failed"),g=gi().setTimeout(()=>{h(d)},rw.get());function y(){gi().clearTimeout(g),l(s)}s.ping(y).then(y,()=>{h(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fw=500,dw=600,mw="_blank",gw="http://localhost";class G_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pw(r,t,i,s=fw,l=dw){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const y={...hw,width:s.toString(),height:l.toString(),top:h,left:d},_=an().toLowerCase();i&&(g=_E(_)?mw:i),pE(_)&&(t=t||gw,y.scrollbars="yes");const A=Object.entries(y).reduce((C,[H,$])=>`${C}${H}=${$},`,"");if(Xb(_)&&g!=="_self")return yw(t||"",g),new G_(null);const D=window.open(t||"",g,A);vt(D,r,"popup-blocked");try{D.focus()}catch{}return new G_(D)}function yw(r,t){const i=document.createElement("a");i.href=r,i.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="__/auth/handler",vw="emulator/auth/handler",Ew=encodeURIComponent("fac");async function F_(r,t,i,s,l,h){vt(r.config.authDomain,r,"auth-domain-config-required"),vt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:s,v:Wa,eventId:l};if(t instanceof IE){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",_S(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,D]of Object.entries({}))d[A]=D}if(t instanceof Ll){const A=t.getScopes().filter(D=>D!=="");A.length>0&&(d.scopes=A.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const y=await r._getAppCheckToken(),_=y?`#${Ew}=${encodeURIComponent(y)}`:"";return`${Tw(r)}?${xl(g).slice(1)}${_}`}function Tw({config:r}){return r.emulator?gm(r,vw):`https://${r.authDomain}/${_w}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="webStorageSupport";class Aw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VE,this._completeRedirectFn=Q1,this._overrideRedirectResult=H1}async _openPopup(t,i,s,l){tr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await F_(t,i,s,Gd(),l);return pw(t,h,Em())}async _openRedirect(t,i,s,l){await this._originValidation(t);const h=await F_(t,i,s,Gd(),l);return w1(h),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:h}=this.eventManagers[i];return l?Promise.resolve(l):(tr(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(t);return this.eventManagers[i]={promise:s},s.catch(()=>{delete this.eventManagers[i]}),s}async initAndGetManager(t){const i=await cw(t),s=new K1(t);return i.register("authEvent",l=>(vt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=i,s}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Nd,{type:Nd},l=>{const h=l?.[0]?.[Nd];h!==void 0&&i(!!h),Wi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=W1(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return SE()||yE()||_m()}}const Sw=Aw;var Q_="@firebase/auth",Y_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rw(r){Fa(new ks("auth",(t,{options:i})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;vt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bE(r)},_=new e1(s,l,h,y);return o1(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,s)=>{t.getProvider("auth-internal").initialize()})),Fa(new ks("auth-internal",t=>{const i=kl(t.getProvider("auth").getImmediate());return(s=>new bw(s))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(Q_,Y_,ww(r)),jr(Q_,Y_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=300,Cw=tE("authIdTokenMaxAge")||Iw;let K_=null;const Dw=r=>async t=>{const i=t&&await t.getIdTokenResult(),s=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(s&&s>Cw)return;const l=i?.token;K_!==l&&(K_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function X_(r=sE()){const t=dm(r,"auth");if(t.isInitialized())return t.getImmediate();const i=a1(r,{popupRedirectResolver:Sw,persistence:[x1,A1,VE]}),s=tE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const d=Dw(h.toString());v1(i,d,()=>d(i.currentUser)),_1(i,g=>d(g))}}const l=Jv("auth");return l&&l1(i,`http://${l}`),i}function Nw(){return document.getElementsByTagName("head")?.[0]??document}n1({loadJS(r){return new Promise((t,i)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const h=mi("internal-error");h.customData=l,i(h)},s.type="text/javascript",s.charset="UTF-8",Nw().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rw("Browser");var $_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,zE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,S){function R(){}R.prototype=S.prototype,O.D=S.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(V,M,x){for(var w=Array(arguments.length-2),De=2;De<arguments.length;De++)w[De-2]=arguments[De];return S.prototype[M].apply(V,w)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,i),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(O,S,R){R||(R=0);var V=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)V[M]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(M=0;16>M;++M)V[M]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=O.g[0],R=O.g[1],M=O.g[2];var x=O.g[3],w=S+(x^R&(M^x))+V[0]+3614090360&4294967295;S=R+(w<<7&4294967295|w>>>25),w=x+(M^S&(R^M))+V[1]+3905402710&4294967295,x=S+(w<<12&4294967295|w>>>20),w=M+(R^x&(S^R))+V[2]+606105819&4294967295,M=x+(w<<17&4294967295|w>>>15),w=R+(S^M&(x^S))+V[3]+3250441966&4294967295,R=M+(w<<22&4294967295|w>>>10),w=S+(x^R&(M^x))+V[4]+4118548399&4294967295,S=R+(w<<7&4294967295|w>>>25),w=x+(M^S&(R^M))+V[5]+1200080426&4294967295,x=S+(w<<12&4294967295|w>>>20),w=M+(R^x&(S^R))+V[6]+2821735955&4294967295,M=x+(w<<17&4294967295|w>>>15),w=R+(S^M&(x^S))+V[7]+4249261313&4294967295,R=M+(w<<22&4294967295|w>>>10),w=S+(x^R&(M^x))+V[8]+1770035416&4294967295,S=R+(w<<7&4294967295|w>>>25),w=x+(M^S&(R^M))+V[9]+2336552879&4294967295,x=S+(w<<12&4294967295|w>>>20),w=M+(R^x&(S^R))+V[10]+4294925233&4294967295,M=x+(w<<17&4294967295|w>>>15),w=R+(S^M&(x^S))+V[11]+2304563134&4294967295,R=M+(w<<22&4294967295|w>>>10),w=S+(x^R&(M^x))+V[12]+1804603682&4294967295,S=R+(w<<7&4294967295|w>>>25),w=x+(M^S&(R^M))+V[13]+4254626195&4294967295,x=S+(w<<12&4294967295|w>>>20),w=M+(R^x&(S^R))+V[14]+2792965006&4294967295,M=x+(w<<17&4294967295|w>>>15),w=R+(S^M&(x^S))+V[15]+1236535329&4294967295,R=M+(w<<22&4294967295|w>>>10),w=S+(M^x&(R^M))+V[1]+4129170786&4294967295,S=R+(w<<5&4294967295|w>>>27),w=x+(R^M&(S^R))+V[6]+3225465664&4294967295,x=S+(w<<9&4294967295|w>>>23),w=M+(S^R&(x^S))+V[11]+643717713&4294967295,M=x+(w<<14&4294967295|w>>>18),w=R+(x^S&(M^x))+V[0]+3921069994&4294967295,R=M+(w<<20&4294967295|w>>>12),w=S+(M^x&(R^M))+V[5]+3593408605&4294967295,S=R+(w<<5&4294967295|w>>>27),w=x+(R^M&(S^R))+V[10]+38016083&4294967295,x=S+(w<<9&4294967295|w>>>23),w=M+(S^R&(x^S))+V[15]+3634488961&4294967295,M=x+(w<<14&4294967295|w>>>18),w=R+(x^S&(M^x))+V[4]+3889429448&4294967295,R=M+(w<<20&4294967295|w>>>12),w=S+(M^x&(R^M))+V[9]+568446438&4294967295,S=R+(w<<5&4294967295|w>>>27),w=x+(R^M&(S^R))+V[14]+3275163606&4294967295,x=S+(w<<9&4294967295|w>>>23),w=M+(S^R&(x^S))+V[3]+4107603335&4294967295,M=x+(w<<14&4294967295|w>>>18),w=R+(x^S&(M^x))+V[8]+1163531501&4294967295,R=M+(w<<20&4294967295|w>>>12),w=S+(M^x&(R^M))+V[13]+2850285829&4294967295,S=R+(w<<5&4294967295|w>>>27),w=x+(R^M&(S^R))+V[2]+4243563512&4294967295,x=S+(w<<9&4294967295|w>>>23),w=M+(S^R&(x^S))+V[7]+1735328473&4294967295,M=x+(w<<14&4294967295|w>>>18),w=R+(x^S&(M^x))+V[12]+2368359562&4294967295,R=M+(w<<20&4294967295|w>>>12),w=S+(R^M^x)+V[5]+4294588738&4294967295,S=R+(w<<4&4294967295|w>>>28),w=x+(S^R^M)+V[8]+2272392833&4294967295,x=S+(w<<11&4294967295|w>>>21),w=M+(x^S^R)+V[11]+1839030562&4294967295,M=x+(w<<16&4294967295|w>>>16),w=R+(M^x^S)+V[14]+4259657740&4294967295,R=M+(w<<23&4294967295|w>>>9),w=S+(R^M^x)+V[1]+2763975236&4294967295,S=R+(w<<4&4294967295|w>>>28),w=x+(S^R^M)+V[4]+1272893353&4294967295,x=S+(w<<11&4294967295|w>>>21),w=M+(x^S^R)+V[7]+4139469664&4294967295,M=x+(w<<16&4294967295|w>>>16),w=R+(M^x^S)+V[10]+3200236656&4294967295,R=M+(w<<23&4294967295|w>>>9),w=S+(R^M^x)+V[13]+681279174&4294967295,S=R+(w<<4&4294967295|w>>>28),w=x+(S^R^M)+V[0]+3936430074&4294967295,x=S+(w<<11&4294967295|w>>>21),w=M+(x^S^R)+V[3]+3572445317&4294967295,M=x+(w<<16&4294967295|w>>>16),w=R+(M^x^S)+V[6]+76029189&4294967295,R=M+(w<<23&4294967295|w>>>9),w=S+(R^M^x)+V[9]+3654602809&4294967295,S=R+(w<<4&4294967295|w>>>28),w=x+(S^R^M)+V[12]+3873151461&4294967295,x=S+(w<<11&4294967295|w>>>21),w=M+(x^S^R)+V[15]+530742520&4294967295,M=x+(w<<16&4294967295|w>>>16),w=R+(M^x^S)+V[2]+3299628645&4294967295,R=M+(w<<23&4294967295|w>>>9),w=S+(M^(R|~x))+V[0]+4096336452&4294967295,S=R+(w<<6&4294967295|w>>>26),w=x+(R^(S|~M))+V[7]+1126891415&4294967295,x=S+(w<<10&4294967295|w>>>22),w=M+(S^(x|~R))+V[14]+2878612391&4294967295,M=x+(w<<15&4294967295|w>>>17),w=R+(x^(M|~S))+V[5]+4237533241&4294967295,R=M+(w<<21&4294967295|w>>>11),w=S+(M^(R|~x))+V[12]+1700485571&4294967295,S=R+(w<<6&4294967295|w>>>26),w=x+(R^(S|~M))+V[3]+2399980690&4294967295,x=S+(w<<10&4294967295|w>>>22),w=M+(S^(x|~R))+V[10]+4293915773&4294967295,M=x+(w<<15&4294967295|w>>>17),w=R+(x^(M|~S))+V[1]+2240044497&4294967295,R=M+(w<<21&4294967295|w>>>11),w=S+(M^(R|~x))+V[8]+1873313359&4294967295,S=R+(w<<6&4294967295|w>>>26),w=x+(R^(S|~M))+V[15]+4264355552&4294967295,x=S+(w<<10&4294967295|w>>>22),w=M+(S^(x|~R))+V[6]+2734768916&4294967295,M=x+(w<<15&4294967295|w>>>17),w=R+(x^(M|~S))+V[13]+1309151649&4294967295,R=M+(w<<21&4294967295|w>>>11),w=S+(M^(R|~x))+V[4]+4149444226&4294967295,S=R+(w<<6&4294967295|w>>>26),w=x+(R^(S|~M))+V[11]+3174756917&4294967295,x=S+(w<<10&4294967295|w>>>22),w=M+(S^(x|~R))+V[2]+718787259&4294967295,M=x+(w<<15&4294967295|w>>>17),w=R+(x^(M|~S))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(M+(w<<21&4294967295|w>>>11))&4294967295,O.g[2]=O.g[2]+M&4294967295,O.g[3]=O.g[3]+x&4294967295}s.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var R=S-this.blockSize,V=this.B,M=this.h,x=0;x<S;){if(M==0)for(;x<=R;)l(this,O,x),x+=this.blockSize;if(typeof O=="string"){for(;x<S;)if(V[M++]=O.charCodeAt(x++),M==this.blockSize){l(this,V),M=0;break}}else for(;x<S;)if(V[M++]=O[x++],M==this.blockSize){l(this,V),M=0;break}}this.h=M,this.o+=S},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var R=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=R&255,R/=256;for(this.u(O),O=Array(16),S=R=0;4>S;++S)for(var V=0;32>V;V+=8)O[R++]=this.g[S]>>>V&255;return O};function h(O,S){var R=g;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=S(O)}function d(O,S){this.h=S;for(var R=[],V=!0,M=O.length-1;0<=M;M--){var x=O[M]|0;V&&x==S||(R[M]=x,V=!1)}this.g=R}var g={};function y(O){return-128<=O&&128>O?h(O,function(S){return new d([S|0],0>S?-1:0)}):new d([O|0],0>O?-1:0)}function _(O){if(isNaN(O)||!isFinite(O))return D;if(0>O)return J(_(-O));for(var S=[],R=1,V=0;O>=R;V++)S[V]=O/R|0,R*=4294967296;return new d(S,0)}function A(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return J(A(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=_(Math.pow(S,8)),V=D,M=0;M<O.length;M+=8){var x=Math.min(8,O.length-M),w=parseInt(O.substring(M,M+x),S);8>x?(x=_(Math.pow(S,x)),V=V.j(x).add(_(w))):(V=V.j(R),V=V.add(_(w)))}return V}var D=y(0),C=y(1),H=y(16777216);r=d.prototype,r.m=function(){if(rt(this))return-J(this).m();for(var O=0,S=1,R=0;R<this.g.length;R++){var V=this.i(R);O+=(0<=V?V:4294967296+V)*S,S*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if($(this))return"0";if(rt(this))return"-"+J(this).toString(O);for(var S=_(Math.pow(O,6)),R=this,V="";;){var M=Ht(R,S).g;R=Tt(R,M.j(S));var x=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=M,$(R))return x+V;for(;6>x.length;)x="0"+x;V=x+V}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function $(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function rt(O){return O.h==-1}r.l=function(O){return O=Tt(this,O),rt(O)?-1:$(O)?0:1};function J(O){for(var S=O.g.length,R=[],V=0;V<S;V++)R[V]=~O.g[V];return new d(R,~O.h).add(C)}r.abs=function(){return rt(this)?J(this):this},r.add=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],V=0,M=0;M<=S;M++){var x=V+(this.i(M)&65535)+(O.i(M)&65535),w=(x>>>16)+(this.i(M)>>>16)+(O.i(M)>>>16);V=w>>>16,x&=65535,w&=65535,R[M]=w<<16|x}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Tt(O,S){return O.add(J(S))}r.j=function(O){if($(this)||$(O))return D;if(rt(this))return rt(O)?J(this).j(J(O)):J(J(this).j(O));if(rt(O))return J(this.j(J(O)));if(0>this.l(H)&&0>O.l(H))return _(this.m()*O.m());for(var S=this.g.length+O.g.length,R=[],V=0;V<2*S;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<O.g.length;M++){var x=this.i(V)>>>16,w=this.i(V)&65535,De=O.i(M)>>>16,ee=O.i(M)&65535;R[2*V+2*M]+=w*ee,gt(R,2*V+2*M),R[2*V+2*M+1]+=x*ee,gt(R,2*V+2*M+1),R[2*V+2*M+1]+=w*De,gt(R,2*V+2*M+1),R[2*V+2*M+2]+=x*De,gt(R,2*V+2*M+2)}for(V=0;V<S;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=S;V<2*S;V++)R[V]=0;return new d(R,0)};function gt(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function ct(O,S){this.g=O,this.h=S}function Ht(O,S){if($(S))throw Error("division by zero");if($(O))return new ct(D,D);if(rt(O))return S=Ht(J(O),S),new ct(J(S.g),J(S.h));if(rt(S))return S=Ht(O,J(S)),new ct(J(S.g),S.h);if(30<O.g.length){if(rt(O)||rt(S))throw Error("slowDivide_ only works with positive integers.");for(var R=C,V=S;0>=V.l(O);)R=Et(R),V=Et(V);var M=Bt(R,1),x=Bt(V,1);for(V=Bt(V,2),R=Bt(R,2);!$(V);){var w=x.add(V);0>=w.l(O)&&(M=M.add(R),x=w),V=Bt(V,1),R=Bt(R,1)}return S=Tt(O,M.j(S)),new ct(M,S)}for(M=D;0<=O.l(S);){for(R=Math.max(1,Math.floor(O.m()/S.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),x=_(R),w=x.j(S);rt(w)||0<w.l(O);)R-=V,x=_(R),w=x.j(S);$(x)&&(x=C),M=M.add(x),O=Tt(O,w)}return new ct(M,O)}r.A=function(O){return Ht(this,O).h},r.and=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)&O.i(V);return new d(R,this.h&O.h)},r.or=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)|O.i(V);return new d(R,this.h|O.h)},r.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)^O.i(V);return new d(R,this.h^O.h)};function Et(O){for(var S=O.g.length+1,R=[],V=0;V<S;V++)R[V]=O.i(V)<<1|O.i(V-1)>>>31;return new d(R,O.h)}function Bt(O,S){var R=S>>5;S%=32;for(var V=O.g.length-R,M=[],x=0;x<V;x++)M[x]=0<S?O.i(x+R)>>>S|O.i(x+R+1)<<32-S:O.i(x+R);return new d(M,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,zE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=A,qr=d}).apply(typeof $_<"u"?$_:typeof self<"u"?self:typeof window<"u"?window:{});var gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BE,ml,jE,bc,Yd,qE,HE,GE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,p){return u==Array.prototype||u==Object.prototype||(u[m]=p.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gc=="object"&&gc];for(var m=0;m<u.length;++m){var p=u[m];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=i(this);function l(u,m){if(m)t:{var p=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in p))break t;p=p[U]}u=u[u.length-1],T=p[u],m=m(T),m!=T&&m!=null&&t(p,u,{configurable:!0,writable:!0,value:m})}}function h(u,m){u instanceof String&&(u+="");var p=0,T=!1,U={next:function(){if(!T&&p<u.length){var j=p++;return{value:m(j,u[j]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}l("Array.prototype.values",function(u){return u||function(){return h(this,function(m,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,p){return u.call.apply(u.bind,arguments)}function D(u,m,p){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function C(u,m,p){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:D,C.apply(null,arguments)}function H(u,m){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function $(u,m){function p(){}p.prototype=m.prototype,u.aa=m.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(T,U,j){for(var tt=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)tt[Ut-2]=arguments[Ut];return m.prototype[U].apply(T,tt)}}function rt(u){const m=u.length;if(0<m){const p=Array(m);for(let T=0;T<m;T++)p[T]=u[T];return p}return[]}function J(u,m){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(y(T)){const U=u.length||0,j=T.length||0;u.length=U+j;for(let tt=0;tt<j;tt++)u[U+tt]=T[tt]}else u.push(T)}}class Tt{constructor(m,p){this.i=m,this.j=p,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function gt(u){return/^[\s\xa0]*$/.test(u)}function ct(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Ht(u){return Ht[" "](u),u}Ht[" "]=function(){};var Et=ct().indexOf("Gecko")!=-1&&!(ct().toLowerCase().indexOf("webkit")!=-1&&ct().indexOf("Edge")==-1)&&!(ct().indexOf("Trident")!=-1||ct().indexOf("MSIE")!=-1)&&ct().indexOf("Edge")==-1;function Bt(u,m,p){for(const T in u)m.call(p,u[T],T,u)}function O(u,m){for(const p in u)m.call(void 0,u[p],p,u)}function S(u){const m={};for(const p in u)m[p]=u[p];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,m){let p,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(p in T)u[p]=T[p];for(let j=0;j<R.length;j++)p=R[j],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function M(u){var m=1;u=u.split(":");const p=[];for(;0<m&&u.length;)p.push(u.shift()),m--;return u.length&&p.push(u.join(":")),p}function x(u){g.setTimeout(()=>{throw u},0)}function w(){var u=Pt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class De{constructor(){this.h=this.g=null}add(m,p){const T=ee.get();T.set(m,p),this.h?this.h.next=T:this.g=T,this.h=T}}var ee=new Tt(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(m,p){this.h=m,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,ot=!1,Pt=new De,I=()=>{const u=g.Promise.resolve(void 0);nt=()=>{u.then(K)}};var K=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(p){x(p)}var m=ee;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ot=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ht=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};g.addEventListener("test",p,m),g.removeEventListener("test",p,m)}catch{}return u}();function wt(u,m){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Et){t:{try{Ht(m.nodeName);var U=!0;break t}catch{}U=!1}U||(m=null)}}else p=="mouseover"?m=u.fromElement:p=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&wt.aa.h.call(this)}}$(wt,W);var pt={2:"touch",3:"pen",4:"mouse"};wt.prototype.h=function(){wt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),et=0;function It(u,m,p,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=p,this.capture=!!T,this.ha=U,this.key=++et,this.da=this.fa=!1}function Ot(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function $t(u){this.src=u,this.g={},this.h=0}$t.prototype.add=function(u,m,p,T,U){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var tt=Te(u,m,T,U);return-1<tt?(m=u[tt],p||(m.fa=!1)):(m=new It(m,this.src,j,!!T,U),m.fa=p,u.push(m)),m};function Ge(u,m){var p=m.type;if(p in u.g){var T=u.g[p],U=Array.prototype.indexOf.call(T,m,void 0),j;(j=0<=U)&&Array.prototype.splice.call(T,U,1),j&&(Ot(m),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Te(u,m,p,T){for(var U=0;U<u.length;++U){var j=u[U];if(!j.da&&j.listener==m&&j.capture==!!p&&j.ha==T)return U}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),ke={};function ln(u,m,p,T,U){if(Array.isArray(m)){for(var j=0;j<m.length;j++)ln(u,m[j],p,T,U);return null}return p=Fl(p),u&&u[Ee]?u.K(m,p,_(T)?!!T.capture:!1,U):jt(u,m,p,!1,T,U)}function jt(u,m,p,T,U,j){if(!m)throw Error("Invalid event type");var tt=_(U)?!!U.capture:!!U,Ut=Gs(u);if(Ut||(u[ie]=Ut=new $t(u)),p=Ut.add(m,p,T,tt,j),p.proxy)return p;if(T=ge(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)ht||(U=tt),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(Jr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ge(){function u(p){return m.call(u.src,u.listener,p)}const m=yh;return u}function dn(u,m,p,T,U){if(Array.isArray(m))for(var j=0;j<m.length;j++)dn(u,m[j],p,T,U);else T=_(T)?!!T.capture:!!T,p=Fl(p),u&&u[Ee]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],p=Te(j,p,T,U),-1<p&&(Ot(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=Gs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Te(m,p,T,U)),(p=-1<u?m[u]:null)&&Si(p))}function Si(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ee])Ge(m.i,u);else{var p=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(p,T,u.capture):m.detachEvent?m.detachEvent(Jr(p),T):m.addListener&&m.removeListener&&m.removeListener(T),(p=Gs(m))?(Ge(p,u),p.h==0&&(p.src=null,m[ie]=null)):Ot(u)}}}function Jr(u){return u in ke?ke[u]:ke[u]="on"+u}function yh(u,m){if(u.da)u=!0;else{m=new wt(m,this);var p=u.listener,T=u.ha||u.src;u.fa&&Si(u),u=p.call(T,m)}return u}function Gs(u){return u=u[ie],u instanceof $t?u:null}var so="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fl(u){return typeof u=="function"?u:(u[so]||(u[so]=function(m){return u.handleEvent(m)}),u[so])}function fe(){it.call(this),this.i=new $t(this),this.M=this,this.F=null}$(fe,it),fe.prototype[Ee]=!0,fe.prototype.removeEventListener=function(u,m,p,T){dn(this,u,m,p,T)};function Yt(u,m){var p,T=u.F;if(T)for(p=[];T;T=T.F)p.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new W(m,u);else if(m instanceof W)m.target=m.target||u;else{var U=m;m=new W(T,u),V(m,U)}if(U=!0,p)for(var j=p.length-1;0<=j;j--){var tt=m.g=p[j];U=vn(tt,T,!0,m)&&U}if(tt=m.g=u,U=vn(tt,T,!0,m)&&U,U=vn(tt,T,!1,m)&&U,p)for(j=0;j<p.length;j++)tt=m.g=p[j],U=vn(tt,T,!1,m)&&U}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var p=u.g[m],T=0;T<p.length;T++)Ot(p[T]);delete u.g[m],u.h--}}this.F=null},fe.prototype.K=function(u,m,p,T){return this.i.add(String(u),m,!1,p,T)},fe.prototype.L=function(u,m,p,T){return this.i.add(String(u),m,!0,p,T)};function vn(u,m,p,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,j=0;j<m.length;++j){var tt=m[j];if(tt&&!tt.da&&tt.capture==p){var Ut=tt.listener,Oe=tt.ha||tt.src;tt.fa&&Ge(u.i,tt),U=Ut.call(Oe,T)!==!1&&U}}return U&&!T.defaultPrevented}function We(u,m,p){if(typeof u=="function")p&&(u=C(u,p));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function Ql(u){u.g=We(()=>{u.g=null,u.i&&(u.i=!1,Ql(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class _h extends it{constructor(m,p){super(),this.m=m,this.l=p,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ql(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(u){it.call(this),this.h=u,this.g={}}$(Wr,it);var ts=[];function es(u){Bt(u.g,function(m,p){this.g.hasOwnProperty(p)&&Si(m)},u),u.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),es(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=g.JSON.stringify,Fs=g.JSON.parse,ns=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function ao(){}ao.prototype.h=null;function oo(u){return u.h||(u.h=u.i())}function lo(){}var bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wi(){W.call(this,"d")}$(wi,W);function uo(){W.call(this,"c")}$(uo,W);var Zn={},co=null;function sr(){return co=co||new fe}Zn.La="serverreachability";function Qs(u){W.call(this,Zn.La,u)}$(Qs,W);function ar(u){const m=sr();Yt(m,new Qs(m))}Zn.STAT_EVENT="statevent";function Yl(u,m){W.call(this,Zn.STAT_EVENT,u),this.stat=m}$(Yl,W);function oe(u){const m=sr();Yt(m,new Yl(m,u))}Zn.Ma="timingevent";function Ne(u,m){W.call(this,Zn.Ma,u),this.size=m}$(Ne,W);function Ae(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function ho(u,m,p,T,U,j){u.info(function(){if(u.g)if(j)for(var tt="",Ut=j.split("&"),Oe=0;Oe<Ut.length;Oe++){var kt=Ut[Oe].split("=");if(1<kt.length){var ze=kt[0];kt=kt[1];var Ve=ze.split("_");tt=2<=Ve.length&&Ve[1]=="type"?tt+(ze+"="+kt+"&"):tt+(ze+"=redacted&")}}else tt=null;else tt=j;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+p+`
`+tt})}function vh(u,m,p,T,U,j,tt){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+p+`
`+j+" "+tt})}function or(u,m,p,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+is(u,p)+(T?" "+T:"")})}function Kl(u,m){u.info(function(){return"TIMEOUT: "+m})}Dn.prototype.info=function(){};function is(u,m){if(!u.g)return m;if(!m)return null;try{var p=JSON.parse(m);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var T=p[u];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var j=U[0];if(j!="noop"&&j!="stop"&&j!="close")for(var tt=1;tt<U.length;tt++)U[tt]=""}}}}return Gn(p)}catch{return m}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function Wn(){}$(Wn,ao),Wn.prototype.g=function(){return new XMLHttpRequest},Wn.prototype.i=function(){return{}},Jn=new Wn;function un(u,m,p,T){this.j=u,this.i=m,this.l=p,this.R=T||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var fo={},Ys={};function Fn(u,m,p){u.L=1,u.v=ls(En(m)),u.m=p,u.P=!0,Ii(u,null)}function Ii(u,m){u.F=Date.now(),rs(u),u.A=En(u.v);var p=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),vo(p.i,"t",T),u.C=0,p=u.j.J,u.h=new pe,u.g=cu(u.j,p?m:null,!u.m),0<u.O&&(u.M=new _h(C(u.Y,u,u.g),u.O)),m=u.U,p=u.g,T=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(ts[0]=U.toString()),U=ts);for(var j=0;j<U.length;j++){var tt=ln(p,U[j],T||m.handleEvent,!1,m.h||m);if(!tt)break;m.g[tt.key]=tt}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ar(),ho(u.i,u.u,u.A,u.l,u.R,u.m)}un.prototype.ca=function(u){u=u.target;const m=this.M;m&&Mn(u)==3?m.j():this.Y(u)},un.prototype.Y=function(u){try{if(u==this.g)t:{const Ve=Mn(this.g);var m=this.g.Ba();const Pi=this.g.Z();if(!(3>Ve)&&(Ve!=3||this.g&&(this.h.h||this.g.oa()||nu(this.g)))){this.J||Ve!=4||m==7||(m==8||0>=Pi?ar(3):ar(2)),ur(this);var p=this.g.Z();this.X=p;e:if(Xl(this)){var T=nu(this.g);u="";var U=T.length,j=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fe(this),ti(this);var tt="";break e}this.h.i=new g.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(j&&m==U-1)});T.length=0,this.h.g+=u,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=p==200,vh(this.i,this.u,this.A,this.l,this.R,Ve,p),this.o){if(this.T&&!this.K){e:{if(this.g){var Ut,Oe=this.g;if((Ut=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gt(Ut)){var kt=Ut;break e}}kt=null}if(p=kt)or(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ss(this,p);else{this.o=!1,this.s=3,oe(12),Fe(this),ti(this);break t}}if(this.P){p=!0;let Qe;for(;!this.J&&this.C<tt.length;)if(Qe=$l(this,tt),Qe==Ys){Ve==4&&(this.s=4,oe(14),p=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==fo){this.s=4,oe(15),or(this.i,this.l,tt,"[Invalid Chunk]"),p=!1;break}else or(this.i,this.l,Qe,null),ss(this,Qe);if(Xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||tt.length!=0||this.h.h||(this.s=1,oe(16),p=!1),this.o=this.o&&p,!p)or(this.i,this.l,tt,"[Invalid Chunked Response]"),Fe(this),ti(this);else if(0<tt.length&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.ba&&!ze.M&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),ps(ze),ze.M=!0,oe(11))}}else or(this.i,this.l,tt,null),ss(this,tt);Ve==4&&Fe(this),this.o&&!this.J&&(Ve==4?ou(this.j,this):(this.o=!1,rs(this)))}else bh(this.g),p==400&&0<tt.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),Fe(this),ti(this)}}}catch{}finally{}};function Xl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function $l(u,m){var p=u.C,T=m.indexOf(`
`,p);return T==-1?Ys:(p=Number(m.substring(p,T)),isNaN(p)?fo:(T+=1,T+p>m.length?Ys:(m=m.slice(T,T+p),u.C=T+p,m)))}un.prototype.cancel=function(){this.J=!0,Fe(this)};function rs(u){u.S=Date.now()+u.I,Zl(u,u.I)}function Zl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ae(C(u.ba,u),m)}function ur(u){u.B&&(g.clearTimeout(u.B),u.B=null)}un.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Kl(this.i,this.A),this.L!=2&&(ar(),oe(17)),Fe(this),this.s=2,ti(this)):Zl(this,this.S-u)};function ti(u){u.j.G==0||u.J||ou(u.j,u)}function Fe(u){ur(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,es(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ss(u,m){try{var p=u.j;if(p.G!=0&&(p.g==u||mo(p.h,u))){if(!u.K&&mo(p.h,u)&&p.G==3){try{var T=p.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)sa(p),ia(p);else break t;bo(p),oe(18)}}else p.za=U[1],0<p.za-p.T&&37500>U[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ae(C(p.Za,p),6e3));if(1>=Xs(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else xi(p,11)}else if((u.K||p.g==u)&&sa(p),!gt(m))for(U=p.Da.g.parse(m),m=0;m<U.length;m++){let kt=U[m];if(p.T=kt[0],kt=kt[1],p.G==2)if(kt[0]=="c"){p.K=kt[1],p.ia=kt[2];const ze=kt[3];ze!=null&&(p.la=ze,p.j.info("VER="+p.la));const Ve=kt[4];Ve!=null&&(p.Aa=Ve,p.j.info("SVER="+p.Aa));const Pi=kt[5];Pi!=null&&typeof Pi=="number"&&0<Pi&&(T=1.5*Pi,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const Qe=u.g;if(Qe){const oi=Qe.g?Qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var j=T.h;j.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&($s(j,j.h),j.h=null))}if(T.D){const Ro=Qe.g?Qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Ro&&(T.ya=Ro,Zt(T.I,T.D,Ro))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var tt=u;if(T.qa=uu(T,T.J?T.ia:null,T.W),tt.K){cn(T.h,tt);var Ut=tt,Oe=T.L;Oe&&(Ut.I=Oe),Ut.B&&(ur(Ut),rs(Ut)),T.g=tt}else su(T);0<p.i.length&&ra(p)}else kt[0]!="stop"&&kt[0]!="close"||xi(p,7);else p.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?xi(p,7):Ao(p):kt[0]!="noop"&&p.l&&p.l.ta(kt),p.v=0)}}ar(4)}catch{}}var Jl=class{constructor(u,m){this.g=u,this.map=m}};function Ci(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ks(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Xs(u){return u.h?1:u.g?u.g.size:0}function mo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function $s(u,m){u.g?u.g.add(m):u.h=m}function cn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ci.prototype.cancel=function(){if(this.i=go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function go(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const p of u.g.values())m=m.concat(p.D);return m}return rt(u.i)}function Eh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],p=u.length,T=0;T<p;T++)m.push(u[T]);return m}m=[],p=0;for(T in u)m[p++]=u[T];return m}function Zs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var p=0;p<u;p++)m.push(p);return m}m=[],p=0;for(const T in u)m[p++]=T;return m}}}function po(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var p=Zs(u),T=Eh(u),U=T.length,j=0;j<U;j++)m.call(void 0,T[j],p&&p[j],u)}var as=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Th(u,m){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var T=u[p].indexOf("="),U=null;if(0<=T){var j=u[p].substring(0,T);U=u[p].substring(T+1)}else j=u[p];m(j,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Se(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Se){this.h=u.h,os(this,u.j),this.o=u.o,this.g=u.g,cr(this,u.s),this.l=u.l;var m=u.i,p=new Ni;p.i=m.i,m.g&&(p.g=new Map(m.g),p.h=m.h),Di(this,p),this.m=u.m}else u&&(m=String(u).match(as))?(this.h=!1,os(this,m[1]||"",!0),this.o=Nn(m[2]||""),this.g=Nn(m[3]||"",!0),cr(this,m[4]),this.l=Nn(m[5]||"",!0),Di(this,m[6]||"",!0),this.m=Nn(m[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Se.prototype.toString=function(){var u=[],m=this.j;m&&u.push(us(m,yo,!0),":");var p=this.g;return(p||m=="file")&&(u.push("//"),(m=this.o)&&u.push(us(m,yo,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(us(p,p.charAt(0)=="/"?Ah:_o,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",us(p,Js)),u.join("")};function En(u){return new Se(u)}function os(u,m,p){u.j=p?Nn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function cr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Di(u,m,p){m instanceof Ni?(u.i=m,tu(u.i,u.h)):(p||(m=us(m,Sh)),u.i=new Ni(m,u.h))}function Zt(u,m,p){u.i.set(m,p)}function ls(u){return Zt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Nn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function us(u,m,p){return typeof u=="string"?(u=encodeURI(u).replace(m,Wl),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var yo=/[#\/\?@]/g,_o=/[#\?:]/g,Ah=/[#\?]/g,Sh=/[#\?@]/g,Js=/#/g;function Ni(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function On(u){u.g||(u.g=new Map,u.h=0,u.i&&Th(u.i,function(m,p){u.add(decodeURIComponent(m.replace(/\+/g," ")),p)}))}r=Ni.prototype,r.add=function(u,m){On(this),this.i=null,u=ei(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(m),this.h+=1,this};function Oi(u,m){On(u),m=ei(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Vi(u,m){return On(u),m=ei(u,m),u.g.has(m)}r.forEach=function(u,m){On(this),this.g.forEach(function(p,T){p.forEach(function(U){u.call(m,U,T,this)},this)},this)},r.na=function(){On(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),p=[];for(let T=0;T<m.length;T++){const U=u[T];for(let j=0;j<U.length;j++)p.push(m[T])}return p},r.V=function(u){On(this);let m=[];if(typeof u=="string")Vi(this,u)&&(m=m.concat(this.g.get(ei(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)m=m.concat(u[p])}return m},r.set=function(u,m){return On(this),this.i=null,u=ei(this,u),Vi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function vo(u,m,p){Oi(u,m),0<p.length&&(u.i=null,u.g.set(ei(u,m),rt(p)),u.h+=p.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var p=0;p<m.length;p++){var T=m[p];const j=encodeURIComponent(String(T)),tt=this.V(T);for(T=0;T<tt.length;T++){var U=j;tt[T]!==""&&(U+="="+encodeURIComponent(String(tt[T]))),u.push(U)}}return this.i=u.join("&")};function ei(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function tu(u,m){m&&!u.j&&(On(u),u.i=null,u.g.forEach(function(p,T){var U=T.toLowerCase();T!=U&&(Oi(this,T),vo(this,U,p))},u)),u.j=m}function cs(u,m){const p=new Dn;if(g.Image){const T=new Image;T.onload=H(Vn,p,"TestLoadImage: loaded",!0,m,T),T.onerror=H(Vn,p,"TestLoadImage: error",!1,m,T),T.onabort=H(Vn,p,"TestLoadImage: abort",!1,m,T),T.ontimeout=H(Vn,p,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Qn(u,m){const p=new Dn,T=new AbortController,U=setTimeout(()=>{T.abort(),Vn(p,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(j=>{clearTimeout(U),j.ok?Vn(p,"TestPingServer: ok",!0,m):Vn(p,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Vn(p,"TestPingServer: error",!1,m)})}function Vn(u,m,p,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(p)}catch{}}function hs(){this.g=new ns}function ni(u,m,p){const T=p||"";try{po(u,function(U,j){let tt=U;_(U)&&(tt=Gn(U)),m.push(T+j+"="+encodeURIComponent(tt))})}catch(U){throw m.push(T+"type="+encodeURIComponent("_badmap")),U}}function hr(u){this.l=u.Ub||null,this.j=u.eb||!1}$(hr,ao),hr.prototype.g=function(){return new Mi(this.l,this.j)},hr.prototype.i=function(u){return function(){return u}}({});function Mi(u,m){fe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Mi,fe),r=Mi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ri(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ii(this):ri(this),this.readyState==3&&Eo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ii(this))},r.Qa=function(u){this.g&&(this.response=u,ii(this))},r.ga=function(){this.g&&ii(this)};function ii(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ri(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var p=m.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=m.next();return u.join(`\r
`)};function ri(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function To(u){let m="";return Bt(u,function(p,T){m+=T,m+=":",m+=p,m+=`\r
`}),m}function Le(u,m,p){t:{for(T in p){var T=!1;break t}T=!0}T||(p=To(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Zt(u,m,p))}function Ft(u){fe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(Ft,fe);var Ws=/^https?$/i,fs=["POST","PUT"];r=Ft.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?oo(this.o):oo(Jn),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){eu(this,j);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)p.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())p.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(j=>j.toLowerCase()=="content-type"),U=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(fs,m,void 0))||T||U||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,tt]of p)this.g.setRequestHeader(j,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ds(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){eu(this,j)}};function eu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ta(u),si(u)}function ta(u){u.A||(u.A=!0,Yt(u,"complete"),Yt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Yt(this,"complete"),Yt(this,"abort"),si(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),si(this,!0)),Ft.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ea(this):this.bb())},r.bb=function(){ea(this)};function ea(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Mn(u)!=4||u.Z()!=2)){if(u.u&&Mn(u)==4)We(u.Ea,0,u);else if(Yt(u,"readystatechange"),Mn(u)==4){u.h=!1;try{const tt=u.Z();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var p;if(!(p=m)){var T;if(T=tt===0){var U=String(u.D).match(as)[1]||null;!U&&g.self&&g.self.location&&(U=g.self.location.protocol.slice(0,-1)),T=!Ws.test(U?U.toLowerCase():"")}p=T}if(p)Yt(u,"complete"),Yt(u,"success");else{u.m=6;try{var j=2<Mn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",ta(u)}}finally{si(u)}}}}function si(u,m){if(u.g){ds(u);const p=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Yt(u,"ready");try{p.onreadystatechange=T}catch{}}}function ds(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Mn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Fs(m)}};function nu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bh(u){const m={};u=(u.g&&2<=Mn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(gt(u[T]))continue;var p=M(u[T]);const U=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const j=m[U]||[];m[U]=j,j.push(p)}O(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ms(u,m,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||m}function na(u){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ms("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ms("baseRetryDelayMs",5e3,u),this.cb=ms("retryDelaySeedMs",1e4,u),this.Wa=ms("forwardChannelMaxRetries",2,u),this.wa=ms("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ci(u&&u.concurrentRequestLimit),this.Da=new hs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=na.prototype,r.la=8,r.G=1,r.connect=function(u,m,p,T){oe(0),this.W=u,this.H=m||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=uu(this,null,this.W),ra(this)};function Ao(u){if(iu(u),u.G==3){var m=u.U++,p=En(u.I);if(Zt(p,"SID",u.K),Zt(p,"RID",m),Zt(p,"TYPE","terminate"),gs(u,p),m=new un(u,u.j,m),m.L=2,m.v=ls(En(p)),p=!1,g.navigator&&g.navigator.sendBeacon)try{p=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!p&&g.Image&&(new Image().src=m.v,p=!0),p||(m.g=cu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),rs(m)}lu(u)}function ia(u){u.g&&(ps(u),u.g.cancel(),u.g=null)}function iu(u){ia(u),u.u&&(g.clearTimeout(u.u),u.u=null),sa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function ra(u){if(!Ks(u.h)&&!u.s){u.s=!0;var m=u.Ga;nt||I(),ot||(nt(),ot=!0),Pt.add(m,u),u.B=0}}function wh(u,m){return Xs(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ae(C(u.Ga,u,m),wo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new un(this,this.j,u);let j=this.o;if(this.S&&(j?(j=S(j),V(j,this.S)):j=this.S),this.m!==null||this.O||(U.H=j,j=null),this.P)t:{for(var m=0,p=0;p<this.i.length;p++){e:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=p;break t}if(m===4096||p===this.i.length-1){m=p+1;break t}}m=1e3}else m=1e3;m=ru(this,U,m),p=En(this.I),Zt(p,"RID",u),Zt(p,"CVER",22),this.D&&Zt(p,"X-HTTP-Session-Id",this.D),gs(this,p),j&&(this.O?m="headers="+encodeURIComponent(String(To(j)))+"&"+m:this.m&&Le(p,this.m,j)),$s(this.h,U),this.Ua&&Zt(p,"TYPE","init"),this.P?(Zt(p,"$req",m),Zt(p,"SID","null"),U.T=!0,Fn(U,p,null)):Fn(U,p,m),this.G=2}}else this.G==3&&(u?So(this,u):this.i.length==0||Ks(this.h)||So(this))};function So(u,m){var p;m?p=m.l:p=u.U++;const T=En(u.I);Zt(T,"SID",u.K),Zt(T,"RID",p),Zt(T,"AID",u.T),gs(u,T),u.m&&u.o&&Le(T,u.m,u.o),p=new un(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ru(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$s(u.h,p),Fn(p,T,m)}function gs(u,m){u.H&&Bt(u.H,function(p,T){Zt(m,T,p)}),u.l&&po({},function(p,T){Zt(m,T,p)})}function ru(u,m,p){p=Math.min(u.i.length,p);var T=u.l?C(u.l.Na,u.l,u):null;t:{var U=u.i;let j=-1;for(;;){const tt=["count="+p];j==-1?0<p?(j=U[0].g,tt.push("ofs="+j)):j=0:tt.push("ofs="+j);let Ut=!0;for(let Oe=0;Oe<p;Oe++){let kt=U[Oe].g;const ze=U[Oe].map;if(kt-=j,0>kt)j=Math.max(0,U[Oe].g-100),Ut=!1;else try{ni(ze,tt,"req"+kt+"_")}catch{T&&T(ze)}}if(Ut){T=tt.join("&");break t}}}return u=u.i.splice(0,p),m.D=u,T}function su(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;nt||I(),ot||(nt(),ot=!0),Pt.add(m,u),u.v=0}}function bo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ae(C(u.Fa,u),wo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ae(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),ia(this),au(this))};function ps(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function au(u){u.g=new un(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=En(u.qa);Zt(m,"RID","rpc"),Zt(m,"SID",u.K),Zt(m,"AID",u.T),Zt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Zt(m,"TO",u.ja),Zt(m,"TYPE","xmlhttp"),gs(u,m),u.m&&u.o&&Le(m,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=ls(En(m)),p.m=null,p.P=!0,Ii(p,u)}r.Za=function(){this.C!=null&&(this.C=null,ia(this),bo(this),oe(19))};function sa(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function ou(u,m){var p=null;if(u.g==m){sa(u),ps(u),u.g=null;var T=2}else if(mo(u.h,m))p=m.D,cn(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){p=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;T=sr(),Yt(T,new Ne(T,p)),ra(u)}else su(u);else if(U=m.s,U==3||U==0&&0<m.X||!(T==1&&wh(u,m)||T==2&&bo(u)))switch(p&&0<p.length&&(m=u.h,m.i=m.i.concat(p)),U){case 1:xi(u,5);break;case 4:xi(u,10);break;case 3:xi(u,6);break;default:xi(u,2)}}}function wo(u,m){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*m}function xi(u,m){if(u.j.info("Error code "+m),m==2){var p=C(u.fb,u),T=u.Xa;const U=!T;T=new Se(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||os(T,"https"),ls(T),U?cs(T.toString(),p):Qn(T.toString(),p)}else oe(2);u.G=0,u.l&&u.l.sa(m),lu(u),iu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function lu(u){if(u.G=0,u.ka=[],u.l){const m=go(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ka,m),J(u.ka,u.i),u.h.i.length=0,rt(u.i),u.i.length=0),u.l.ra()}}function uu(u,m,p){var T=p instanceof Se?En(p):new Se(p);if(T.g!="")m&&(T.g=m+"."+T.g),cr(T,T.s);else{var U=g.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var j=new Se(null);T&&os(j,T),m&&(j.g=m),U&&cr(j,U),p&&(j.l=p),T=j}return p=u.D,m=u.ya,p&&m&&Zt(T,p,m),Zt(T,"VER",u.la),gs(u,T),T}function cu(u,m,p){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ft(new hr({eb:p})):new Ft(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function hu(){}r=hu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function aa(){}aa.prototype.g=function(u,m){return new hn(u,m)};function hn(u,m){fe.call(this),this.g=new na(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!gt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!gt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ai(this)}$(hn,fe),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ao(this.g)},hn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Gn(u),u=p);m.i.push(new Jl(m.Ya++,u)),m.G==3&&ra(m)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ao(this.g),delete this.g,hn.aa.N.call(this)};function fu(u){wi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const p in m){u=p;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}$(fu,wi);function du(){uo.call(this),this.status=1}$(du,uo);function ai(u){this.g=u}$(ai,hu),ai.prototype.ua=function(){Yt(this.g,"a")},ai.prototype.ta=function(u){Yt(this.g,new fu(u))},ai.prototype.sa=function(u){Yt(this.g,new du)},ai.prototype.ra=function(){Yt(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,GE=function(){return new aa},HE=function(){return sr()},qE=Zn,Yd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,bc=lr,Ri.COMPLETE="complete",jE=Ri,lo.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",fe.prototype.listen=fe.prototype.K,ml=lo,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,BE=Ft}).apply(typeof gc<"u"?gc:typeof self<"u"?self:typeof window<"u"?window:{});const Z_="@firebase/firestore",J_="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new hm("@firebase/firestore");function Pa(){return zs.logLevel}function st(r,...t){if(zs.logLevel<=Vt.DEBUG){const i=t.map(Am);zs.debug(`Firestore (${eo}): ${r}`,...i)}}function nr(r,...t){if(zs.logLevel<=Vt.ERROR){const i=t.map(Am);zs.error(`Firestore (${eo}): ${r}`,...i)}}function Qa(r,...t){if(zs.logLevel<=Vt.WARN){const i=t.map(Am);zs.warn(`Firestore (${eo}): ${r}`,...i)}}function Am(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,FE(r,s,i)}function FE(r,t,i){let s=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw nr(s),new Error(s)}function Qt(r,t,i,s){let l="Unexpected state";typeof i=="string"?l=i:s=i,r||FE(t,l,s)}function St(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends rr{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ow{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(rn.UNAUTHENTICATED))}shutdown(){}}class Vw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Mw{constructor(t){this.t=t,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Qt(this.o===void 0,42304);let s=this.i;const l=y=>this.i!==s?(s=this.i,i(y)):Promise.resolve();let h=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new xs,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const y=h;t.enqueueRetryable(async()=>{await y.promise,await l(this.currentUser)})},g=y=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new xs)}},0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qt(typeof s.accessToken=="string",31837,{l:s}),new QE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qt(t===null||typeof t=="string",2055,{h:t}),new rn(t)}}class xw{constructor(t,i,s){this.P=t,this.T=i,this.I=s,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Pw{constructor(t,i,s){this.P=t,this.T=i,this.I=s}getToken(){return Promise.resolve(new xw(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uw{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Qt(this.o===void 0,3512);const s=h=>{h.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,st("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable(()=>s(h))};const l=h=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(h=>l(h)),setTimeout(()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new W_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Qt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new W_(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=kw(40);for(let h=0;h<l.length;++h)s.length<20&&l[h]<i&&(s+=t.charAt(l[h]%62))}return s}}function Mt(r,t){return r<t?-1:r>t?1:0}function Kd(r,t){const i=Math.min(r.length,t.length);for(let s=0;s<i;s++){const l=r.charAt(s),h=t.charAt(s);if(l!==h)return Od(l)===Od(h)?Mt(l,h):Od(l)?1:-1}return Mt(r.length,t.length)}const Lw=55296,zw=57343;function Od(r){const t=r.charCodeAt(0);return t>=Lw&&t<=zw}function Ya(r,t,i){return r.length===t.length&&r.every((s,l)=>i(s,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="__name__";class di{constructor(t,i,s){i===void 0?i=0:i>t.length&&yt(637,{offset:i,range:t.length}),s===void 0?s=t.length-i:s>t.length-i&&yt(1746,{length:s,range:t.length-i}),this.segments=t,this.offset=i,this.len=s}get length(){return this.len}isEqual(t){return di.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof di?t.forEach(s=>{i.push(s)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,s=this.limit();i<s;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const s=Math.min(t.length,i.length);for(let l=0;l<s;l++){const h=di.compareSegments(t.get(l),i.get(l));if(h!==0)return h}return Mt(t.length,i.length)}static compareSegments(t,i){const s=di.isNumericId(t),l=di.isNumericId(i);return s&&!l?-1:!s&&l?1:s&&l?di.extractNumericId(t).compare(di.extractNumericId(i)):Kd(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return qr.fromString(t.substring(4,t.length-2))}}class se extends di{construct(t,i,s){return new se(t,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const s of t){if(s.indexOf("//")>=0)throw new lt(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter(l=>l.length>0))}return new se(i)}static emptyPath(){return new se([])}}const Bw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends di{construct(t,i,s){return new Ze(t,i,s)}static isValidIdentifier(t){return Bw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tv}static keyField(){return new Ze([tv])}static fromServerFormat(t){const i=[];let s="",l=0;const h=()=>{if(s.length===0)throw new lt(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new lt(X.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new lt(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=y,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(h(),l++)}if(h(),d)throw new lt(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ze(i)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.path=t}static fromPath(t){return new ft(se.fromString(t))}static fromName(t){return new ft(se.fromString(t).popFirst(5))}static empty(){return new ft(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&se.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return se.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new se(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(r,t,i){if(!i)throw new lt(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function jw(r,t,i,s){if(t===!0&&s===!0)throw new lt(X.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function ev(r){if(!ft.isDocumentKey(r))throw new lt(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function nv(r){if(ft.isDocumentKey(r))throw new lt(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function KE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function bm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":yt(12329,{type:typeof r})}function pi(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new lt(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=bm(r);throw new lt(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(r,t){const i={typeString:r};return t&&(i.value=t),i}function Bl(r,t){if(!KE(r))throw new lt(X.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in t)if(t[s]){const l=t[s].typeString,h="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){i=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){i=`JSON field '${s}' must be a ${l}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${s}' field to equal '${h.value}'`;break}}if(i)throw new lt(X.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=-62135596800,rv=1e6;class ae{static now(){return ae.fromMillis(Date.now())}static fromDate(t){return ae.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),s=Math.floor((t-1e3*i)*rv);return new ae(i,s)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new lt(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new lt(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<iv)throw new lt(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rv}_compareTo(t){return this.seconds===t.seconds?Mt(this.nanoseconds,t.nanoseconds):Mt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Bl(t,ae._jsonSchema))return new ae(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-iv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ae._jsonSchemaVersion="firestore/timestamp/1.0",ae._jsonSchema={type:Ie("string",ae._jsonSchemaVersion),seconds:Ie("number"),nanoseconds:Ie("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new ae(0,0))}static max(){return new At(new ae(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=-1;function qw(r,t){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=At.fromTimestamp(s===1e9?new ae(i+1,0):new ae(i,s));return new Gr(l,ft.empty(),t)}function Hw(r){return new Gr(r.readTime,r.key,Il)}class Gr{constructor(t,i,s){this.readTime=t,this.documentKey=i,this.largestBatchId=s}static min(){return new Gr(At.min(),ft.empty(),Il)}static max(){return new Gr(At.max(),ft.empty(),Il)}}function Gw(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=ft.comparator(r.documentKey,t.documentKey),i!==0?i:Mt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==Fw)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Y((s,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(s,l)},this.catchCallback=h=>{this.wrapFailure(i,h).next(s,l)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof Y?i:Y.resolve(i)}catch(i){return Y.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):Y.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):Y.reject(i)}static resolve(t){return new Y((i,s)=>{i(t)})}static reject(t){return new Y((i,s)=>{s(t)})}static waitFor(t){return new Y((i,s)=>{let l=0,h=0,d=!1;t.forEach(g=>{++l,g.next(()=>{++h,d&&h===l&&i()},y=>s(y))}),d=!0,h===l&&i()})}static or(t){let i=Y.resolve(!1);for(const s of t)i=i.next(l=>l?Y.resolve(l):s());return i}static forEach(t,i){const s=[];return t.forEach((l,h)=>{s.push(i.call(this,l,h))}),this.waitFor(s)}static mapArray(t,i){return new Y((s,l)=>{const h=t.length,d=new Array(h);let g=0;for(let y=0;y<h;y++){const _=y;i(t[_]).next(A=>{d[_]=A,++g,g===h&&s(d)},A=>l(A))}})}static doWhile(t,i){return new Y((s,l)=>{const h=()=>{t()===!0?i().next(()=>{h()},l):s()};h()})}}function Yw(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function io(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>i.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Wc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=-1;function th(r){return r==null}function Lc(r){return r===0&&1/r==-1/0}function Kw(r){return typeof r=="number"&&Number.isInteger(r)&&!Lc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="";function Xw(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=sv(t)),t=$w(r.get(i),t);return sv(t)}function $w(r,t){let i=t;const s=r.length;for(let l=0;l<s;l++){const h=r.charAt(l);switch(h){case"\0":i+="";break;case XE:i+="";break;default:i+=h}}return i}function sv(r){return r+XE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function $r(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function $E(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,i){this.comparator=t,this.root=i||$e.EMPTY}insert(t,i){return new he(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(t){return new he(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$e.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(t){let i=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return i+s.left.size;l<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,s)=>(t(i,s),!1))}toString(){const t=[];return this.inorderTraversal((i,s)=>(t.push(`${i}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new pc(this.root,t,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new pc(this.root,t,this.comparator,!0)}}class pc{constructor(t,i,s,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=i?s(t.key,i):1,i&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $e{constructor(t,i,s,l,h){this.key=t,this.value=i,this.color=s??$e.RED,this.left=l??$e.EMPTY,this.right=h??$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,s,l,h){return new $e(t??this.key,i??this.value,s??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let l=this;const h=s(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,i,s),null):h===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let s,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return $e.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw yt(27949);return t+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1;$e.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(t,i,s,l,h){return this}insert(t,i,s){return new $e(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.comparator=t,this.data=new he(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,s)=>(t(i),!1))}forEachInRange(t,i){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(t){return new ov(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(s=>{i=i.add(s)}),i}isEqual(t){if(!(t instanceof Ue)||this.size!==t.size)return!1;const i=this.data.getIterator(),s=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=s.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Ue(this.comparator);return i.data=t,i}}class ov{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.fields=t,t.sort(Ze.comparator)}static empty(){return new Cn([])}unionWith(t){let i=new Ue(Ze.comparator);for(const s of this.fields)i=i.add(s);for(const s of t)i=i.add(s);return new Cn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Ya(this.fields,t.fields,(i,s)=>i.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new ZE("Invalid base64 string: "+h):h}}(t);return new Je(i)}static fromUint8Array(t){const i=function(l){let h="";for(let d=0;d<l.length;++d)h+=String.fromCharCode(l[d]);return h}(t);return new Je(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Mt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const Zw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(r){if(Qt(!!r,39018),typeof r=="string"){let t=0;const i=Zw.exec(r);if(Qt(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ve(r.seconds),nanos:ve(r.nanos)}}function ve(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qr(r){return typeof r=="string"?Je.fromBase64String(r):Je.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="server_timestamp",WE="__type__",tT="__previous_value__",eT="__local_write_time__";function Rm(r){return(r?.mapValue?.fields||{})[WE]?.stringValue===JE}function eh(r){const t=r.mapValue.fields[tT];return Rm(t)?eh(t):t}function Cl(r){const t=Fr(r.mapValue.fields[eT].timestampValue);return new ae(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t,i,s,l,h,d,g,y,_,A){this.databaseId=t,this.appId=i,this.persistenceKey=s,this.host=l,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=A}}const zc="(default)";class Dl{constructor(t,i){this.projectId=t,this.database=i||zc}static empty(){return new Dl("","")}get isDefaultDatabase(){return this.database===zc}isEqual(t){return t instanceof Dl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="__type__",Ww="__max__",yc={mapValue:{}},iT="__vector__",Bc="value";function Yr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rm(r)?4:eR(r)?9007199254740991:tR(r)?10:11:yt(28295,{value:r})}function Ti(r,t){if(r===t)return!0;const i=Yr(r);if(i!==Yr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Cl(r).isEqual(Cl(t));case 3:return function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const d=Fr(l.timestampValue),g=Fr(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(l,h){return Qr(l.bytesValue).isEqual(Qr(h.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(l,h){return ve(l.geoPointValue.latitude)===ve(h.geoPointValue.latitude)&&ve(l.geoPointValue.longitude)===ve(h.geoPointValue.longitude)}(r,t);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return ve(l.integerValue)===ve(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const d=ve(l.doubleValue),g=ve(h.doubleValue);return d===g?Lc(d)===Lc(g):isNaN(d)&&isNaN(g)}return!1}(r,t);case 9:return Ya(r.arrayValue.values||[],t.arrayValue.values||[],Ti);case 10:case 11:return function(l,h){const d=l.mapValue.fields||{},g=h.mapValue.fields||{};if(av(d)!==av(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!Ti(d[y],g[y])))return!1;return!0}(r,t);default:return yt(52216,{left:r})}}function Nl(r,t){return(r.values||[]).find(i=>Ti(i,t))!==void 0}function Ka(r,t){if(r===t)return 0;const i=Yr(r),s=Yr(t);if(i!==s)return Mt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Mt(r.booleanValue,t.booleanValue);case 2:return function(h,d){const g=ve(h.integerValue||h.doubleValue),y=ve(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(r,t);case 3:return lv(r.timestampValue,t.timestampValue);case 4:return lv(Cl(r),Cl(t));case 5:return Kd(r.stringValue,t.stringValue);case 6:return function(h,d){const g=Qr(h),y=Qr(d);return g.compareTo(y)}(r.bytesValue,t.bytesValue);case 7:return function(h,d){const g=h.split("/"),y=d.split("/");for(let _=0;_<g.length&&_<y.length;_++){const A=Mt(g[_],y[_]);if(A!==0)return A}return Mt(g.length,y.length)}(r.referenceValue,t.referenceValue);case 8:return function(h,d){const g=Mt(ve(h.latitude),ve(d.latitude));return g!==0?g:Mt(ve(h.longitude),ve(d.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return uv(r.arrayValue,t.arrayValue);case 10:return function(h,d){const g=h.fields||{},y=d.fields||{},_=g[Bc]?.arrayValue,A=y[Bc]?.arrayValue,D=Mt(_?.values?.length||0,A?.values?.length||0);return D!==0?D:uv(_,A)}(r.mapValue,t.mapValue);case 11:return function(h,d){if(h===yc.mapValue&&d===yc.mapValue)return 0;if(h===yc.mapValue)return 1;if(d===yc.mapValue)return-1;const g=h.fields||{},y=Object.keys(g),_=d.fields||{},A=Object.keys(_);y.sort(),A.sort();for(let D=0;D<y.length&&D<A.length;++D){const C=Kd(y[D],A[D]);if(C!==0)return C;const H=Ka(g[y[D]],_[A[D]]);if(H!==0)return H}return Mt(y.length,A.length)}(r.mapValue,t.mapValue);default:throw yt(23264,{he:i})}}function lv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Mt(r,t);const i=Fr(r),s=Fr(t),l=Mt(i.seconds,s.seconds);return l!==0?l:Mt(i.nanos,s.nanos)}function uv(r,t){const i=r.values||[],s=t.values||[];for(let l=0;l<i.length&&l<s.length;++l){const h=Ka(i[l],s[l]);if(h)return h}return Mt(i.length,s.length)}function Xa(r){return Xd(r)}function Xd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const s=Fr(i);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return Qr(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return ft.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let s="[",l=!0;for(const h of i.values||[])l?l=!1:s+=",",s+=Xd(h);return s+"]"}(r.arrayValue):"mapValue"in r?function(i){const s=Object.keys(i.fields||{}).sort();let l="{",h=!0;for(const d of s)h?h=!1:l+=",",l+=`${d}:${Xd(i.fields[d])}`;return l+"}"}(r.mapValue):yt(61005,{value:r})}function wc(r){switch(Yr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=eh(r);return t?16+wc(t):16;case 5:return 2*r.stringValue.length;case 6:return Qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,h)=>l+wc(h),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return $r(s.fields,(h,d)=>{l+=h.length+wc(d)}),l}(r.mapValue);default:throw yt(13486,{value:r})}}function $d(r){return!!r&&"integerValue"in r}function Im(r){return!!r&&"arrayValue"in r}function cv(r){return!!r&&"nullValue"in r}function hv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Rc(r){return!!r&&"mapValue"in r}function tR(r){return(r?.mapValue?.fields||{})[nT]?.stringValue===iT}function Tl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return $r(r.mapValue.fields,(i,s)=>t.mapValue.fields[i]=Tl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Tl(r.arrayValue.values[i]);return t}return{...r}}function eR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Ww}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.value=t}static empty(){return new _n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let s=0;s<t.length-1;++s)if(i=(i.mapValue.fields||{})[t.get(s)],!Rc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Tl(i)}setAll(t){let i=Ze.emptyPath(),s={},l=[];t.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const y=this.getFieldsMap(i);this.applyChanges(y,s,l),s={},l=[],i=g.popLast()}d?s[g.lastSegment()]=Tl(d):l.push(g.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,s,l)}delete(t){const i=this.field(t.popLast());Rc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ti(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=i.mapValue.fields[t.get(s)];Rc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(s)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,s){$r(i,(l,h)=>t[l]=h);for(const l of s)delete t[l]}clone(){return new _n(Tl(this.value))}}function rT(r){const t=[];return $r(r.fields,(i,s)=>{const l=new Ze([i]);if(Rc(s)){const h=rT(s.mapValue).fields;if(h.length===0)t.push(l);else for(const d of h)t.push(l.child(d))}else t.push(l)}),new Cn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t,i,s,l,h,d,g){this.key=t,this.documentType=i,this.version=s,this.readTime=l,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(t){return new sn(t,0,At.min(),At.min(),At.min(),_n.empty(),0)}static newFoundDocument(t,i,s,l){return new sn(t,1,i,At.min(),s,l,0)}static newNoDocument(t,i){return new sn(t,2,i,At.min(),At.min(),_n.empty(),0)}static newUnknownDocument(t,i){return new sn(t,3,i,At.min(),At.min(),_n.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof sn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,i){this.position=t,this.inclusive=i}}function fv(r,t,i){let s=0;for(let l=0;l<r.position.length;l++){const h=t[l],d=r.position[l];if(h.field.isKeyField()?s=ft.comparator(ft.fromName(d.referenceValue),i.key):s=Ka(d,i.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function dv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Ti(r.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t,i="asc"){this.field=t,this.dir=i}}function nR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{}class Pe extends sT{constructor(t,i,s){super(),this.field=t,this.op=i,this.value=s}static create(t,i,s){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,s):new rR(t,i,s):i==="array-contains"?new oR(t,s):i==="in"?new lR(t,s):i==="not-in"?new uR(t,s):i==="array-contains-any"?new cR(t,s):new Pe(t,i,s)}static createKeyFieldInFilter(t,i,s){return i==="in"?new sR(t,s):new aR(t,s)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Ka(i,this.value)):i!==null&&Yr(this.value)===Yr(i)&&this.matchesComparison(Ka(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends sT{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Ai(t,i)}matches(t){return aT(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function aT(r){return r.op==="and"}function oT(r){return iR(r)&&aT(r)}function iR(r){for(const t of r.filters)if(t instanceof Ai)return!1;return!0}function Zd(r){if(r instanceof Pe)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(oT(r))return r.filters.map(t=>Zd(t)).join(",");{const t=r.filters.map(i=>Zd(i)).join(",");return`${r.op}(${t})`}}function lT(r,t){return r instanceof Pe?function(s,l){return l instanceof Pe&&s.op===l.op&&s.field.isEqual(l.field)&&Ti(s.value,l.value)}(r,t):r instanceof Ai?function(s,l){return l instanceof Ai&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((h,d,g)=>h&&lT(d,l.filters[g]),!0):!1}(r,t):void yt(19439)}function uT(r){return r instanceof Pe?function(i){return`${i.field.canonicalString()} ${i.op} ${Xa(i.value)}`}(r):r instanceof Ai?function(i){return i.op.toString()+" {"+i.getFilters().map(uT).join(" ,")+"}"}(r):"Filter"}class rR extends Pe{constructor(t,i,s){super(t,i,s),this.key=ft.fromName(s.referenceValue)}matches(t){const i=ft.comparator(t.key,this.key);return this.matchesComparison(i)}}class sR extends Pe{constructor(t,i){super(t,"in",i),this.keys=cT("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class aR extends Pe{constructor(t,i){super(t,"not-in",i),this.keys=cT("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function cT(r,t){return(t.arrayValue?.values||[]).map(i=>ft.fromName(i.referenceValue))}class oR extends Pe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Im(i)&&Nl(i.arrayValue,this.value)}}class lR extends Pe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Nl(this.value.arrayValue,i)}}class uR extends Pe{constructor(t,i){super(t,"not-in",i)}matches(t){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Nl(this.value.arrayValue,i)}}class cR extends Pe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Im(i)||!i.arrayValue.values)&&i.arrayValue.values.some(s=>Nl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(t,i=null,s=[],l=[],h=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=s,this.filters=l,this.limit=h,this.startAt=d,this.endAt=g,this.Te=null}}function mv(r,t=null,i=[],s=[],l=null,h=null,d=null){return new hR(r,t,i,s,l,h,d)}function Cm(r){const t=St(r);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(s=>Zd(s)).join(","),i+="|ob:",i+=t.orderBy.map(s=>function(h){return h.field.canonicalString()+h.dir}(s)).join(","),th(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>Xa(s)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>Xa(s)).join(",")),t.Te=i}return t.Te}function Dm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!nR(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!lT(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!dv(r.startAt,t.startAt)&&dv(r.endAt,t.endAt)}function Jd(r){return ft.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,i=null,s=[],l=[],h=null,d="F",g=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=l,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fR(r,t,i,s,l,h,d,g){return new nh(r,t,i,s,l,h,d,g)}function Nm(r){return new nh(r)}function gv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function dR(r){return r.collectionGroup!==null}function Al(r){const t=St(r);if(t.Ie===null){t.Ie=[];const i=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),i.add(h.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ue(Ze.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(_=>{_.isInequality()&&(g=g.add(_.field))})}),g})(t).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new qc(h,s))}),i.has(Ze.keyField().canonicalString())||t.Ie.push(new qc(Ze.keyField(),s))}return t.Ie}function yi(r){const t=St(r);return t.Ee||(t.Ee=mR(t,Al(r))),t.Ee}function mR(r,t){if(r.limitType==="F")return mv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(l=>{const h=l.dir==="desc"?"asc":"desc";return new qc(l.field,h)});const i=r.endAt?new jc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new jc(r.startAt.position,r.startAt.inclusive):null;return mv(r.path,r.collectionGroup,t,r.filters,r.limit,i,s)}}function Wd(r,t,i){return new nh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function ih(r,t){return Dm(yi(r),yi(t))&&r.limitType===t.limitType}function hT(r){return`${Cm(yi(r))}|lt:${r.limitType}`}function Ua(r){return`Query(target=${function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map(l=>uT(l)).join(", ")}]`),th(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map(l=>Xa(l)).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map(l=>Xa(l)).join(",")),`Target(${s})`}(yi(r))}; limitType=${r.limitType})`}function rh(r,t){return t.isFoundDocument()&&function(s,l){const h=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):ft.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(r,t)&&function(s,l){for(const h of Al(s))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0}(r,t)&&function(s,l){for(const h of s.filters)if(!h.matches(l))return!1;return!0}(r,t)&&function(s,l){return!(s.startAt&&!function(d,g,y){const _=fv(d,g,y);return d.inclusive?_<=0:_<0}(s.startAt,Al(s),l)||s.endAt&&!function(d,g,y){const _=fv(d,g,y);return d.inclusive?_>=0:_>0}(s.endAt,Al(s),l))}(r,t)}function gR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function fT(r){return(t,i)=>{let s=!1;for(const l of Al(r)){const h=pR(l,t,i);if(h!==0)return h;s=s||l.field.isKeyField()}return 0}}function pR(r,t,i){const s=r.field.isKeyField()?ft.comparator(t.key,i.key):function(h,d,g){const y=d.data.field(h),_=g.data.field(h);return y!==null&&_!==null?Ka(y,_):yt(42886)}(r.field,t,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return yt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s!==void 0){for(const[l,h]of s)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,i){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,i]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[i]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){$r(this.inner,(i,s)=>{for(const[l,h]of s)t(l,h)})}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new he(ft.comparator);function ir(){return yR}const dT=new he(ft.comparator);function gl(...r){let t=dT;for(const i of r)t=t.insert(i.key,i);return t}function mT(r){let t=dT;return r.forEach((i,s)=>t=t.insert(i,s.overlayedDocument)),t}function Ms(){return Sl()}function gT(){return Sl()}function Sl(){return new qs(r=>r.toString(),(r,t)=>r.isEqual(t))}const _R=new he(ft.comparator),vR=new Ue(ft.comparator);function xt(...r){let t=vR;for(const i of r)t=t.add(i);return t}const ER=new Ue(Mt);function TR(){return ER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(t)?"-0":t}}function pT(r){return{integerValue:""+r}}function AR(r,t){return Kw(t)?pT(t):Om(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this._=void 0}}function SR(r,t,i){return r instanceof Hc?function(l,h){const d={fields:{[WE]:{stringValue:JE},[eT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&Rm(h)&&(h=eh(h)),h&&(d.fields[tT]=h),{mapValue:d}}(i,t):r instanceof Ol?_T(r,t):r instanceof Vl?vT(r,t):function(l,h){const d=yT(l,h),g=pv(d)+pv(l.Ae);return $d(d)&&$d(l.Ae)?pT(g):Om(l.serializer,g)}(r,t)}function bR(r,t,i){return r instanceof Ol?_T(r,t):r instanceof Vl?vT(r,t):i}function yT(r,t){return r instanceof Gc?function(s){return $d(s)||function(h){return!!h&&"doubleValue"in h}(s)}(t)?t:{integerValue:0}:null}class Hc extends sh{}class Ol extends sh{constructor(t){super(),this.elements=t}}function _T(r,t){const i=ET(t);for(const s of r.elements)i.some(l=>Ti(l,s))||i.push(s);return{arrayValue:{values:i}}}class Vl extends sh{constructor(t){super(),this.elements=t}}function vT(r,t){let i=ET(t);for(const s of r.elements)i=i.filter(l=>!Ti(l,s));return{arrayValue:{values:i}}}class Gc extends sh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function pv(r){return ve(r.integerValue||r.doubleValue)}function ET(r){return Im(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function wR(r,t){return r.field.isEqual(t.field)&&function(s,l){return s instanceof Ol&&l instanceof Ol||s instanceof Vl&&l instanceof Vl?Ya(s.elements,l.elements,Ti):s instanceof Gc&&l instanceof Gc?Ti(s.Ae,l.Ae):s instanceof Hc&&l instanceof Hc}(r.transform,t.transform)}class RR{constructor(t,i){this.version=t,this.transformResults=i}}class Hn{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Hn}static exists(t){return new Hn(void 0,t)}static updateTime(t){return new Hn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ic(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class ah{}function TT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Vm(r.key,Hn.none()):new jl(r.key,r.data,Hn.none());{const i=r.data,s=_n.empty();let l=new Ue(Ze.comparator);for(let h of t.fields)if(!l.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?s.delete(h):s.set(h,d),l=l.add(h)}return new Zr(r.key,s,new Cn(l.toArray()),Hn.none())}}function IR(r,t,i){r instanceof jl?function(l,h,d){const g=l.value.clone(),y=_v(l.fieldTransforms,h,d.transformResults);g.setAll(y),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,t,i):r instanceof Zr?function(l,h,d){if(!Ic(l.precondition,h))return void h.convertToUnknownDocument(d.version);const g=_v(l.fieldTransforms,h,d.transformResults),y=h.data;y.setAll(AT(l)),y.setAll(g),h.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(r,t,i):function(l,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,i)}function bl(r,t,i,s){return r instanceof jl?function(h,d,g,y){if(!Ic(h.precondition,d))return g;const _=h.value.clone(),A=vv(h.fieldTransforms,y,d);return _.setAll(A),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null}(r,t,i,s):r instanceof Zr?function(h,d,g,y){if(!Ic(h.precondition,d))return g;const _=vv(h.fieldTransforms,y,d),A=d.data;return A.setAll(AT(h)),A.setAll(_),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(D=>D.field))}(r,t,i,s):function(h,d,g){return Ic(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(r,t,i)}function CR(r,t){let i=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),h=yT(s.transform,l||null);h!=null&&(i===null&&(i=_n.empty()),i.set(s.field,h))}return i||null}function yv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ya(s,l,(h,d)=>wR(h,d))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class jl extends ah{constructor(t,i,s,l=[]){super(),this.key=t,this.value=i,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Zr extends ah{constructor(t,i,s,l,h=[]){super(),this.key=t,this.data=i,this.fieldMask=s,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function AT(r){const t=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const s=r.data.field(i);t.set(i,s)}}),t}function _v(r,t,i){const s=new Map;Qt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const h=r[l],d=h.transform,g=t.data.field(h.field);s.set(h.field,bR(d,g,i[l]))}return s}function vv(r,t,i){const s=new Map;for(const l of r){const h=l.transform,d=i.data.field(l.field);s.set(l.field,SR(h,d,t))}return s}class Vm extends ah{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DR extends ah{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(t,i,s,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,i){const s=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&IR(h,t,s[l])}}applyToLocalView(t,i){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(i=bl(s,t,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(i=bl(s,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const s=gT();return this.mutations.forEach(l=>{const h=t.get(l.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(l.key)?null:g;const y=TT(d,g);y!==null&&s.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(At.min())}),s}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),xt())}isEqual(t){return this.batchId===t.batchId&&Ya(this.mutations,t.mutations,(i,s)=>yv(i,s))&&Ya(this.baseMutations,t.baseMutations,(i,s)=>yv(i,s))}}class Mm{constructor(t,i,s,l){this.batch=t,this.commitVersion=i,this.mutationResults=s,this.docVersions=l}static from(t,i,s){Qt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=function(){return _R}();const h=t.mutations;for(let d=0;d<h.length;d++)l=l.insert(h[d].key,s[d].version);return new Mm(t,i,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,zt;function MR(r){switch(r){case X.OK:return yt(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return yt(15467,{code:r})}}function ST(r){if(r===void 0)return nr("GRPC error has no .code"),X.UNKNOWN;switch(r){case Re.OK:return X.OK;case Re.CANCELLED:return X.CANCELLED;case Re.UNKNOWN:return X.UNKNOWN;case Re.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Re.INTERNAL:return X.INTERNAL;case Re.UNAVAILABLE:return X.UNAVAILABLE;case Re.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Re.NOT_FOUND:return X.NOT_FOUND;case Re.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Re.ABORTED:return X.ABORTED;case Re.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Re.DATA_LOSS:return X.DATA_LOSS;default:return yt(39323,{code:r})}}(zt=Re||(Re={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new qr([4294967295,4294967295],0);function Ev(r){const t=xR().encode(r),i=new zE;return i.update(t),new Uint8Array(i.digest())}function Tv(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new qr([i,s],0),new qr([l,h],0)]}class xm{constructor(t,i,s){if(this.bitmap=t,this.padding=i,this.hashCount=s,i<0||i>=8)throw new pl(`Invalid padding: ${i}`);if(s<0)throw new pl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new pl(`Invalid hash count: ${s}`);if(t.length===0&&i!==0)throw new pl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=qr.fromNumber(this.ge)}ye(t,i,s){let l=t.add(i.multiply(qr.fromNumber(s)));return l.compare(PR)===1&&(l=new qr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=Ev(t),[s,l]=Tv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(s,l,h);if(!this.we(d))return!1}return!0}static create(t,i,s){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),d=new xm(h,l,i);return s.forEach(g=>d.insert(g)),d}insert(t){if(this.ge===0)return;const i=Ev(t),[s,l]=Tv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(s,l,h);this.Se(d)}}Se(t){const i=Math.floor(t/8),s=t%8;this.bitmap[i]|=1<<s}}class pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,i,s,l,h){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,i,s){const l=new Map;return l.set(t,ql.createSynthesizedTargetChangeForCurrentChange(t,i,s)),new oh(At.min(),l,new he(Mt),ir(),xt())}}class ql{constructor(t,i,s,l,h){this.resumeToken=t,this.current=i,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,i,s){return new ql(s,i,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t,i,s,l){this.be=t,this.removedTargetIds=i,this.key=s,this.De=l}}class bT{constructor(t,i){this.targetId=t,this.Ce=i}}class wT{constructor(t,i,s=Je.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=s,this.cause=l}}class Av{constructor(){this.ve=0,this.Fe=Sv(),this.Me=Je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=xt(),i=xt(),s=xt();return this.Fe.forEach((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:s=s.add(l);break;default:yt(38017,{changeType:h})}}),new ql(this.Me,this.xe,t,i,s)}qe(){this.Oe=!1,this.Fe=Sv()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UR{constructor(t){this.Ge=t,this.ze=new Map,this.je=ir(),this.Je=_c(),this.He=_c(),this.Ye=new he(Mt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,i=>{const s=this.nt(i);switch(t.state){case 0:this.rt(i)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),s.Le(t.resumeToken));break;default:yt(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach((s,l)=>{this.rt(l)&&i(l)})}st(t){const i=t.targetId,s=t.Ce.count,l=this.ot(i);if(l){const h=l.target;if(Jd(h))if(s===0){const d=new ft(h.path);this.et(i,d,sn.newNoDocument(d,At.min()))}else Qt(s===1,20013,{expectedCount:s});else{const d=this._t(i);if(d!==s){const g=this.ut(t),y=g?this.ct(g,t,d):1;if(y!==0){this.it(i);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=i;let d,g;try{d=Qr(s).toUint8Array()}catch(y){if(y instanceof ZE)return Qa("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new xm(d,l,h)}catch(y){return Qa(y instanceof pl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(t,i,s){return i.Ce.count===s-this.Pt(t,i.targetId)?0:2}Pt(t,i){const s=this.Ge.getRemoteKeysForTarget(i);let l=0;return s.forEach(h=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;t.mightContain(g)||(this.et(i,h,null),l++)}),l}Tt(t){const i=new Map;this.ze.forEach((h,d)=>{const g=this.ot(d);if(g){if(h.current&&Jd(g.target)){const y=new ft(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,sn.newNoDocument(y,t))}h.Be&&(i.set(d,h.ke()),h.qe())}});let s=xt();this.He.forEach((h,d)=>{let g=!0;d.forEachWhile(y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(h))}),this.je.forEach((h,d)=>d.setReadTime(t));const l=new oh(t,i,this.Ye,this.je,s);return this.je=ir(),this.Je=_c(),this.He=_c(),this.Ye=new he(Mt),l}Xe(t,i){if(!this.rt(t))return;const s=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,s),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),s&&(this.je=this.je.insert(i,s))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new Av,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new Ue(Mt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new Ue(Mt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||st("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Av),this.Ge.getRemoteKeysForTarget(t).forEach(i=>{this.et(t,i,null)})}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function _c(){return new he(ft.comparator)}function Sv(){return new he(ft.comparator)}const kR={asc:"ASCENDING",desc:"DESCENDING"},LR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zR={and:"AND",or:"OR"};class BR{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function tm(r,t){return r.useProto3Json||th(t)?t:{value:t}}function Fc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function RT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function jR(r,t){return Fc(r,t.toTimestamp())}function _i(r){return Qt(!!r,49232),At.fromTimestamp(function(i){const s=Fr(i);return new ae(s.seconds,s.nanos)}(r))}function Pm(r,t){return em(r,t).canonicalString()}function em(r,t){const i=function(l){return new se(["projects",l.projectId,"databases",l.database])}(r).child("documents");return t===void 0?i:i.child(t)}function IT(r){const t=se.fromString(r);return Qt(VT(t),10190,{key:t.toString()}),t}function nm(r,t){return Pm(r.databaseId,t.path)}function Vd(r,t){const i=IT(t);if(i.get(1)!==r.databaseId.projectId)throw new lt(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new lt(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new ft(DT(i))}function CT(r,t){return Pm(r.databaseId,t)}function qR(r){const t=IT(r);return t.length===4?se.emptyPath():DT(t)}function im(r){return new se(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function DT(r){return Qt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function bv(r,t,i){return{name:nm(r,t),fields:i.value.mapValue.fields}}function HR(r,t){let i;if("targetChange"in t){t.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:yt(39313,{state:_})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=function(_,A){return _.useProto3Json?(Qt(A===void 0||typeof A=="string",58123),Je.fromBase64String(A||"")):(Qt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Je.fromUint8Array(A||new Uint8Array))}(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&function(_){const A=_.code===void 0?X.UNKNOWN:ST(_.code);return new lt(A,_.message||"")}(d);i=new wT(s,l,h,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Vd(r,s.document.name),h=_i(s.document.updateTime),d=s.document.createTime?_i(s.document.createTime):At.min(),g=new _n({mapValue:{fields:s.document.fields}}),y=sn.newFoundDocument(l,h,d,g),_=s.targetIds||[],A=s.removedTargetIds||[];i=new Cc(_,A,y.key,y)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Vd(r,s.document),h=s.readTime?_i(s.readTime):At.min(),d=sn.newNoDocument(l,h),g=s.removedTargetIds||[];i=new Cc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Vd(r,s.document),h=s.removedTargetIds||[];i=new Cc([],h,l,null)}else{if(!("filter"in t))return yt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:h}=s,d=new VR(l,h),g=s.targetId;i=new bT(g,d)}}return i}function GR(r,t){let i;if(t instanceof jl)i={update:bv(r,t.key,t.value)};else if(t instanceof Vm)i={delete:nm(r,t.key)};else if(t instanceof Zr)i={update:bv(r,t.key,t.data),updateMask:WR(t.fieldMask)};else{if(!(t instanceof DR))return yt(16599,{Vt:t.type});i={verify:nm(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(s=>function(h,d){const g=d.transform;if(g instanceof Hc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ol)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Vl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Gc)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw yt(20930,{transform:d.transform})}(0,s))),t.precondition.isNone||(i.currentDocument=function(l,h){return h.updateTime!==void 0?{updateTime:jR(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:yt(27497)}(r,t.precondition)),i}function FR(r,t){return r&&r.length>0?(Qt(t!==void 0,14353),r.map(i=>function(l,h){let d=l.updateTime?_i(l.updateTime):_i(h);return d.isEqual(At.min())&&(d=_i(h)),new RR(d,l.transformResults||[])}(i,t))):[]}function QR(r,t){return{documents:[CT(r,t.path)]}}function YR(r,t){const i={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=CT(r,l);const h=function(_){if(_.length!==0)return OT(Ai.create(_,"and"))}(t.filters);h&&(i.structuredQuery.where=h);const d=function(_){if(_.length!==0)return _.map(A=>function(C){return{field:ka(C.field),direction:$R(C.dir)}}(A))}(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=tm(r,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ft:i,parent:l}}function KR(r){let t=qR(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let l=null;if(s>0){Qt(s===1,65062);const A=i.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let h=[];i.where&&(h=function(D){const C=NT(D);return C instanceof Ai&&oT(C)?C.getFilters():[C]}(i.where));let d=[];i.orderBy&&(d=function(D){return D.map(C=>function($){return new qc(La($.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(C))}(i.orderBy));let g=null;i.limit&&(g=function(D){let C;return C=typeof D=="object"?D.value:D,th(C)?null:C}(i.limit));let y=null;i.startAt&&(y=function(D){const C=!!D.before,H=D.values||[];return new jc(H,C)}(i.startAt));let _=null;return i.endAt&&(_=function(D){const C=!D.before,H=D.values||[];return new jc(H,C)}(i.endAt)),fR(t,l,d,h,g,"F",y,_)}function XR(r,t){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:l})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function NT(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=La(i.unaryFilter.field);return Pe.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=La(i.unaryFilter.field);return Pe.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=La(i.unaryFilter.field);return Pe.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=La(i.unaryFilter.field);return Pe.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}}(r):r.fieldFilter!==void 0?function(i){return Pe.create(La(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return Ai.create(i.compositeFilter.filters.map(s=>NT(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return yt(1026)}}(i.compositeFilter.op))}(r):yt(30097,{filter:r})}function $R(r){return kR[r]}function ZR(r){return LR[r]}function JR(r){return zR[r]}function ka(r){return{fieldPath:r.canonicalString()}}function La(r){return Ze.fromServerFormat(r.fieldPath)}function OT(r){return r instanceof Pe?function(i){if(i.op==="=="){if(hv(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NAN"}};if(cv(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(hv(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NOT_NAN"}};if(cv(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(i.field),op:ZR(i.op),value:i.value}}}(r):r instanceof Ai?function(i){const s=i.getFilters().map(l=>OT(l));return s.length===1?s[0]:{compositeFilter:{op:JR(i.op),filters:s}}}(r):yt(54877,{filter:r})}function WR(r){const t=[];return r.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function VT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,i,s,l,h=At.min(),d=At.min(),g=Je.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(t){return new Lr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t){this.yt=t}}function eI(r){const t=KR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Wd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.Cn=new iI}addToCollectionParentIndex(t,i){return this.Cn.add(i),Y.resolve()}getCollectionParents(t,i){return Y.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return Y.resolve()}deleteFieldIndex(t,i){return Y.resolve()}deleteAllFieldIndexes(t){return Y.resolve()}createTargetIndexes(t,i){return Y.resolve()}getDocumentsMatchingTarget(t,i){return Y.resolve(null)}getIndexType(t,i){return Y.resolve(0)}getFieldIndexes(t,i){return Y.resolve([])}getNextCollectionGroupToUpdate(t){return Y.resolve(null)}getMinOffset(t,i){return Y.resolve(Gr.min())}getMinOffsetFromCollectionGroup(t,i){return Y.resolve(Gr.min())}updateCollectionGroup(t,i,s){return Y.resolve()}updateIndexEntries(t,i){return Y.resolve()}}class iI{constructor(){this.index={}}add(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i]||new Ue(se.comparator),h=!l.has(s);return this.index[i]=l.add(s),h}has(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ue(se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MT=41943040;class yn{static withCacheSize(t){return new yn(t,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(MT,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $a(0)}static cr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="LruGarbageCollector",rI=1048576;function Iv([r,t],[i,s]){const l=Mt(r,i);return l===0?Mt(t,s):l}class sI{constructor(t){this.Ir=t,this.buffer=new Ue(Iv),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();Iv(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class aI{constructor(t,i,s){this.garbageCollector=t,this.asyncQueue=i,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(Rv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){io(i)?st(Rv,"Ignoring IndexedDB error during garbage collection: ",i):await no(i)}await this.Vr(3e5)})}}class oI{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next(s=>Math.floor(i/100*s))}nthSequenceNumber(t,i){if(i===0)return Y.resolve(Wc.ce);const s=new sI(i);return this.mr.forEachTarget(t,l=>s.Ar(l.sequenceNumber)).next(()=>this.mr.pr(t,l=>s.Ar(l))).next(()=>s.maxValue)}removeTargets(t,i,s){return this.mr.removeTargets(t,i,s)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(wv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wv):this.yr(t,i))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let s,l,h,d,g,y,_;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),l=this.params.maximumSequenceNumbersToCollect):l=D,d=Date.now(),this.nthSequenceNumber(t,l))).next(D=>(s=D,g=Date.now(),this.removeTargets(t,s,i))).next(D=>(h=D,y=Date.now(),this.removeOrphanedDocuments(t,s))).next(D=>(_=Date.now(),Pa()<=Vt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${h} targets in `+(y-g)+`ms
	Removed ${D} documents in `+(_-y)+`ms
Total Duration: ${_-A}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:D})))}}function lI(r,t){return new oI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.changes=new qs(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,sn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?Y.resolve(s):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t,i,s,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,i){let s=null;return this.documentOverlayCache.getOverlay(t,i).next(l=>(s=l,this.remoteDocumentCache.getEntry(t,i))).next(l=>(s!==null&&bl(s.mutation,l,Cn.empty(),ae.now()),l))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.getLocalViewOfDocuments(t,s,xt()).next(()=>s))}getLocalViewOfDocuments(t,i,s=xt()){const l=Ms();return this.populateOverlays(t,l,i).next(()=>this.computeViews(t,i,l,s).next(h=>{let d=gl();return h.forEach((g,y)=>{d=d.insert(g,y.overlayedDocument)}),d}))}getOverlayedDocuments(t,i){const s=Ms();return this.populateOverlays(t,s,i).next(()=>this.computeViews(t,i,s,xt()))}populateOverlays(t,i,s){const l=[];return s.forEach(h=>{i.has(h)||l.push(h)}),this.documentOverlayCache.getOverlays(t,l).next(h=>{h.forEach((d,g)=>{i.set(d,g)})})}computeViews(t,i,s,l){let h=ir();const d=Sl(),g=function(){return Sl()}();return i.forEach((y,_)=>{const A=s.get(_.key);l.has(_.key)&&(A===void 0||A.mutation instanceof Zr)?h=h.insert(_.key,_):A!==void 0?(d.set(_.key,A.mutation.getFieldMask()),bl(A.mutation,_,A.mutation.getFieldMask(),ae.now())):d.set(_.key,Cn.empty())}),this.recalculateAndSaveOverlays(t,h).next(y=>(y.forEach((_,A)=>d.set(_,A)),i.forEach((_,A)=>g.set(_,new cI(A,d.get(_)??null))),g))}recalculateAndSaveOverlays(t,i){const s=Sl();let l=new he((d,g)=>d-g),h=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(d=>{for(const g of d)g.keys().forEach(y=>{const _=i.get(y);if(_===null)return;let A=s.get(y)||Cn.empty();A=g.applyToLocalView(_,A),s.set(y,A);const D=(l.get(g.batchId)||xt()).add(y);l=l.insert(g.batchId,D)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),_=y.key,A=y.value,D=gT();A.forEach(C=>{if(!h.has(C)){const H=TT(i.get(C),s.get(C));H!==null&&D.set(C,H),h=h.add(C)}}),d.push(this.documentOverlayCache.saveOverlays(t,_,D))}return Y.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,i,s,l){return function(d){return ft.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):dR(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,s,l):this.getDocumentsMatchingCollectionQuery(t,i,s,l)}getNextDocuments(t,i,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,s,l).next(h=>{const d=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,s.largestBatchId,l-h.size):Y.resolve(Ms());let g=Il,y=h;return d.next(_=>Y.forEach(_,(A,D)=>(g<D.largestBatchId&&(g=D.largestBatchId),h.get(A)?Y.resolve():this.remoteDocumentCache.getEntry(t,A).next(C=>{y=y.insert(A,C)}))).next(()=>this.populateOverlays(t,_,h)).next(()=>this.computeViews(t,y,_,xt())).next(A=>({batchId:g,changes:mT(A)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new ft(i)).next(s=>{let l=gl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(t,i,s,l){const h=i.collectionGroup;let d=gl();return this.indexManager.getCollectionParents(t,h).next(g=>Y.forEach(g,y=>{const _=function(D,C){return new nh(C,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt)}(i,y.child(h));return this.getDocumentsMatchingCollectionQuery(t,_,s,l).next(A=>{A.forEach((D,C)=>{d=d.insert(D,C)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,i,s,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,s.largestBatchId).next(d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,s,h,l))).next(d=>{h.forEach((y,_)=>{const A=_.getKey();d.get(A)===null&&(d=d.insert(A,sn.newInvalidDocument(A)))});let g=gl();return d.forEach((y,_)=>{const A=h.get(y);A!==void 0&&bl(A.mutation,_,Cn.empty(),ae.now()),rh(i,_)&&(g=g.insert(y,_))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return Y.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,function(l){return{id:l.id,version:l.version,createTime:_i(l.createTime)}}(i)),Y.resolve()}getNamedQuery(t,i){return Y.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,function(l){return{name:l.name,query:eI(l.bundledQuery),readTime:_i(l.readTime)}}(i)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.overlays=new he(ft.comparator),this.qr=new Map}getOverlay(t,i){return Y.resolve(this.overlays.get(i))}getOverlays(t,i){const s=Ms();return Y.forEach(i,l=>this.getOverlay(t,l).next(h=>{h!==null&&s.set(l,h)})).next(()=>s)}saveOverlays(t,i,s){return s.forEach((l,h)=>{this.St(t,i,h)}),Y.resolve()}removeOverlaysForBatchId(t,i,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach(h=>this.overlays=this.overlays.remove(h)),this.qr.delete(s)),Y.resolve()}getOverlaysForCollection(t,i,s){const l=Ms(),h=i.length+1,d=new ft(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,_=y.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===h&&y.largestBatchId>s&&l.set(y.getKey(),y)}return Y.resolve(l)}getOverlaysForCollectionGroup(t,i,s,l){let h=new he((_,A)=>_-A);const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>s){let A=h.get(_.largestBatchId);A===null&&(A=Ms(),h=h.insert(_.largestBatchId,A)),A.set(_.getKey(),_)}}const g=Ms(),y=h.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((_,A)=>g.set(_,A)),!(g.size()>=l)););return Y.resolve(g)}St(t,i,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new OR(i,s));let h=this.qr.get(i);h===void 0&&(h=xt(),this.qr.set(i,h)),this.qr.set(i,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(t){return Y.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.Qr=new Ue(He.$r),this.Ur=new Ue(He.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const s=new He(t,i);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,i){t.forEach(s=>this.addReference(s,i))}removeReference(t,i){this.Gr(new He(t,i))}zr(t,i){t.forEach(s=>this.removeReference(s,i))}jr(t){const i=new ft(new se([])),s=new He(i,t),l=new He(i,t+1),h=[];return this.Ur.forEachInRange([s,l],d=>{this.Gr(d),h.push(d.key)}),h}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new ft(new se([])),s=new He(i,t),l=new He(i,t+1);let h=xt();return this.Ur.forEachInRange([s,l],d=>{h=h.add(d.key)}),h}containsKey(t){const i=new He(t,0),s=this.Qr.firstAfterOrEqual(i);return s!==null&&t.isEqual(s.key)}}class He{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return ft.comparator(t.key,i.key)||Mt(t.Yr,i.Yr)}static Kr(t,i){return Mt(t.Yr,i.Yr)||ft.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Ue(He.$r)}checkEmpty(t){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,s,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new NR(h,i,s,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new He(g.key,h)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return Y.resolve(d)}lookupMutationBatch(t,i){return Y.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const s=i+1,l=this.ei(s),h=l<0?0:l;return Y.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?wm:this.tr-1)}getAllMutationBatches(t){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const s=new He(i,0),l=new He(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([s,l],d=>{const g=this.Xr(d.Yr);h.push(g)}),Y.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,i){let s=new Ue(Mt);return i.forEach(l=>{const h=new He(l,0),d=new He(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],g=>{s=s.add(g.Yr)})}),Y.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,i){const s=i.path,l=s.length+1;let h=s;ft.isDocumentKey(h)||(h=h.child(""));const d=new He(new ft(h),0);let g=new Ue(Mt);return this.Zr.forEachWhile(y=>{const _=y.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(g=g.add(y.Yr)),!0)},d),Y.resolve(this.ti(g))}ti(t){const i=[];return t.forEach(s=>{const l=this.Xr(s);l!==null&&i.push(l)}),i}removeMutationBatch(t,i){Qt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Y.forEach(i.mutations,l=>{const h=new He(l.key,i.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,i){const s=new He(i,0),l=this.Zr.firstAfterOrEqual(s);return Y.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Y.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(t){this.ri=t,this.docs=function(){return new he(ft.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const s=i.key,l=this.docs.get(s),h=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const s=this.docs.get(i);return Y.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(i))}getEntries(t,i){let s=ir();return i.forEach(l=>{const h=this.docs.get(l);s=s.insert(l,h?h.document.mutableCopy():sn.newInvalidDocument(l))}),Y.resolve(s)}getDocumentsMatchingQuery(t,i,s,l){let h=ir();const d=i.path,g=new ft(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:_,value:{document:A}}=y.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||Gw(Hw(A),s)<=0||(l.has(A.key)||rh(i,A))&&(h=h.insert(A.key,A.mutableCopy()))}return Y.resolve(h)}getAllFromCollectionGroup(t,i,s,l){yt(9500)}ii(t,i){return Y.forEach(this.docs,s=>i(s))}newChangeBuffer(t){return new yI(this)}getSize(t){return Y.resolve(this.size)}}class yI extends uI{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)}),Y.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t){this.persistence=t,this.si=new qs(i=>Cm(i),Dm),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.oi=0,this._i=new Um,this.targetCount=0,this.ai=$a.ur()}forEachTarget(t,i){return this.si.forEach((s,l)=>i(l)),Y.resolve()}getLastRemoteSnapshotVersion(t){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Y.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(t,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.oi&&(this.oi=i),Y.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new $a(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,Y.resolve()}updateTargetData(t,i){return this.Pr(i),Y.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Y.resolve()}removeTargets(t,i,s){let l=0;const h=[];return this.si.forEach((d,g)=>{g.sequenceNumber<=i&&s.get(g.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),Y.waitFor(h).next(()=>l)}getTargetCount(t){return Y.resolve(this.targetCount)}getTargetData(t,i){const s=this.si.get(i)||null;return Y.resolve(s)}addMatchingKeys(t,i,s){return this._i.Wr(i,s),Y.resolve()}removeMatchingKeys(t,i,s){this._i.zr(i,s);const l=this.persistence.referenceDelegate,h=[];return l&&i.forEach(d=>{h.push(l.markPotentiallyOrphaned(t,d))}),Y.waitFor(h)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),Y.resolve()}getMatchingKeysForTargetId(t,i){const s=this._i.Hr(i);return Y.resolve(s)}containsKey(t,i){return Y.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(t,i){this.ui={},this.overlays={},this.ci=new Wc(0),this.li=!1,this.li=!0,this.hi=new mI,this.referenceDelegate=t(this),this.Pi=new _I(this),this.indexManager=new nI,this.remoteDocumentCache=function(l){return new pI(l)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new tI(i),this.Ii=new fI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new dI,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let s=this.ui[t.toKey()];return s||(s=new gI(i,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,s){st("MemoryPersistence","Starting transaction:",t);const l=new vI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next(h=>this.referenceDelegate.di(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Ai(t,i){return Y.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,i)))}}class vI extends Qw{constructor(t){super(),this.currentSequenceNumber=t}}class km{constructor(t){this.persistence=t,this.Ri=new Um,this.Vi=null}static mi(t){return new km(t)}get fi(){if(this.Vi)return this.Vi;throw yt(60996)}addReference(t,i,s){return this.Ri.addReference(s,i),this.fi.delete(s.toString()),Y.resolve()}removeReference(t,i,s){return this.Ri.removeReference(s,i),this.fi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),Y.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach(l=>this.fi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,i.targetId).next(l=>{l.forEach(h=>this.fi.add(h.toString()))}).next(()=>s.removeTargetData(t,i))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,s=>{const l=ft.fromPath(s);return this.gi(t,l).next(h=>{h||i.removeEntry(l,At.min())})}).next(()=>(this.Vi=null,i.apply(t)))}updateLimboDocument(t,i){return this.gi(t,i).next(s=>{s?this.fi.delete(i.toString()):this.fi.add(i.toString())})}Ti(t){return 0}gi(t,i){return Y.or([()=>Y.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class Qc{constructor(t,i){this.persistence=t,this.pi=new qs(s=>Xw(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=lI(this,i)}static mi(t,i){return new Qc(t,i)}Ei(){}di(t){return Y.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>i.next(l=>s+l))}wr(t){let i=0;return this.pr(t,s=>{i++}).next(()=>i)}pr(t,i){return Y.forEach(this.pi,(s,l)=>this.br(t,s,l).next(h=>h?Y.resolve():i(l)))}removeTargets(t,i,s){return this.persistence.getTargetCache().removeTargets(t,i,s)}removeOrphanedDocuments(t,i){let s=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,d=>this.br(t,d,i).next(g=>{g||(s++,h.removeEntry(d,At.min()))})).next(()=>h.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}removeTarget(t,i){const s=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}removeReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=wc(t.data.value)),i}br(t,i,s){return Y.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return Y.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t,i,s,l){this.targetId=t,this.fromCache=i,this.Es=s,this.ds=l}static As(t,i){let s=xt(),l=xt();for(const h of i.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new Lm(t,i.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return fS()?8:Yw(an())>0?6:4}()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,s,l){const h={result:null};return this.ys(t,i).next(d=>{h.result=d}).next(()=>{if(!h.result)return this.ws(t,i,l,s).next(d=>{h.result=d})}).next(()=>{if(h.result)return;const d=new EI;return this.Ss(t,i,d).next(g=>{if(h.result=g,this.Vs)return this.bs(t,i,d,g.size)})}).next(()=>h.result)}bs(t,i,s,l){return s.documentReadCount<this.fs?(Pa()<=Vt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Ua(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(Pa()<=Vt.DEBUG&&st("QueryEngine","Query:",Ua(i),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Pa()<=Vt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Ua(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yi(i))):Y.resolve())}ys(t,i){if(gv(i))return Y.resolve(null);let s=yi(i);return this.indexManager.getIndexType(t,s).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=Wd(i,null,"F"),s=yi(i)),this.indexManager.getDocumentsMatchingTarget(t,s).next(h=>{const d=xt(...h);return this.ps.getDocuments(t,d).next(g=>this.indexManager.getMinOffset(t,s).next(y=>{const _=this.Ds(i,g);return this.Cs(i,_,d,y.readTime)?this.ys(t,Wd(i,null,"F")):this.vs(t,_,i,y)}))})))}ws(t,i,s,l){return gv(i)||l.isEqual(At.min())?Y.resolve(null):this.ps.getDocuments(t,s).next(h=>{const d=this.Ds(i,h);return this.Cs(i,d,s,l)?Y.resolve(null):(Pa()<=Vt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ua(i)),this.vs(t,d,i,qw(l,Il)).next(g=>g))})}Ds(t,i){let s=new Ue(fT(t));return i.forEach((l,h)=>{rh(t,h)&&(s=s.add(h))}),s}Cs(t,i,s,l){if(t.limit===null)return!1;if(s.size!==i.size)return!0;const h=t.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,i,s){return Pa()<=Vt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Ua(i)),this.ps.getDocumentsMatchingQuery(t,i,Gr.min(),s)}vs(t,i,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next(h=>(i.forEach(d=>{h=h.insert(d.key,d)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="LocalStore",AI=3e8;class SI{constructor(t,i,s,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new he(Mt),this.xs=new qs(h=>Cm(h),Dm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Ms))}}function bI(r,t,i,s){return new SI(r,t,i,s)}async function PT(r,t){const i=St(r);return await i.persistence.runTransaction("Handle user change","readonly",s=>{let l;return i.mutationQueue.getAllMutationBatches(s).next(h=>(l=h,i.Bs(t),i.mutationQueue.getAllMutationBatches(s))).next(h=>{const d=[],g=[];let y=xt();for(const _ of l){d.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}for(const _ of h){g.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}return i.localDocuments.getDocuments(s,y).next(_=>({Ls:_,removedBatchIds:d,addedBatchIds:g}))})})}function wI(r,t){const i=St(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=t.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return function(g,y,_,A){const D=_.batch,C=D.keys();let H=Y.resolve();return C.forEach($=>{H=H.next(()=>A.getEntry(y,$)).next(rt=>{const J=_.docVersions.get($);Qt(J!==null,48541),rt.version.compareTo(J)<0&&(D.applyToRemoteDocument(rt,_),rt.isValidDocument()&&(rt.setReadTime(_.commitVersion),A.addEntry(rt)))})}),H.next(()=>g.mutationQueue.removeMutationBatch(y,D))}(i,s,t,h).next(()=>h.apply(s)).next(()=>i.mutationQueue.performConsistencyCheck(s)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let y=xt();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(y=y.add(g.batch.mutations[_].key));return y}(t))).next(()=>i.localDocuments.getDocuments(s,l))})}function UT(r){const t=St(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Pi.getLastRemoteSnapshotVersion(i))}function RI(r,t){const i=St(r),s=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];t.targetChanges.forEach((A,D)=>{const C=l.get(D);if(!C)return;g.push(i.Pi.removeMatchingKeys(h,A.removedDocuments,D).next(()=>i.Pi.addMatchingKeys(h,A.addedDocuments,D)));let H=C.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(D)!==null?H=H.withResumeToken(Je.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):A.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(A.resumeToken,s)),l=l.insert(D,H),function(rt,J,Tt){return rt.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-rt.snapshotVersion.toMicroseconds()>=AI?!0:Tt.addedDocuments.size+Tt.modifiedDocuments.size+Tt.removedDocuments.size>0}(C,H,A)&&g.push(i.Pi.updateTargetData(h,H))});let y=ir(),_=xt();if(t.documentUpdates.forEach(A=>{t.resolvedLimboDocuments.has(A)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,A))}),g.push(II(h,d,t.documentUpdates).next(A=>{y=A.ks,_=A.qs})),!s.isEqual(At.min())){const A=i.Pi.getLastRemoteSnapshotVersion(h).next(D=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,s));g.push(A)}return Y.waitFor(g).next(()=>d.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,y,_)).next(()=>y)}).then(h=>(i.Ms=l,h))}function II(r,t,i){let s=xt(),l=xt();return i.forEach(h=>s=s.add(h)),t.getEntries(r,s).next(h=>{let d=ir();return i.forEach((g,y)=>{const _=h.get(g);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),y.isNoDocument()&&y.version.isEqual(At.min())?(t.removeEntry(g,y.readTime),d=d.insert(g,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(y),d=d.insert(g,y)):st(zm,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",y.version)}),{ks:d,qs:l}})}function CI(r,t){const i=St(r);return i.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=wm),i.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function DI(r,t){const i=St(r);return i.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return i.Pi.getTargetData(s,t).next(h=>h?(l=h,Y.resolve(l)):i.Pi.allocateTargetId(s).next(d=>(l=new Lr(t,d,"TargetPurposeListen",s.currentSequenceNumber),i.Pi.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=i.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(s.targetId,s),i.xs.set(t,s.targetId)),s})}async function rm(r,t,i){const s=St(r),l=s.Ms.get(t),h=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",h,d=>s.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!io(d))throw d;st(zm,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Cv(r,t,i){const s=St(r);let l=At.min(),h=xt();return s.persistence.runTransaction("Execute query","readwrite",d=>function(y,_,A){const D=St(y),C=D.xs.get(A);return C!==void 0?Y.resolve(D.Ms.get(C)):D.Pi.getTargetData(_,A)}(s,d,yi(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next(y=>{h=y})}).next(()=>s.Fs.getDocumentsMatchingQuery(d,t,i?l:At.min(),i?h:xt())).next(g=>(NI(s,gR(t),g),{documents:g,Qs:h})))}function NI(r,t,i){let s=r.Os.get(t)||At.min();i.forEach((l,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),r.Os.set(t,s)}class Dv{constructor(){this.activeTargetIds=TR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class OI{constructor(){this.Mo=new Dv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,s){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,s){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Dv,Promise.resolve()}handleUserChange(t,i,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="ConnectivityMonitor";class Ov{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(Nv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st(Nv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function sm(){return vc===null?vc=function(){return 268435456+Math.round(2147483648*Math.random())}():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="RestConnection",MI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===zc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,i,s,l,h){const d=sm(),g=this.zo(t,i.toUriEncodedString());st(Md,`Sending RPC '${t}' ${d}:`,g,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,h);const{host:_}=new URL(g),A=Ja(_);return this.Jo(t,g,y,s,A).then(D=>(st(Md,`Received RPC '${t}' ${d}: `,D),D),D=>{throw Qa(Md,`RPC '${t}' ${d} failed with error: `,D,"url: ",g,"request:",s),D})}Ho(t,i,s,l,h,d){return this.Go(t,i,s,l,h)}jo(t,i,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),s&&s.headers.forEach((l,h)=>t[h]=l)}zo(t,i){const s=MI[t];return`${this.Uo}/v1/${i}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class UI extends xI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,s,l,h){const d=sm();return new Promise((g,y)=>{const _=new BE;_.setWithCredentials(!0),_.listenOnce(jE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case bc.NO_ERROR:const D=_.getResponseJson();st(nn,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(D)),g(D);break;case bc.TIMEOUT:st(nn,`RPC '${t}' ${d} timed out`),y(new lt(X.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const C=_.getStatus();if(st(nn,`RPC '${t}' ${d} failed with status:`,C,"response text:",_.getResponseText()),C>0){let H=_.getResponseJson();Array.isArray(H)&&(H=H[0]);const $=H?.error;if($&&$.status&&$.message){const rt=function(Tt){const gt=Tt.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(gt)>=0?gt:X.UNKNOWN}($.status);y(new lt(rt,$.message))}else y(new lt(X.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new lt(X.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:t,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{st(nn,`RPC '${t}' ${d} completed.`)}});const A=JSON.stringify(l);st(nn,`RPC '${t}' ${d} sending request:`,l),_.send(i,"POST",A,s,15)})}T_(t,i,s){const l=sm(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=GE(),g=HE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,s),y.encodeInitMessageHeaders=!0;const A=h.join("");st(nn,`Creating RPC '${t}' stream ${l}: ${A}`,y);const D=d.createWebChannel(A,y);this.I_(D);let C=!1,H=!1;const $=new PI({Yo:J=>{H?st(nn,`Not sending because RPC '${t}' stream ${l} is closed:`,J):(C||(st(nn,`Opening RPC '${t}' stream ${l} transport.`),D.open(),C=!0),st(nn,`RPC '${t}' stream ${l} sending:`,J),D.send(J))},Zo:()=>D.close()}),rt=(J,Tt,gt)=>{J.listen(Tt,ct=>{try{gt(ct)}catch(Ht){setTimeout(()=>{throw Ht},0)}})};return rt(D,ml.EventType.OPEN,()=>{H||(st(nn,`RPC '${t}' stream ${l} transport opened.`),$.o_())}),rt(D,ml.EventType.CLOSE,()=>{H||(H=!0,st(nn,`RPC '${t}' stream ${l} transport closed`),$.a_(),this.E_(D))}),rt(D,ml.EventType.ERROR,J=>{H||(H=!0,Qa(nn,`RPC '${t}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),$.a_(new lt(X.UNAVAILABLE,"The operation could not be completed")))}),rt(D,ml.EventType.MESSAGE,J=>{if(!H){const Tt=J.data[0];Qt(!!Tt,16349);const gt=Tt,ct=gt?.error||gt[0]?.error;if(ct){st(nn,`RPC '${t}' stream ${l} received error:`,ct);const Ht=ct.status;let Et=function(S){const R=Re[S];if(R!==void 0)return ST(R)}(Ht),Bt=ct.message;Et===void 0&&(Et=X.INTERNAL,Bt="Unknown error status: "+Ht+" with message "+ct.message),H=!0,$.a_(new lt(Et,Bt)),D.close()}else st(nn,`RPC '${t}' stream ${l} received:`,Tt),$.u_(Tt)}}),rt(g,qE.STAT_EVENT,J=>{J.stat===Yd.PROXY?st(nn,`RPC '${t}' stream ${l} detected buffering proxy`):J.stat===Yd.NOPROXY&&st(nn,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{$.__()},0),$}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(i=>i===t)}}function xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(r){return new BR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t,i,s=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=i,this.d_=s,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-s);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="PersistentStream";class LT{constructor(t,i,s,l,h,d,g,y){this.Mi=t,this.S_=s,this.b_=l,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kT(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===X.RESOURCE_EXHAUSTED?(nr(i.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.D_===i&&this.G_(s,l)},s=>{t(()=>{const l=new lt(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)})})}G_(t,i){const s=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(l=>{s(()=>this.z_(l))}),this.stream.onMessage(l=>{s(()=>++this.F_==1?this.J_(l):this.onNext(l))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return st(Vv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget(()=>this.D_===t?i():(st(Vv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kI extends LT{constructor(t,i,s,l,h,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,l,d),this.serializer=h}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=HR(this.serializer,t),s=function(h){if(!("targetChange"in h))return At.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?At.min():d.readTime?_i(d.readTime):At.min()}(t);return this.listener.H_(i,s)}Y_(t){const i={};i.database=im(this.serializer),i.addTarget=function(h,d){let g;const y=d.target;if(g=Jd(y)?{documents:QR(h,y)}:{query:YR(h,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=RT(h,d.resumeToken);const _=tm(h,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(At.min())>0){g.readTime=Fc(h,d.snapshotVersion.toTimestamp());const _=tm(h,d.expectedCount);_!==null&&(g.expectedCount=_)}return g}(this.serializer,t);const s=XR(this.serializer,t);s&&(i.labels=s),this.q_(i)}Z_(t){const i={};i.database=im(this.serializer),i.removeTarget=t,this.q_(i)}}class LI extends LT{constructor(t,i,s,l,h,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,l,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=FR(t.writeResults,t.commitTime),s=_i(t.commitTime);return this.listener.na(s,i)}ra(){const t={};t.database=im(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map(s=>GR(this.serializer,s))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{}class BI extends zI{constructor(t,i,s,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new lt(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Go(t,em(i,s),l,h,d)).catch(h=>{throw h.name==="FirebaseError"?(h.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new lt(X.UNKNOWN,h.toString())})}Ho(t,i,s,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Ho(t,em(i,s),l,d,g,h)).catch(d=>{throw d.name==="FirebaseError"?(d.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new lt(X.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jI{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(i),this.aa=!1):st("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="RemoteStore";class qI{constructor(t,i,s,l,h){this.localStore=t,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo(d=>{s.enqueueAndForget(async()=>{Hs(this)&&(st(Bs,"Restarting streams for network reachability change."),await async function(y){const _=St(y);_.Ea.add(4),await Hl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await uh(_)}(this))})}),this.Ra=new jI(s,l)}}async function uh(r){if(Hs(r))for(const t of r.da)await t(!0)}async function Hl(r){for(const t of r.da)await t(!1)}function zT(r,t){const i=St(r);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),Hm(i)?qm(i):ro(i).O_()&&jm(i,t))}function Bm(r,t){const i=St(r),s=ro(i);i.Ia.delete(t),s.O_()&&BT(i,t),i.Ia.size===0&&(s.O_()?s.L_():Hs(i)&&i.Ra.set("Unknown"))}function jm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}ro(r).Y_(t)}function BT(r,t){r.Va.Ue(t),ro(r).Z_(t)}function qm(r){r.Va=new UR({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),ro(r).start(),r.Ra.ua()}function Hm(r){return Hs(r)&&!ro(r).x_()&&r.Ia.size>0}function Hs(r){return St(r).Ea.size===0}function jT(r){r.Va=void 0}async function HI(r){r.Ra.set("Online")}async function GI(r){r.Ia.forEach((t,i)=>{jm(r,t)})}async function FI(r,t){jT(r),Hm(r)?(r.Ra.ha(t),qm(r)):r.Ra.set("Unknown")}async function QI(r,t,i){if(r.Ra.set("Online"),t instanceof wT&&t.state===2&&t.cause)try{await async function(l,h){const d=h.cause;for(const g of h.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))}(r,t)}catch(s){st(Bs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Yc(r,s)}else if(t instanceof Cc?r.Va.Ze(t):t instanceof bT?r.Va.st(t):r.Va.tt(t),!i.isEqual(At.min()))try{const s=await UT(r.localStore);i.compareTo(s)>=0&&await function(h,d){const g=h.Va.Tt(d);return g.targetChanges.forEach((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const A=h.Ia.get(_);A&&h.Ia.set(_,A.withResumeToken(y.resumeToken,d))}}),g.targetMismatches.forEach((y,_)=>{const A=h.Ia.get(y);if(!A)return;h.Ia.set(y,A.withResumeToken(Je.EMPTY_BYTE_STRING,A.snapshotVersion)),BT(h,y);const D=new Lr(A.target,y,_,A.sequenceNumber);jm(h,D)}),h.remoteSyncer.applyRemoteEvent(g)}(r,i)}catch(s){st(Bs,"Failed to raise snapshot:",s),await Yc(r,s)}}async function Yc(r,t,i){if(!io(t))throw t;r.Ea.add(1),await Hl(r),r.Ra.set("Offline"),i||(i=()=>UT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{st(Bs,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await uh(r)})}function qT(r,t){return t().catch(i=>Yc(r,i,t))}async function ch(r){const t=St(r),i=Kr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:wm;for(;YI(t);)try{const l=await CI(t.localStore,s);if(l===null){t.Ta.length===0&&i.L_();break}s=l.batchId,KI(t,l)}catch(l){await Yc(t,l)}HT(t)&&GT(t)}function YI(r){return Hs(r)&&r.Ta.length<10}function KI(r,t){r.Ta.push(t);const i=Kr(r);i.O_()&&i.X_&&i.ea(t.mutations)}function HT(r){return Hs(r)&&!Kr(r).x_()&&r.Ta.length>0}function GT(r){Kr(r).start()}async function XI(r){Kr(r).ra()}async function $I(r){const t=Kr(r);for(const i of r.Ta)t.ea(i.mutations)}async function ZI(r,t,i){const s=r.Ta.shift(),l=Mm.from(s,t,i);await qT(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await ch(r)}async function JI(r,t){t&&Kr(r).X_&&await async function(s,l){if(function(d){return MR(d)&&d!==X.ABORTED}(l.code)){const h=s.Ta.shift();Kr(s).B_(),await qT(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,l)),await ch(s)}}(r,t),HT(r)&&GT(r)}async function Mv(r,t){const i=St(r);i.asyncQueue.verifyOperationInProgress(),st(Bs,"RemoteStore received new credentials");const s=Hs(i);i.Ea.add(3),await Hl(i),s&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await uh(i)}async function WI(r,t){const i=St(r);t?(i.Ea.delete(2),await uh(i)):t||(i.Ea.add(2),await Hl(i),i.Ra.set("Unknown"))}function ro(r){return r.ma||(r.ma=function(i,s,l){const h=St(i);return h.sa(),new kI(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(r.datastore,r.asyncQueue,{Xo:HI.bind(null,r),t_:GI.bind(null,r),r_:FI.bind(null,r),H_:QI.bind(null,r)}),r.da.push(async t=>{t?(r.ma.B_(),Hm(r)?qm(r):r.Ra.set("Unknown")):(await r.ma.stop(),jT(r))})),r.ma}function Kr(r){return r.fa||(r.fa=function(i,s,l){const h=St(i);return h.sa(),new LI(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:XI.bind(null,r),r_:JI.bind(null,r),ta:$I.bind(null,r),na:ZI.bind(null,r)}),r.da.push(async t=>{t?(r.fa.B_(),await ch(r)):(await r.fa.stop(),r.Ta.length>0&&(st(Bs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,i,s,l,h){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=s,this.op=l,this.removalCallback=h,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,s,l,h){const d=Date.now()+s,g=new Gm(t,i,d,l,h);return g.start(s),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fm(r,t){if(nr("AsyncQueue",`${t}: ${r}`),io(r))return new lt(X.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{static emptySet(t){return new Ha(t.comparator)}constructor(t){this.comparator=t?(i,s)=>t(i,s)||ft.comparator(i.key,s.key):(i,s)=>ft.comparator(i.key,s.key),this.keyedMap=gl(),this.sortedSet=new he(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,s)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Ha)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=s.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const s=new Ha;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.ga=new he(ft.comparator)}track(t){const i=t.doc.key,s=this.ga.get(i);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(i,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(i,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(i):t.type===1&&s.type===2?this.ga=this.ga.insert(i,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):yt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal((i,s)=>{t.push(s)}),t}}class Za{constructor(t,i,s,l,h,d,g,y,_){this.query=t,this.docs=i,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(t,i,s,l,h){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new Za(t,i,Ha.emptySet(i),d,s,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ih(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,s=t.docChanges;if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==s[l].type||!i[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class e2{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,s){const l=St(i),h=l.queries;l.queries=Pv(),h.forEach((d,g)=>{for(const y of g.Sa)y.onError(s)})})(this,new lt(X.ABORTED,"Firestore shutting down"))}}function Pv(){return new qs(r=>hT(r),ih)}async function n2(r,t){const i=St(r);let s=3;const l=t.query;let h=i.queries.get(l);h?!h.ba()&&t.Da()&&(s=2):(h=new t2,s=t.Da()?0:1);try{switch(s){case 0:h.wa=await i.onListen(l,!0);break;case 1:h.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=Fm(d,`Initialization of query '${Ua(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,h),h.Sa.push(t),t.va(i.onlineState),h.wa&&t.Fa(h.wa)&&Qm(i)}async function i2(r,t){const i=St(r),s=t.query;let l=3;const h=i.queries.get(s);if(h){const d=h.Sa.indexOf(t);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function r2(r,t){const i=St(r);let s=!1;for(const l of t){const h=l.query,d=i.queries.get(h);if(d){for(const g of d.Sa)g.Fa(l)&&(s=!0);d.wa=l}}s&&Qm(i)}function s2(r,t,i){const s=St(r),l=s.queries.get(t);if(l)for(const h of l.Sa)h.onError(i);s.queries.delete(t)}function Qm(r){r.Ca.forEach(t=>{t.next()})}var am,Uv;(Uv=am||(am={})).Ma="default",Uv.Cache="cache";class a2{constructor(t,i,s){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Za(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const s=i!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=Za.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t){this.key=t}}class QT{constructor(t){this.key=t}}class o2{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=fT(t),this.tu=new Ha(this.eu)}get nu(){return this.Ya}ru(t,i){const s=i?i.iu:new xv,l=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((A,D)=>{const C=l.get(A),H=rh(this.query,D)?D:null,$=!!C&&this.mutatedKeys.has(C.key),rt=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let J=!1;C&&H?C.data.isEqual(H.data)?$!==rt&&(s.track({type:3,doc:H}),J=!0):this.su(C,H)||(s.track({type:2,doc:H}),J=!0,(y&&this.eu(H,y)>0||_&&this.eu(H,_)<0)&&(g=!0)):!C&&H?(s.track({type:0,doc:H}),J=!0):C&&!H&&(s.track({type:1,doc:C}),J=!0,(y||_)&&(g=!0)),J&&(H?(d=d.add(H),h=rt?h.add(A):h.delete(A)):(d=d.delete(A),h=h.delete(A)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),h=h.delete(A.key),s.track({type:1,doc:A})}return{tu:d,iu:s,Cs:g,mutatedKeys:h}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,s,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort((A,D)=>function(H,$){const rt=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Rt:J})}};return rt(H)-rt($)}(A.type,D.type)||this.eu(A.doc,D.doc)),this.ou(s),l=l??!1;const g=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,_=y!==this.Za;return this.Za=y,d.length!==0||_?{snapshot:new Za(this.query,t.tu,h,d,t.mutatedKeys,y===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(i=>this.Ya=this.Ya.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ya=this.Ya.delete(i)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=xt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const i=[];return t.forEach(s=>{this.Xa.has(s)||i.push(new QT(s))}),this.Xa.forEach(s=>{t.has(s)||i.push(new FT(s))}),i}cu(t){this.Ya=t.Qs,this.Xa=xt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ym="SyncEngine";class l2{constructor(t,i,s){this.query=t,this.targetId=i,this.view=s}}class u2{constructor(t){this.key=t,this.hu=!1}}class c2{constructor(t,i,s,l,h,d){this.localStore=t,this.remoteStore=i,this.eventManager=s,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new qs(g=>hT(g),ih),this.Iu=new Map,this.Eu=new Set,this.du=new he(ft.comparator),this.Au=new Map,this.Ru=new Um,this.Vu={},this.mu=new Map,this.fu=$a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function h2(r,t,i=!0){const s=JT(r);let l;const h=s.Tu.get(t);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await YT(s,t,i,!0),l}async function f2(r,t){const i=JT(r);await YT(i,t,!0,!1)}async function YT(r,t,i,s){const l=await DI(r.localStore,yi(t)),h=l.targetId,d=r.sharedClientState.addLocalQueryTarget(h,i);let g;return s&&(g=await d2(r,t,h,d==="current",l.resumeToken)),r.isPrimaryClient&&i&&zT(r.remoteStore,l),g}async function d2(r,t,i,s,l){r.pu=(D,C,H)=>async function(rt,J,Tt,gt){let ct=J.view.ru(Tt);ct.Cs&&(ct=await Cv(rt.localStore,J.query,!1).then(({documents:O})=>J.view.ru(O,ct)));const Ht=gt&&gt.targetChanges.get(J.targetId),Et=gt&&gt.targetMismatches.get(J.targetId)!=null,Bt=J.view.applyChanges(ct,rt.isPrimaryClient,Ht,Et);return Lv(rt,J.targetId,Bt.au),Bt.snapshot}(r,D,C,H);const h=await Cv(r.localStore,t,!0),d=new o2(t,h.Qs),g=d.ru(h.documents),y=ql.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",l),_=d.applyChanges(g,r.isPrimaryClient,y);Lv(r,i,_.au);const A=new l2(t,i,d);return r.Tu.set(t,A),r.Iu.has(i)?r.Iu.get(i).push(t):r.Iu.set(i,[t]),_.snapshot}async function m2(r,t,i){const s=St(r),l=s.Tu.get(t),h=s.Iu.get(l.targetId);if(h.length>1)return s.Iu.set(l.targetId,h.filter(d=>!ih(d,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await rm(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),i&&Bm(s.remoteStore,l.targetId),om(s,l.targetId)}).catch(no)):(om(s,l.targetId),await rm(s.localStore,l.targetId,!0))}async function g2(r,t){const i=St(r),s=i.Tu.get(t),l=i.Iu.get(s.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),Bm(i.remoteStore,s.targetId))}async function p2(r,t,i){const s=S2(r);try{const l=await function(d,g){const y=St(d),_=ae.now(),A=g.reduce((H,$)=>H.add($.key),xt());let D,C;return y.persistence.runTransaction("Locally write mutations","readwrite",H=>{let $=ir(),rt=xt();return y.Ns.getEntries(H,A).next(J=>{$=J,$.forEach((Tt,gt)=>{gt.isValidDocument()||(rt=rt.add(Tt))})}).next(()=>y.localDocuments.getOverlayedDocuments(H,$)).next(J=>{D=J;const Tt=[];for(const gt of g){const ct=CR(gt,D.get(gt.key).overlayedDocument);ct!=null&&Tt.push(new Zr(gt.key,ct,rT(ct.value.mapValue),Hn.exists(!0)))}return y.mutationQueue.addMutationBatch(H,_,Tt,g)}).next(J=>{C=J;const Tt=J.applyToLocalDocumentSet(D,rt);return y.documentOverlayCache.saveOverlays(H,J.batchId,Tt)})}).then(()=>({batchId:C.batchId,changes:mT(D)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),function(d,g,y){let _=d.Vu[d.currentUser.toKey()];_||(_=new he(Mt)),_=_.insert(g,y),d.Vu[d.currentUser.toKey()]=_}(s,l.batchId,i),await Gl(s,l.changes),await ch(s.remoteStore)}catch(l){const h=Fm(l,"Failed to persist write");i.reject(h)}}async function KT(r,t){const i=St(r);try{const s=await RI(i.localStore,t);t.targetChanges.forEach((l,h)=>{const d=i.Au.get(h);d&&(Qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Qt(d.hu,14607):l.removedDocuments.size>0&&(Qt(d.hu,42227),d.hu=!1))}),await Gl(i,s,t)}catch(s){await no(s)}}function kv(r,t,i){const s=St(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const l=[];s.Tu.forEach((h,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)}),function(d,g){const y=St(d);y.onlineState=g;let _=!1;y.queries.forEach((A,D)=>{for(const C of D.Sa)C.va(g)&&(_=!0)}),_&&Qm(y)}(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function y2(r,t,i){const s=St(r);s.sharedClientState.updateQueryState(t,"rejected",i);const l=s.Au.get(t),h=l&&l.key;if(h){let d=new he(ft.comparator);d=d.insert(h,sn.newNoDocument(h,At.min()));const g=xt().add(h),y=new oh(At.min(),new Map,new he(Mt),d,g);await KT(s,y),s.du=s.du.remove(h),s.Au.delete(t),Km(s)}else await rm(s.localStore,t,!1).then(()=>om(s,t,i)).catch(no)}async function _2(r,t){const i=St(r),s=t.batch.batchId;try{const l=await wI(i.localStore,t);$T(i,s,null),XT(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await Gl(i,l)}catch(l){await no(l)}}async function v2(r,t,i){const s=St(r);try{const l=await function(d,g){const y=St(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let A;return y.mutationQueue.lookupMutationBatch(_,g).next(D=>(Qt(D!==null,37113),A=D.keys(),y.mutationQueue.removeMutationBatch(_,D))).next(()=>y.mutationQueue.performConsistencyCheck(_)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(_,A,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,A)).next(()=>y.localDocuments.getDocuments(_,A))})}(s.localStore,t);$T(s,t,i),XT(s,t),s.sharedClientState.updateMutationState(t,"rejected",i),await Gl(s,l)}catch(l){await no(l)}}function XT(r,t){(r.mu.get(t)||[]).forEach(i=>{i.resolve()}),r.mu.delete(t)}function $T(r,t,i){const s=St(r);let l=s.Vu[s.currentUser.toKey()];if(l){const h=l.get(t);h&&(i?h.reject(i):h.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function om(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),i&&r.Pu.yu(s,i);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach(s=>{r.Ru.containsKey(s)||ZT(r,s)})}function ZT(r,t){r.Eu.delete(t.path.canonicalString());const i=r.du.get(t);i!==null&&(Bm(r.remoteStore,i),r.du=r.du.remove(t),r.Au.delete(i),Km(r))}function Lv(r,t,i){for(const s of i)s instanceof FT?(r.Ru.addReference(s.key,t),E2(r,s)):s instanceof QT?(st(Ym,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||ZT(r,s.key)):yt(19791,{wu:s})}function E2(r,t){const i=t.key,s=i.path.canonicalString();r.du.get(i)||r.Eu.has(s)||(st(Ym,"New document in limbo: "+i),r.Eu.add(s),Km(r))}function Km(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const i=new ft(se.fromString(t)),s=r.fu.next();r.Au.set(s,new u2(i)),r.du=r.du.insert(i,s),zT(r.remoteStore,new Lr(yi(Nm(i.path)),s,"TargetPurposeLimboResolution",Wc.ce))}}async function Gl(r,t,i){const s=St(r),l=[],h=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach((g,y)=>{d.push(s.pu(y,t,i).then(_=>{if((_||i)&&s.isPrimaryClient){const A=_?!_.fromCache:i?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,A?"current":"not-current")}if(_){l.push(_);const A=Lm.As(y.targetId,_);h.push(A)}}))}),await Promise.all(d),s.Pu.H_(l),await async function(y,_){const A=St(y);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Y.forEach(_,C=>Y.forEach(C.Es,H=>A.persistence.referenceDelegate.addReference(D,C.targetId,H)).next(()=>Y.forEach(C.ds,H=>A.persistence.referenceDelegate.removeReference(D,C.targetId,H)))))}catch(D){if(!io(D))throw D;st(zm,"Failed to update sequence numbers: "+D)}for(const D of _){const C=D.targetId;if(!D.fromCache){const H=A.Ms.get(C),$=H.snapshotVersion,rt=H.withLastLimboFreeSnapshotVersion($);A.Ms=A.Ms.insert(C,rt)}}}(s.localStore,h))}async function T2(r,t){const i=St(r);if(!i.currentUser.isEqual(t)){st(Ym,"User change. New user:",t.toKey());const s=await PT(i.localStore,t);i.currentUser=t,function(h,d){h.mu.forEach(g=>{g.forEach(y=>{y.reject(new lt(X.CANCELLED,d))})}),h.mu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Gl(i,s.Ls)}}function A2(r,t){const i=St(r),s=i.Au.get(t);if(s&&s.hu)return xt().add(s.key);{let l=xt();const h=i.Iu.get(t);if(!h)return l;for(const d of h){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function JT(r){const t=St(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=KT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=A2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=y2.bind(null,t),t.Pu.H_=r2.bind(null,t.eventManager),t.Pu.yu=s2.bind(null,t.eventManager),t}function S2(r){const t=St(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=v2.bind(null,t),t}class Kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=lh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return bI(this.persistence,new TI,t.initialUser,this.serializer)}Cu(t){return new xT(km.mi,this.serializer)}Du(t){return new OI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kc.provider={build:()=>new Kc};class b2 extends Kc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Qt(this.persistence.referenceDelegate instanceof Qc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aI(s,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new xT(s=>Qc.mi(s,i),this.serializer)}}class lm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>kv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=T2.bind(null,this.syncEngine),await WI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new e2}()}createDatastore(t){const i=lh(t.databaseInfo.databaseId),s=function(h){return new UI(h)}(t.databaseInfo);return function(h,d,g,y){return new BI(h,d,g,y)}(t.authCredentials,t.appCheckCredentials,s,i)}createRemoteStore(t){return function(s,l,h,d,g){return new qI(s,l,h,d,g)}(this.localStore,this.datastore,t.asyncQueue,i=>kv(this.syncEngine,i,0),function(){return Ov.v()?new Ov:new VI}())}createSyncEngine(t,i){return function(l,h,d,g,y,_,A){const D=new c2(l,h,d,g,y,_);return A&&(D.gu=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await async function(i){const s=St(i);st(Bs,"RemoteStore shutting down."),s.Ea.add(5),await Hl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}lm.provider={build:()=>new lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):nr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="FirestoreClient";class R2{constructor(t,i,s,l,h){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=l,this.user=rn.UNAUTHENTICATED,this.clientId=Sm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,async d=>{st(Xr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(st(Xr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=Fm(i,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Pd(r,t){r.asyncQueue.verifyOperationInProgress(),st(Xr,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let s=i.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await PT(t.localStore,l),s=l)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function zv(r,t){r.asyncQueue.verifyOperationInProgress();const i=await I2(r);st(Xr,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener(s=>Mv(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>Mv(t.remoteStore,l)),r._onlineComponents=t}async function I2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(Xr,"Using user provided OfflineComponentProvider");try{await Pd(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(l){return l.name==="FirebaseError"?l.code===X.FAILED_PRECONDITION||l.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;Qa("Error using user provided cache. Falling back to memory cache: "+i),await Pd(r,new Kc)}}else st(Xr,"Using default OfflineComponentProvider"),await Pd(r,new b2(void 0));return r._offlineComponents}async function WT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(Xr,"Using user provided OnlineComponentProvider"),await zv(r,r._uninitializedComponentsProvider._online)):(st(Xr,"Using default OnlineComponentProvider"),await zv(r,new lm))),r._onlineComponents}function C2(r){return WT(r).then(t=>t.syncEngine)}async function Bv(r){const t=await WT(r),i=t.eventManager;return i.onListen=h2.bind(null,t.syncEngine),i.onUnlisten=m2.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=f2.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=g2.bind(null,t.syncEngine),i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="firestore.googleapis.com",qv=!0;class Hv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new lt(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=e0,this.ssl=qv}else this.host=t.host,this.ssl=t.ssl??qv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=MT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<rI)throw new lt(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}jw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=t0(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new lt(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class hh{constructor(t,i,s,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new lt(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Ow;switch(s.type){case"firstParty":return new Pw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new lt(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const s=jv.get(i);s&&(st("ComponentProvider","Removing Datastore"),jv.delete(i),s.terminate())}(this),Promise.resolve()}}function D2(r,t,i,s={}){r=pi(r,hh);const l=Ja(t),h=r._getSettings(),d={...h,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${i}`;l&&(eE(`https://${g}`),nE("Firestore",!0)),h.host!==e0&&h.host!==g&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...h,host:g,ssl:l,emulatorOptions:s};if(!Us(y,d)&&(r._setSettings(y),s.mockUserToken)){let _,A;if(typeof s.mockUserToken=="string")_=s.mockUserToken,A=rn.MOCK_USER;else{_=iS(s.mockUserToken,r._app?.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new lt(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new rn(D)}r._authCredentials=new Vw(new QE(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new fh(this.firestore,t,this._query)}}class Ce{constructor(t,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ce(this.firestore,t,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,s){if(Bl(i,Ce._jsonSchema))return new Ce(t,s||null,new ft(se.fromString(i.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:Ie("string",Ce._jsonSchemaVersion),referencePath:Ie("string")};class Hr extends fh{constructor(t,i,s){super(t,i,Nm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ce(this.firestore,null,new ft(t))}withConverter(t){return new Hr(this.firestore,t,this._path)}}function Ud(r,t,...i){if(r=on(r),YE("collection","path",t),r instanceof hh){const s=se.fromString(t,...i);return nv(s),new Hr(r,null,s)}{if(!(r instanceof Ce||r instanceof Hr))throw new lt(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(se.fromString(t,...i));return nv(s),new Hr(r.firestore,null,s)}}function yl(r,t,...i){if(r=on(r),arguments.length===1&&(t=Sm.newId()),YE("doc","path",t),r instanceof hh){const s=se.fromString(t,...i);return ev(s),new Ce(r,null,new ft(s))}{if(!(r instanceof Ce||r instanceof Hr))throw new lt(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(se.fromString(t,...i));return ev(s),new Ce(r.firestore,r instanceof Hr?r.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="AsyncQueue";class Fv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kT(this,"async_queue_retry"),this._c=()=>{const s=xd();s&&st(Gv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const i=xd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=xd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const i=new xs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!io(t))throw t;st(Gv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const i=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",Qv(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=i,i}enqueueAfterDelay(t,i,s){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=Gm.createAndSchedule(this,t,i,s,h=>this.hc(h));return this.tc.push(l),l}uc(){this.nc&&yt(47125,{Pc:Qv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((i,s)=>i.targetTimeMs-s.targetTimeMs);for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function Qv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(r){return function(i,s){if(typeof i!="object"||i===null)return!1;const l=i;for(const h of s)if(h in l&&typeof l[h]=="function")return!0;return!1}(r,["next","error","complete"])}class js extends hh{constructor(t,i,s,l){super(t,i,s,l),this.type="firestore",this._queue=new Fv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Fv(t),this._firestoreClient=void 0,await t}}}function Kv(r,t){const i=typeof r=="object"?r:sE(),s=typeof r=="string"?r:zc,l=dm(i,"firestore").getImmediate({identifier:s});if(!l._initialized){const h=eS("firestore");h&&D2(l,...h)}return l}function n0(r){if(r._terminated)throw new lt(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||N2(r),r._firestoreClient}function N2(r){const t=r._freezeSettings(),i=function(l,h,d,g){return new Jw(l,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,t0(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new R2(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qn(Je.fromBase64String(t))}catch(i){throw new lt(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new qn(Je.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Bl(t,qn._jsonSchema))return qn.fromBase64String(t.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Ie("string",qn._jsonSchemaVersion),bytes:Ie("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new lt(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new lt(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new lt(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Mt(this._lat,t._lat)||Mt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vi._jsonSchemaVersion}}static fromJSON(t){if(Bl(t,vi._jsonSchema))return new vi(t.latitude,t.longitude)}}vi._jsonSchemaVersion="firestore/geoPoint/1.0",vi._jsonSchema={type:Ie("string",vi._jsonSchemaVersion),latitude:Ie("number"),longitude:Ie("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,l){if(s.length!==l.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==l[h])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Bl(t,Ei._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(i=>typeof i=="number"))return new Ei(t.vectorValues);throw new lt(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:Ie("string",Ei._jsonSchemaVersion),vectorValues:Ie("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=/^__.*__$/;class V2{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return this.fieldMask!==null?new Zr(t,this.data,this.fieldMask,i,this.fieldTransforms):new jl(t,this.data,i,this.fieldTransforms)}}class i0{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return new Zr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function r0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ac:r})}}class $m{constructor(t,i,s,l,h,d){this.settings=t,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new $m({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.gc(t),s}yc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Xc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(r0(this.Ac)&&O2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class M2{constructor(t,i,s){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=s||lh(t)}Cc(t,i,s,l=!1){return new $m({Ac:t,methodName:i,Dc:s,path:Ze.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zm(r){const t=r._freezeSettings(),i=lh(r._databaseId);return new M2(r._databaseId,!!t.ignoreUndefinedProperties,i)}function s0(r,t,i,s,l,h={}){const d=r.Cc(h.merge||h.mergeFields?2:0,t,i,l);Jm("Data must be an object, but it was:",d,s);const g=a0(s,d);let y,_;if(h.merge)y=new Cn(d.fieldMask),_=d.fieldTransforms;else if(h.mergeFields){const A=[];for(const D of h.mergeFields){const C=um(t,D,i);if(!d.contains(C))throw new lt(X.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);l0(A,C)||A.push(C)}y=new Cn(A),_=d.fieldTransforms.filter(D=>y.covers(D.field))}else y=null,_=d.fieldTransforms;return new V2(new _n(g),y,_)}class mh extends Xm{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof mh}}function x2(r,t,i,s){const l=r.Cc(1,t,i);Jm("Data must be an object, but it was:",l,s);const h=[],d=_n.empty();$r(s,(y,_)=>{const A=Wm(t,y,i);_=on(_);const D=l.yc(A);if(_ instanceof mh)h.push(A);else{const C=gh(_,D);C!=null&&(h.push(A),d.set(A,C))}});const g=new Cn(h);return new i0(d,g,l.fieldTransforms)}function P2(r,t,i,s,l,h){const d=r.Cc(1,t,i),g=[um(t,s,i)],y=[l];if(h.length%2!=0)throw new lt(X.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<h.length;C+=2)g.push(um(t,h[C])),y.push(h[C+1]);const _=[],A=_n.empty();for(let C=g.length-1;C>=0;--C)if(!l0(_,g[C])){const H=g[C];let $=y[C];$=on($);const rt=d.yc(H);if($ instanceof mh)_.push(H);else{const J=gh($,rt);J!=null&&(_.push(H),A.set(H,J))}}const D=new Cn(_);return new i0(A,D,d.fieldTransforms)}function gh(r,t){if(o0(r=on(r)))return Jm("Unsupported field value:",t,r),a0(r,t);if(r instanceof Xm)return function(s,l){if(!r0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,l){const h=[];let d=0;for(const g of s){let y=gh(g,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),h.push(y),d++}return{arrayValue:{values:h}}}(r,t)}return function(s,l){if((s=on(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return AR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=ae.fromDate(s);return{timestampValue:Fc(l.serializer,h)}}if(s instanceof ae){const h=new ae(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Fc(l.serializer,h)}}if(s instanceof vi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof qn)return{bytesValue:RT(l.serializer,s._byteString)};if(s instanceof Ce){const h=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(h))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Pm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Ei)return function(d,g){return{mapValue:{fields:{[nT]:{stringValue:iT},[Bc]:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return Om(g.serializer,_)})}}}}}}(s,l);throw l.Sc(`Unsupported field value: ${bm(s)}`)}(r,t)}function a0(r,t){const i={};return $E(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$r(r,(s,l)=>{const h=gh(l,t.mc(s));h!=null&&(i[s]=h)}),{mapValue:{fields:i}}}function o0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ae||r instanceof vi||r instanceof qn||r instanceof Ce||r instanceof Xm||r instanceof Ei)}function Jm(r,t,i){if(!o0(i)||!KE(i)){const s=bm(i);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function um(r,t,i){if((t=on(t))instanceof dh)return t._internalPath;if(typeof t=="string")return Wm(r,t);throw Xc("Field path arguments must be of type string or ",r,!1,void 0,i)}const U2=new RegExp("[~\\*/\\[\\]]");function Wm(r,t,i){if(t.search(U2)>=0)throw Xc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new dh(...t.split("."))._internalPath}catch{throw Xc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function Xc(r,t,i,s,l){const h=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(h||d)&&(y+=" (found",h&&(y+=` in field ${s}`),d&&(y+=` in document ${l}`),y+=")"),new lt(X.INVALID_ARGUMENT,g+r+y)}function l0(r,t){return r.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(t,i,s,l,h){this._firestore=t,this._userDataWriter=i,this._key=s,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new k2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(c0("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class k2 extends u0{data(){return super.data()}}function c0(r,t){return typeof t=="string"?Wm(r,t):t instanceof dh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new lt(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z2{convertValue(t,i="none"){switch(Yr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw yt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const s={};return $r(t,(l,h)=>{s[l]=this.convertValue(h,i)}),s}convertVectorValue(t){const i=t.fields?.[Bc].arrayValue?.values?.map(s=>ve(s.doubleValue));return new Ei(i)}convertGeoPoint(t){return new vi(ve(t.latitude),ve(t.longitude))}convertArray(t,i){return(t.values||[]).map(s=>this.convertValue(s,i))}convertServerTimestamp(t,i){switch(i){case"previous":const s=eh(t);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(Cl(t));default:return null}}convertTimestamp(t){const i=Fr(t);return new ae(i.seconds,i.nanos)}convertDocumentKey(t,i){const s=se.fromString(t);Qt(VT(s),9688,{name:t});const l=new Dl(s.get(1),s.get(3)),h=new ft(s.popFirst(5));return l.isEqual(i)||nr(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(r,t,i){let s;return s=r?r.toFirestore(t):t,s}class _l{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ps extends u0{constructor(t,i,s,l,h,d){super(t,i,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const s=this._document.data.field(c0("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=Ps._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ps._jsonSchema={type:Ie("string",Ps._jsonSchemaVersion),bundleSource:Ie("string","DocumentSnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class Dc extends Ps{data(t={}){return super.data(t)}}class Ga{constructor(t,i,s,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new _l(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(s=>{t.call(i,new Dc(this._firestore,this._userDataWriter,s.key,s,new _l(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new lt(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const y=new Dc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new _l(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>h||g.type!==3).map(g=>{const y=new Dc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new _l(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,A=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:B2(g.type),doc:y,oldIndex:_,newIndex:A}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ga._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Sm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],l=[];return this.docs.forEach(h=>{h._document!==null&&(i.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function B2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:r})}}Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:Ie("string",Ga._jsonSchemaVersion),bundleSource:Ie("string","QuerySnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class f0 extends z2{constructor(t){super(),this.firestore=t}convertBytes(t){return new qn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Ce(this.firestore,null,i)}}function j2(r,t,i){r=pi(r,Ce);const s=pi(r.firestore,js),l=h0(r.converter,t);return ph(s,[s0(Zm(s),"setDoc",r._key,l,r.converter!==null,i).toMutation(r._key,Hn.none())])}function q2(r,t,i,...s){r=pi(r,Ce);const l=pi(r.firestore,js),h=Zm(l);let d;return d=typeof(t=on(t))=="string"||t instanceof dh?P2(h,"updateDoc",r._key,t,i,s):x2(h,"updateDoc",r._key,t),ph(l,[d.toMutation(r._key,Hn.exists(!0))])}function H2(r){return ph(pi(r.firestore,js),[new Vm(r._key,Hn.none())])}function G2(r,t){const i=pi(r.firestore,js),s=yl(r),l=h0(r.converter,t);return ph(i,[s0(Zm(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Hn.exists(!1))]).then(()=>s)}function kd(r,...t){r=on(r);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||Yv(t[s])||(i=t[s++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Yv(t[s])){const y=t[s];t[s]=y.next?.bind(y),t[s+1]=y.error?.bind(y),t[s+2]=y.complete?.bind(y)}let h,d,g;if(r instanceof Ce)d=pi(r.firestore,js),g=Nm(r._key.path),h={next:y=>{t[s]&&t[s](F2(d,r,y))},error:t[s+1],complete:t[s+2]};else{const y=pi(r,fh);d=pi(y.firestore,js),g=y._query;const _=new f0(d);h={next:A=>{t[s]&&t[s](new Ga(d,_,y,A))},error:t[s+1],complete:t[s+2]},L2(r._query)}return function(_,A,D,C){const H=new w2(C),$=new a2(A,H,D);return _.asyncQueue.enqueueAndForget(async()=>n2(await Bv(_),$)),()=>{H.Nu(),_.asyncQueue.enqueueAndForget(async()=>i2(await Bv(_),$))}}(n0(d),g,l,h)}function ph(r,t){return function(s,l){const h=new xs;return s.asyncQueue.enqueueAndForget(async()=>p2(await C2(s),l,h)),h.promise}(n0(r),t)}function F2(r,t,i){const s=i.docs.get(t._key),l=new f0(r);return new Ps(r,l,t._key,s,new _l(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(l){eo=l})(Wa),Fa(new ks("firestore",(s,{instanceIdentifier:l,options:h})=>{const d=s.getProvider("app").getImmediate(),g=new js(new Mw(s.getProvider("auth-internal")),new Uw(d,s.getProvider("app-check-internal")),function(_,A){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new lt(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dl(_.options.projectId,A)}(d,l),d);return h={useFetchStreams:i,...h},g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),jr(Z_,J_,t),jr(Z_,J_,"esm2020")})();const Q2=({isOpen:r,title:t,message:i,onConfirm:s,onCancel:l})=>r?Z.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:Z.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-md border-2 border-gray-200",children:[Z.jsx("div",{className:"text-xl font-bold text-gray-800 mb-2",children:t}),Z.jsx("div",{className:"text-gray-600 mb-6",children:i}),Z.jsxs("div",{className:"flex justify-end space-x-3",children:[l&&Z.jsx("button",{onClick:l,className:"px-6 py-2 rounded-xl text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-400",children:"Cancelar"}),Z.jsx("button",{onClick:s,className:"px-6 py-2 rounded-xl text-white font-semibold bg-red-500 hover:bg-red-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-400",children:"Confirmar"})]})]})}):null,Y2=()=>{const[r,t]=ce.useState([]),[i,s]=ce.useState(7),[l,h]=ce.useState(["administrador@empresa.com"]),[d,g]=ce.useState([{id:"default",name:"Plantilla por defecto",subject:"Feliz cumpleaos, [nombre]! ",body:"Todo el equipo de [nombre_empresa] te desea un muy feliz cumpleaos, [nombre]! Esperamos que tengas un da maravilloso lleno de alegra."}]),[y,_]=ce.useState("default"),[A,D]=ce.useState("employee-list"),[C,H]=ce.useState({id:"",name:"",dob:"",email:"",templateId:"default"}),[$,rt]=ce.useState(!1),[J,Tt]=ce.useState([]),[gt,ct]=ce.useState(!1),[Ht,Et]=ce.useState(null),[Bt,O]=ce.useState(""),[S,R]=ce.useState(null),[V,M]=ce.useState(null),[x,w]=ce.useState(null),[De,ee]=ce.useState(!0),[q,nt]=ce.useState("Gestor de Cumpleaos"),[ot,Pt]=ce.useState("");ce.useEffect(()=>{const et={apiKey:"AIzaSyACXN_joDuQd6EztT4zsewoIBBXVCE4ArE",authDomain:"gestor-cumpleanos.firebaseapp.com",projectId:"gestor-cumpleanos",storageBucket:"gestor-cumpleanos.firebasestorage.app",messagingSenderId:"519412657071",appId:"1:519412657071:web:e56d9ce3ad93300e031d5a",measurementId:"G-NCG9PVXBVK"};try{const It=Hd(et),Ot=Kv(It),$t=X_(It);R(Ot),M($t);const Ge=z_($t,async Te=>{Te?w(Te.uid):await Dd($t),ee(!1)});return()=>Ge()}catch(It){console.error("Failed to initialize Firebase:",It),ee(!1)}try{const It=Hd(et),Ot=Kv(It),$t=X_(It);R(Ot),M($t);const Ge=z_($t,async Te=>{if(Te)w(Te.uid);else{const ie=typeof __initial_auth_token<"u"?__initial_auth_token:null;if(ie)try{await y1($t,ie)}catch(ke){console.error("Error signing in with custom token:",ke),await Dd($t)}else await Dd($t)}ee(!1)});return()=>Ge()}catch(It){console.error("Failed to initialize Firebase:",It),ee(!1)}},[]),ce.useEffect(()=>{if(!S||!x)return;const et=`users/${x}/employees`,It=Ud(S,et),Ot=kd(It,jt=>{const ge=jt.docs.map(dn=>({id:dn.id,...dn.data()}));t(ge)},jt=>{console.error("Error getting employees:",jt)}),$t=`users/${x}/settings/config`,Ge=yl(S,$t),Te=kd(Ge,jt=>{if(jt.exists()){const ge=jt.data();s(ge.notificationDays||7),h(ge.notificationRecipients||["administrador@empresa.com"]),_(ge.defaultTemplateId||"default"),nt(ge.companyName||"Gestor de Cumpleaos"),Pt(ge.logoUrl||"")}},jt=>{console.error("Error getting settings:",jt)}),ie=`users/${x}/emailTemplates`,ke=Ud(S,ie),ln=kd(ke,jt=>{const ge=jt.docs.map(dn=>({id:dn.id,...dn.data()}));g(ge.length>0?ge:[{id:"default",name:"Plantilla por defecto",subject:"Feliz cumpleaos, [nombre]! ",body:"Todo el equipo de [nombre_empresa] te desea un muy feliz cumpleaos, [nombre]! Esperamos que tengas un da maravilloso lleno de alegra."}])},jt=>{console.error("Error getting email templates:",jt)});return()=>{Ot(),Te(),ln()}},[S,x]),ce.useEffect(()=>{Tt((It=>{const Ot=new Date;return r.filter(Ge=>{const[Te,ie]=Ge.dob.split("-"),ln=new Date(Ot.getFullYear(),parseInt(Te)-1,parseInt(ie)).getTime()-Ot.getTime(),jt=Math.ceil(ln/(1e3*60*60*24));if(jt<0){const dn=new Date(Ot.getFullYear()+1,parseInt(Te)-1,parseInt(ie)).getTime()-Ot.getTime(),Si=Math.ceil(dn/(1e3*60*60*24));return Si<=It&&Si>=0}return jt<=It&&jt>=0})})(i))},[r,i]),ce.useEffect(()=>{const It=setInterval(()=>{const Ot=new Date,$t=`${String(Ot.getMonth()+1).padStart(2,"0")}-${String(Ot.getDate()).padStart(2,"0")}`,Ge=r.filter(ie=>ie.dob===$t),Te=J.filter(ie=>{const[ke,ln]=ie.dob.split("-"),ge=new Date(Ot.getFullYear(),parseInt(ke)-1,parseInt(ln)).getTime()-Ot.getTime();return Math.ceil(ge/(1e3*60*60*24))===i});Ge.forEach(ie=>{const ke=d.find(ge=>ge.id===ie.templateId)||d.find(ge=>ge.id===y),ln=ke.subject.replace("[nombre]",ie.name).replace("[nombre_empresa]",q),jt=ke.body.replace("[nombre]",ie.name).replace("[nombre_empresa]",q);console.log(`Simulando envo de felicitacin a: ${ie.email}`),console.log(`Asunto: ${ln}`),console.log(`Cuerpo: ${jt}`)}),l.filter(Boolean).forEach(ie=>{const ke=Te.map(ln=>`${ln.name} (${ln.dob})`).join(", ");ke&&(console.log(`Simulando envo de notificacin a: ${ie}`),console.log(`Asunto: Prximos cumpleaos en ${i} das`),console.log(`Cuerpo: Los siguientes empleados cumplen aos pronto: ${ke}`))})},6e4);return()=>clearInterval(It)},[r,i,l,d,y,J,q]);const I=et=>{const{name:It,value:Ot}=et.target;H($t=>({...$t,[It]:Ot}))},K=async et=>{if(et.preventDefault(),!S||!x){O("Error: Base de datos no conectada.");return}const It=Ud(S,`users/${x}/employees`);try{if($){const Ot=yl(S,`users/${x}/employees/${C.id}`);await q2(Ot,{name:C.name,dob:C.dob,email:C.email,templateId:C.templateId}),O("Empleado actualizado con xito.")}else{const{id:Ot,...$t}=C;await G2(It,$t),O("Empleado aadido con xito.")}H({id:"",name:"",dob:"",email:"",templateId:y}),rt(!1),setTimeout(()=>O(""),3e3)}catch(Ot){console.error("Error writing document:",Ot),O("Error al guardar en la base de datos.")}},it=et=>{H(et),rt(!0),D("employee-list")},W=et=>{Et(et),ct(!0)},ht=async()=>{if(!S||!x){O("Error: Base de datos no conectada.");return}try{const et=yl(S,`users/${x}/employees/${Ht}`);await H2(et),O("Empleado eliminado con xito."),ct(!1),Et(null),setTimeout(()=>O(""),3e3)}catch(et){console.error("Error removing document:",et),O("Error al eliminar de la base de datos.")}},wt=(et,It)=>{const Ot=[...l];Ot[It]=et.target.value,h(Ot)},pt=async()=>{if(!S||!x){O("Error: Base de datos no conectada.");return}try{const et=yl(S,`users/${x}/settings/config`);await j2(et,{notificationDays:i,notificationRecipients:l,defaultTemplateId:y,companyName:q,logoUrl:ot}),O("Configuracin guardada con xito."),setTimeout(()=>O(""),3e3)}catch(et){console.error("Error writing settings:",et),O("Error al guardar la configuracin.")}},Ee=()=>Bt?Z.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-xl mt-4",role:"alert",children:Z.jsx("p",{children:Bt})}):null;return De?Z.jsx("div",{className:"min-h-screen bg-gray-100 p-6 font-inter flex items-center justify-center",children:Z.jsx("p",{children:"Cargando aplicacin..."})}):Z.jsx("div",{className:"min-h-screen bg-gray-100 p-6 font-inter flex justify-center",children:Z.jsxs("div",{className:"w-full max-w-5xl bg-white rounded-3xl shadow-2xl overflow-hidden",children:[Z.jsxs("header",{className:"bg-blue-600 text-white p-6 md:p-8 flex flex-col md:flex-row justify-between items-start md:items-center",children:[Z.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[ot&&Z.jsx("img",{src:ot,alt:"Logo de la empresa",className:"h-12 w-12 mr-4 object-contain rounded-xl bg-white p-1",onError:et=>{et.target.style.display="none"}}),Z.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:q})]}),Z.jsxs("nav",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4",children:[Z.jsx("button",{onClick:()=>D("employee-list"),className:`px-6 py-3 rounded-xl transition-all duration-300 font-semibold ${A==="employee-list"?"bg-blue-800 text-white shadow-lg":"bg-blue-500 text-white hover:bg-blue-400"}`,children:"Gestin de Empleados"}),Z.jsx("button",{onClick:()=>D("settings"),className:`px-6 py-3 rounded-xl transition-all duration-300 font-semibold ${A==="settings"?"bg-blue-800 text-white shadow-lg":"bg-blue-500 text-white hover:bg-blue-400"}`,children:"Configuracin"})]})]}),Z.jsxs("main",{className:"p-6 md:p-8",children:[Ee(),A==="employee-list"&&Z.jsxs("div",{children:[Z.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:"Lista de Empleados"}),Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[Z.jsxs("div",{className:"md:col-span-1 p-6 bg-gray-50 rounded-2xl border-2 border-gray-200 shadow-inner",children:[Z.jsx("h3",{className:"text-xl font-bold mb-4",children:$?"Editar Empleado":"Aadir Nuevo Empleado"}),Z.jsxs("form",{onSubmit:K,children:[Z.jsxs("div",{className:"mb-4",children:[Z.jsx("label",{className:"block text-gray-700 mb-1",children:"Nombre"}),Z.jsx("input",{type:"text",name:"name",value:C.name,onChange:I,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"})]}),Z.jsxs("div",{className:"mb-4",children:[Z.jsx("label",{className:"block text-gray-700 mb-1",children:"Fecha de Nacimiento (MM-DD)"}),Z.jsx("input",{type:"text",name:"dob",value:C.dob,onChange:I,required:!0,pattern:"\\d{2}-\\d{2}",placeholder:"Ej. 08-23",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"})]}),Z.jsxs("div",{className:"mb-6",children:[Z.jsx("label",{className:"block text-gray-700 mb-1",children:"Correo Electrnico"}),Z.jsx("input",{type:"email",name:"email",value:C.email,onChange:I,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"})]}),Z.jsxs("div",{className:"mb-6",children:[Z.jsx("label",{className:"block text-gray-700 mb-1",children:"Plantilla de felicitacin"}),Z.jsx("select",{name:"templateId",value:C.templateId,onChange:I,className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:d.map(et=>Z.jsx("option",{value:et.id,children:et.name},et.id))})]}),Z.jsx("div",{className:"flex justify-end",children:Z.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 transition-colors duration-200",children:$?"Guardar Cambios":"Aadir Empleado"})})]})]}),Z.jsxs("div",{className:"md:col-span-2 p-6 bg-yellow-50 rounded-2xl border-2 border-yellow-200 shadow-inner",children:[Z.jsxs("h3",{className:"text-xl font-bold mb-4 text-yellow-800",children:["Prximos Cumpleaos (",i," das)"]}),J.length>0?Z.jsx("ul",{className:"space-y-3",children:J.map(et=>Z.jsxs("li",{className:"p-3 bg-white rounded-xl shadow-sm border border-yellow-300",children:[Z.jsx("span",{className:"font-semibold text-gray-800",children:et.name}),Z.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",et.dob,")"]})]},et.id))}):Z.jsx("p",{className:"text-gray-500",children:"No hay cumpleaos prximos en este perodo."})]})]}),Z.jsx("div",{className:"bg-gray-50 rounded-2xl overflow-hidden shadow-inner border-2 border-gray-200",children:Z.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Z.jsx("thead",{className:"bg-gray-100",children:Z.jsxs("tr",{children:[Z.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),Z.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cumpleaos"}),Z.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),Z.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),Z.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(et=>Z.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[Z.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:et.name}),Z.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:et.dob}),Z.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:et.email}),Z.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[Z.jsx("button",{onClick:()=>it(et),className:"text-blue-600 hover:text-blue-900 transition-colors duration-150 mr-4",children:"Editar"}),Z.jsx("button",{onClick:()=>W(et.id),className:"text-red-600 hover:text-red-900 transition-colors duration-150",children:"Eliminar"})]})]},et.id))})]})})]}),A==="settings"&&Z.jsxs("div",{children:[Z.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:"Configuracin del Sistema"}),Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Z.jsxs("div",{className:"p-6 bg-gray-50 rounded-2xl border-2 border-gray-200 shadow-inner",children:[Z.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Configuracin General"}),Z.jsxs("div",{className:"mb-4",children:[Z.jsx("label",{className:"block text-gray-700 mb-1",children:"Nombre de la Empresa"}),Z.jsx("input",{type:"text",value:q,onChange:et=>nt(et.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"})]}),Z.jsxs("div",{className:"mb-4",children:[Z.jsx("label",{className:"block text-gray-700 mb-1",children:"URL del Logo (ej. https://ejemplo.com/logo.png)"}),Z.jsx("input",{type:"text",value:ot,onChange:et=>Pt(et.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"})]}),Z.jsx("h3",{className:"text-xl font-bold text-gray-800 mt-8 mb-4",children:"Configuracin de Notificaciones"}),Z.jsxs("div",{className:"mb-4",children:[Z.jsx("label",{className:"block text-gray-700 mb-1",children:"Das de antelacin para notificaciones"}),Z.jsx("input",{type:"number",value:i,onChange:et=>s(parseInt(et.target.value)||0),min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"})]}),Z.jsxs("div",{className:"space-y-4",children:[Z.jsx("label",{className:"block text-gray-700 mb-1",children:"Destinatarios de las notificaciones (mximo 5)"}),[...Array(5)].map((et,It)=>Z.jsx("input",{type:"email",value:l[It]||"",onChange:Ot=>wt(Ot,It),placeholder:`Correo del destinatario #${It+1}`,className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"},It))]}),Z.jsx("button",{onClick:pt,className:"mt-6 px-6 py-2 bg-green-600 text-white font-semibold rounded-xl hover:bg-green-700 transition-colors duration-200",children:"Guardar Configuracin"})]}),Z.jsxs("div",{className:"p-6 bg-gray-50 rounded-2xl border-2 border-gray-200 shadow-inner",children:[Z.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Plantilla de Felicitacin por Correo"}),Z.jsxs("div",{className:"mb-4",children:[Z.jsx("label",{className:"block text-gray-700 mb-1",children:"Plantilla por defecto"}),Z.jsx("select",{value:y,onChange:et=>_(et.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:d.map(et=>Z.jsx("option",{value:et.id,children:et.name},et.id))})]}),Z.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 p-4 rounded-xl text-sm",children:[Z.jsx("p",{className:"font-semibold mb-2",children:"Previsualizacin del Mensaje:"}),Z.jsx("p",{children:d.find(et=>et.id===y)?.body?.replace("[nombre]","John Doe").replace("[nombre_empresa]",q)})]}),Z.jsx("button",{onClick:pt,className:"mt-6 px-6 py-2 bg-green-600 text-white font-semibold rounded-xl hover:bg-green-700 transition-colors duration-200",children:"Guardar Configuracin"})]})]})]})]}),Z.jsx(Q2,{isOpen:gt,title:"Confirmar eliminacin",message:"Ests seguro de que deseas eliminar a este empleado? Esta accin no se puede deshacer.",onConfirm:ht,onCancel:()=>ct(!1)})]})})};QA.createRoot(document.getElementById("root")).render(Z.jsx(ce.StrictMode,{children:Z.jsx(Y2,{})}));
